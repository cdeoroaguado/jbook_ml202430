

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Modulo 3: Análisis exploratorio de datos de la banca &#8212; Ciencia de datos aplicada a la banca</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/proof.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'modulo_3';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Módulo 4: Visualización de datos con Python" href="modulo_4.html" />
    <link rel="prev" title="Módulo 2: Estructuración y manipulación de datos con Python" href="modulo_2.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="_static/logo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Ciencia de datos aplicada a la banca
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="modulo_1.html"><strong>Módulo 1: Introducción a la ciencia de datos con Python</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="modulo_2.html"><strong>Módulo 2: Estructuración y manipulación de datos con Python</strong></a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#"><strong>Modulo 3: Análisis exploratorio de datos de la banca</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="modulo_4.html"><strong>Módulo 4: Visualización de datos con Python</strong></a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Fmodulo_3.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/modulo_3.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Modulo 3: Análisis exploratorio de datos de la banca</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#estadistica-descriptiva"><strong>Estadística descriptiva</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#poblacion-y-muestra"><strong>Población y muestra</strong></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#tipos-de-datos"><strong>Tipos de datos</strong></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-univariado"><strong>Análisis univariado</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#medidas-de-conteo-y-proporciones"><strong>Medidas de conteo y proporciones</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#medidas-de-tendencia-central"><strong>Medidas de tendencia central</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#medidas-de-dispersion"><strong>Medidas de dispersión</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#medidas-de-posicion"><strong>Medidas de posición</strong></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#distribuciones"><strong>Distribuciones</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#distribucion-normal"><strong>Distribución normal</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#distribucion-gamma"><strong>Distribución Gamma</strong></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-bivariado"><strong>Análisis bivariado</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#correlacion"><strong>Correlación</strong></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#inferencia-estadistica"><strong>Inferencia estadística</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pruebas-de-hipotesis"><strong>Pruebas de hipótesis</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#comparacion-de-2-grupos-poblacionales-independientes-parametrica"><strong>Comparación de 2 grupos poblacionales independientes paramétrica</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#igualdad-de-varianzas"><strong>Igualdad de varianzas</strong></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#varianzas-distintas"><strong>Varianzas distintas</strong></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#comparacion-de-2-grupos-poblacionales-dependientes-parametrica-pareadas"><strong>Comparación de 2 grupos poblacionales dependientes paramétrica (pareadas)</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#comparacion-de-2-grupos-poblacionales-independientes-no-parametrica"><strong>Comparación de 2 grupos poblacionales independientes no paramétrica</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#comparacion-de-2-grupos-poblacionales-dependientes-no-parametrica-pareadas"><strong>Comparación de 2 grupos poblacionales dependientes no paramétrica (pareadas)</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#anova-para-mas-de-2-grupos-parametricas"><strong>ANOVA para mas de 2 grupos paramétricas</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#kw-para-mas-de-2-grupos-no-parametrica"><strong>KW para mas de 2 grupos no parametrica</strong></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#machine-learning-no-supervisado"><strong>Machine learning no supervisado</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#tipos-de-aprendizaje-no-supervisado"><strong>Tipos de aprendizaje no supervisado</strong></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#desafios-del-aprendizaje-no-supervisado"><strong>Desafíos del aprendizaje no supervisado</strong></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#preprocesamiento-y-escalado"><strong>Preprocesamiento y escalado</strong></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-de-componentes-principales-reduccion-de-dimensiones"><strong>Análisis de componentes principales (reducción de dimensiones)</strong></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-de-agrupamiento-cluster"><strong>Análisis de agrupamiento (cluster)</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#k-means"><strong>K-Means</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#la-trampa-de-la-inicializacion-aleatoria"><strong>La trampa de la inicialización aleatoria</strong></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#evaluacion-de-un-agrupamiento"><strong>Evaluación de un agrupamiento</strong></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="modulo-3-analisis-exploratorio-de-datos-de-la-banca">
<h1><strong>Modulo 3: Análisis exploratorio de datos de la banca</strong><a class="headerlink" href="#modulo-3-analisis-exploratorio-de-datos-de-la-banca" title="Permalink to this heading">#</a></h1>
<p>La <strong>estadística descriptiva</strong> proporciona un marco para resumir y visualizar grandes volúmenes de datos financieros, como transacciones, historiales crediticios y comportamientos del mercado. Mediante el uso de medidas como la media, la mediana, la desviación estándar y los percentiles, los bancos pueden identificar patrones en el comportamiento de los clientes, como tendencias de gasto, ahorro y tasas de incumplimiento de crédito. Esta información es crucial para segmentar clientes, diseñar estrategias de marketing personalizadas y mejorar la gestión de carteras de productos financieros.</p>
<p>Por otro lado, la <strong>estadística inferencial</strong> permite a los bancos realizar predicciones y tomar decisiones informadas bajo incertidumbre. A través de técnicas como pruebas de hipótesis, modelos de regresión y análisis de varianza (ANOVA), se puede inferir, por ejemplo, la probabilidad de que un cliente incumpla un préstamo o proyectar tendencias económicas como las tasas de interés e inflación. Estas inferencias son vitales para la gestión del riesgo crediticio y la planificación financiera a largo plazo.</p>
<p>Complementando estos enfoques tradicionales, se encuentran técnicas avanzadas como el <strong>Análisis de Componentes Principales (PCA)</strong> y el <strong>Clustering</strong>, que ofrecen una perspectiva más profunda y efectiva en el manejo de datos complejos. El PCA es una técnica de reducción de dimensionalidad que permite simplificar conjuntos de datos de alta dimensión al identificar las variables más influyentes. En el sector bancario, PCA es fundamental para optimizar los modelos de puntuación crediticia, identificando los factores clave que afectan la solvencia de los clientes y mejorando así la precisión en la evaluación del riesgo.</p>
<p>El <strong>Clustering</strong>, por su parte, es una técnica de aprendizaje no supervisado que agrupa datos en clusters o grupos de clientes con comportamientos similares. Esta técnica es ampliamente utilizada en la segmentación de clientes, ayudando a los bancos a personalizar sus ofertas de productos y servicios, mejorar las campañas de marketing, y aumentar la satisfacción del cliente. Además, el clustering es extremadamente útil en la detección de fraudes, al identificar transacciones que se desvían de los patrones normales de comportamiento, permitiendo a los bancos reaccionar de manera proactiva frente a posibles actividades fraudulentas.</p>
<p>En conjunto, la combinación de estadística descriptiva e inferencial con técnicas avanzadas como PCA y Clustering ofrece a las instituciones bancarias un enfoque integral para analizar y aprovechar sus datos. Este módulo se centrará en cómo aplicar estas técnicas estadísticas y de aprendizaje automático en el análisis de datos bancarios, proporcionando a los participantes una comprensión sólida de cómo estas herramientas pueden ser utilizadas para enfrentar desafíos específicos en el sector financiero y potenciar la toma de decisiones basada en datos.</p>
<section id="estadistica-descriptiva">
<h2><strong>Estadística descriptiva</strong><a class="headerlink" href="#estadistica-descriptiva" title="Permalink to this heading">#</a></h2>
<p>La estadística descriptiva es una rama de las matemáticas que se encarga de analizar, interpretar y presentar de manera estructurada los datos obtenidos a través de diferentes fuentes. Con Python y sus múltiples librerías de análisis de datos, podemos realizar de manera sencilla estadística descriptiva. Para el desarrollo óptimo de la parte estadística debemos conocer las funciones implementadas en python <a class="reference external" href="https://docs.scipy.org/doc/scipy/tutorial/stats.html">Enlace</a></p>
<section id="poblacion-y-muestra">
<h3><strong>Población y muestra</strong><a class="headerlink" href="#poblacion-y-muestra" title="Permalink to this heading">#</a></h3>
<p>La <strong>estadística</strong> es la ciencia de recolectar, organizar, analizar e interpretar información. Las
estadísticas son números obtenidos de un conjunto o colección de datos.</p>
<ul class="simple">
<li><p>Una <strong>población</strong> es el total de la información o de los objetos de interés para un
estadístico en una investigación particular.</p></li>
<li><p>Una <strong>muestra</strong> es cualquier subconjunto de una población.</p></li>
<li><p>Un <strong>dato</strong> es un número o denominaciones que podemos asignar a un individuo o
elemento de la población.</p></li>
</ul>
<p>Una <strong>variable aleatoria</strong> son fenómenos o características medibles de los elementos de la población. Ejemplo: sexo, edad, peso, estatura, color de ojos, estado civil, temperatura, cantidad de nacimientos, presión, diámetro, etc, esta medición genera como resultado la obtención de <strong>datos</strong></p>
<ul class="simple">
<li><p>Un <strong>parámetro</strong> es cualquier característica numérica de una población.</p></li>
<li><p>Un <strong>estadístico</strong> es cualquier caractrística numérica de una muestra.</p></li>
</ul>
</section>
<section id="tipos-de-datos">
<h3><strong>Tipos de datos</strong><a class="headerlink" href="#tipos-de-datos" title="Permalink to this heading">#</a></h3>
<p>De forma general los datos se clasifican en cuantitativos o numéricos y cualitativos o categóricos, mismos que se subdividen tal como se indica en la siguiente figura:</p>
<p><img alt="tipo" src="_images/tipo.png" /></p>
<p>Analicemos el siguiente conjunto de datos:</p>
<p><strong>Contexto empresarial</strong>. Los préstamos entre pares (P2P) en línea han facilitado la práctica de pedir y prestar dinero. En esta forma de préstamo, no hay una entrevista en persona y el prestatario puede simplemente completar un formulario en línea y obtener la aprobación del préstamo. La información proporcionada únicamente por el prestatario es propensa a exageraciones y distorsiones, especialmente cuando se trata de ingresos. Todas las empresas de préstamos entre pares se basan en un procedimiento bien diseñado que rechaza a los prestatarios con una alta probabilidad de no pagar sus deudas.</p>
<p>Rechazar a cualquier persona que no tenga una fuente de ingresos verificada es una política relevante que las plataformas de préstamos pueden implementar para ayudar a reducir la tasa de préstamos incobrables. Es natural sospechar que si no se puede verificar la fuente de ingresos de una persona, es posible que no pueda pagar el préstamo. Sin embargo, desde la perspectiva de un prestatario, el proceso de verificación puede ser engorroso y llevar mucho tiempo, y es posible que simplemente cambie de plataforma debido a este inconveniente.</p>
<p><strong>Problema empresarial</strong>. Como científico de datos de una empresa emergente de préstamos P2P, debe responder a la siguiente pregunta: “¿Debería la empresa verificar la fuente de ingresos de un solicitante de préstamo en línea antes de aprobar su préstamo?”</p>
<p><strong>Contexto analítico</strong>. Los datos son de <a class="reference external" href="https://www.lendingclub.com/info/download-data.action">LendingClub (LC) Statistics</a> y contienen todos los préstamos emitidos entre 2007 y 2012 junto con su estado actual (pagados en su totalidad o cancelados). Hay aproximadamente 50 variables que describen a los prestatarios y los préstamos; con el fin de reducir la complejidad, la empresa ya ha realizado una preselección de estas variables en función de los análisis existentes de LendingClub para seleccionar nueve variables relevantes, como los ingresos anuales, la calificación crediticia de LendingClub, la propiedad de la vivienda, etc. Utilizaremos una nueva técnica, la regresión logística , para responder a nuestra pregunta en cuestión.</p>
<p>Echemos un vistazo a los datos que tenemos a nuestra disposición:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="ne">FutureWarning</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Cargar paquetes</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;_data/datadescrip/Lending_club_cleaned_2.csv&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>loan_status</th>
      <th>annual_inc</th>
      <th>verification_status</th>
      <th>emp_length</th>
      <th>home_ownership</th>
      <th>int_rate</th>
      <th>loan_amnt</th>
      <th>purpose</th>
      <th>term</th>
      <th>grade</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Fully Paid</td>
      <td>24000.0</td>
      <td>Verified</td>
      <td>10+ years</td>
      <td>RENT</td>
      <td>10.65%</td>
      <td>5000</td>
      <td>credit_card</td>
      <td>36 months</td>
      <td>B</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Charged Off</td>
      <td>30000.0</td>
      <td>Source Verified</td>
      <td>&lt; 1 year</td>
      <td>RENT</td>
      <td>15.27%</td>
      <td>2500</td>
      <td>car</td>
      <td>60 months</td>
      <td>C</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Fully Paid</td>
      <td>12252.0</td>
      <td>Not Verified</td>
      <td>10+ years</td>
      <td>RENT</td>
      <td>15.96%</td>
      <td>2400</td>
      <td>small_business</td>
      <td>36 months</td>
      <td>C</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Fully Paid</td>
      <td>49200.0</td>
      <td>Source Verified</td>
      <td>10+ years</td>
      <td>RENT</td>
      <td>13.49%</td>
      <td>10000</td>
      <td>other</td>
      <td>36 months</td>
      <td>C</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Fully Paid</td>
      <td>80000.0</td>
      <td>Source Verified</td>
      <td>1 year</td>
      <td>RENT</td>
      <td>12.69%</td>
      <td>3000</td>
      <td>other</td>
      <td>60 months</td>
      <td>B</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Esta es la descripción de las variables</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>Variable</p></th>
<th class="head text-left"><p>Descripción</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>loan_status</p></td>
<td class="text-left"><p>La primera columna indica si el prestatario pagó el préstamo (pagado en su totalidad Fully Paid) o no (dañó el préstamo Charged Off).</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>annual_inc</p></td>
<td class="text-left"><p>El ingreso anual autodeclarado proporcionado por el prestatario durante el registro.</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>verification_status</p></td>
<td class="text-left"><p>Indica si el ingreso fue verificado por LC, no verificado, o si la fuente de ingresos fue verificada.</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>emp_length</p></td>
<td class="text-left"><p>La duración del empleo en años. Los valores posibles están entre 0 y 10, donde 0 significa menos de un año y 10 significa diez o más años.</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>home_ownership</p></td>
<td class="text-left"><p>El estado de propiedad de la vivienda proporcionado por el prestatario durante el registro u obtenido del informe crediticio. Los valores son: RENT, OWN, MORTGAGE, OTHER.</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>int_rate</p></td>
<td class="text-left"><p>Tasa de interés del préstamo.</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>loan_amnt</p></td>
<td class="text-left"><p>El monto listado del préstamo solicitado por el prestatario. Si en algún momento el departamento de crédito reduce el monto del préstamo, se reflejará en este valor.</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>purpose</p></td>
<td class="text-left"><p>Una categoría proporcionada por el prestatario para la solicitud de préstamo.</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>term</p></td>
<td class="text-left"><p>El número de pagos del préstamo. Los valores están en meses y pueden ser 36 o 60.</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>grade</p></td>
<td class="text-left"><p>Calificación del préstamo asignada por LC.</p></td>
</tr>
</tbody>
</table>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 38705 entries, 0 to 38704
Data columns (total 10 columns):
 #   Column               Non-Null Count  Dtype  
---  ------               --------------  -----  
 0   loan_status          38705 non-null  object 
 1   annual_inc           38705 non-null  float64
 2   verification_status  38705 non-null  object 
 3   emp_length           38705 non-null  object 
 4   home_ownership       38705 non-null  object 
 5   int_rate             38705 non-null  object 
 6   loan_amnt            38705 non-null  int64  
 7   purpose              38705 non-null  object 
 8   term                 38705 non-null  object 
 9   grade                38705 non-null  object 
dtypes: float64(1), int64(1), object(8)
memory usage: 3.0+ MB
</pre></div>
</div>
</div>
</div>
<p>Realicemos una limpieza de los datos para realizar el análisis exploratorio</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Cambiar loan_status, verification_status, emp_length, term y grade al tipo categórico </span>
<span class="n">df</span><span class="o">.</span><span class="n">loan_status</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loan_status</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">CategoricalDtype</span><span class="p">(</span><span class="n">categories</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Charged Off&#39;</span><span class="p">,</span> <span class="s1">&#39;Fully Paid&#39;</span><span class="p">]))</span>
<span class="n">df</span><span class="o">.</span><span class="n">verification_status</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">verification_status</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">CategoricalDtype</span><span class="p">(</span><span class="n">categories</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Not Verified&#39;</span><span class="p">,</span> <span class="s1">&#39;Source Verified&#39;</span><span class="p">,</span> <span class="s1">&#39;Verified&#39;</span><span class="p">]))</span>
<span class="n">df</span><span class="o">.</span><span class="n">emp_length</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">emp_length</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">CategoricalDtype</span><span class="p">(</span><span class="n">categories</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;&lt; 1 year&#39;</span><span class="p">,</span> <span class="s1">&#39;1 year&#39;</span><span class="p">,</span> <span class="s1">&#39;2 years&#39;</span><span class="p">,</span> <span class="s1">&#39;3 years&#39;</span><span class="p">,</span> <span class="s1">&#39;4 years&#39;</span><span class="p">,</span> \
                                                             <span class="s1">&#39;5 years&#39;</span><span class="p">,</span> <span class="s1">&#39;6 years&#39;</span><span class="p">,</span> <span class="s1">&#39;7 years&#39;</span><span class="p">,</span> <span class="s1">&#39;8 years&#39;</span><span class="p">,</span> <span class="s1">&#39;9 years&#39;</span><span class="p">,</span> \
                                                             <span class="s1">&#39;10+ years&#39;</span><span class="p">]))</span>
<span class="n">df</span><span class="o">.</span><span class="n">home_ownership</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">home_ownership</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">CategoricalDtype</span><span class="p">(</span><span class="n">categories</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;RENT&#39;</span><span class="p">,</span><span class="s1">&#39;MORTGAGE&#39;</span><span class="p">,</span><span class="s1">&#39;OWN&#39;</span><span class="p">,</span><span class="s1">&#39;OTHER&#39;</span><span class="p">]))</span>
<span class="n">df</span><span class="o">.</span><span class="n">term</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">term</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">CategoricalDtype</span><span class="p">(</span><span class="n">categories</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39; 36 months&#39;</span><span class="p">,</span> <span class="s1">&#39; 60 months&#39;</span><span class="p">]))</span>
<span class="n">df</span><span class="o">.</span><span class="n">grade</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">grade</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">CategoricalDtype</span><span class="p">(</span><span class="n">categories</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">,</span><span class="s1">&#39;C&#39;</span><span class="p">,</span><span class="s1">&#39;D&#39;</span><span class="p">,</span><span class="s1">&#39;E&#39;</span><span class="p">,</span><span class="s1">&#39;F&#39;</span><span class="p">,</span><span class="s1">&#39;G&#39;</span><span class="p">]))</span>
<span class="n">df</span><span class="o">.</span><span class="n">purpose</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">purpose</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">CategoricalDtype</span><span class="p">(</span><span class="n">categories</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;debt_consolidation&#39;</span><span class="p">,</span> <span class="s1">&#39;credit_card&#39;</span><span class="p">,</span> <span class="s1">&#39;other&#39;</span><span class="p">,</span> <span class="s1">&#39;home_improvement&#39;</span><span class="p">,</span>
                                                                         <span class="s1">&#39;major_purchase&#39;</span><span class="p">,</span> <span class="s1">&#39;small_business&#39;</span><span class="p">,</span> <span class="s1">&#39;car&#39;</span><span class="p">,</span> <span class="s1">&#39;wedding&#39;</span><span class="p">,</span> <span class="s1">&#39;medical&#39;</span><span class="p">,</span>
                                                                         <span class="s1">&#39;moving&#39;</span><span class="p">,</span> <span class="s1">&#39;house&#39;</span><span class="p">,</span> <span class="s1">&#39;vacation&#39;</span><span class="p">,</span> <span class="s1">&#39;educational&#39;</span><span class="p">,</span> <span class="s1">&#39;renewable_energy&#39;</span><span class="p">]))</span>

<span class="c1">#Además, los datos originales en int_rate contienen cadenas en la forma &#39;x.xx%&#39;, </span>
<span class="c1">#eliminamos el % y cambiamos los valores a tipo float:</span>
<span class="n">df</span><span class="o">.</span><span class="n">int_rate</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">int_rate</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s1">&#39;%&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;float&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>loan_status</th>
      <th>annual_inc</th>
      <th>verification_status</th>
      <th>emp_length</th>
      <th>home_ownership</th>
      <th>int_rate</th>
      <th>loan_amnt</th>
      <th>purpose</th>
      <th>term</th>
      <th>grade</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Fully Paid</td>
      <td>24000.0</td>
      <td>Verified</td>
      <td>10+ years</td>
      <td>RENT</td>
      <td>10.65</td>
      <td>5000</td>
      <td>credit_card</td>
      <td>36 months</td>
      <td>B</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Charged Off</td>
      <td>30000.0</td>
      <td>Source Verified</td>
      <td>&lt; 1 year</td>
      <td>RENT</td>
      <td>15.27</td>
      <td>2500</td>
      <td>car</td>
      <td>60 months</td>
      <td>C</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Fully Paid</td>
      <td>12252.0</td>
      <td>Not Verified</td>
      <td>10+ years</td>
      <td>RENT</td>
      <td>15.96</td>
      <td>2400</td>
      <td>small_business</td>
      <td>36 months</td>
      <td>C</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Fully Paid</td>
      <td>49200.0</td>
      <td>Source Verified</td>
      <td>10+ years</td>
      <td>RENT</td>
      <td>13.49</td>
      <td>10000</td>
      <td>other</td>
      <td>36 months</td>
      <td>C</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Fully Paid</td>
      <td>80000.0</td>
      <td>Source Verified</td>
      <td>1 year</td>
      <td>RENT</td>
      <td>12.69</td>
      <td>3000</td>
      <td>other</td>
      <td>60 months</td>
      <td>B</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 38705 entries, 0 to 38704
Data columns (total 10 columns):
 #   Column               Non-Null Count  Dtype   
---  ------               --------------  -----   
 0   loan_status          38705 non-null  category
 1   annual_inc           38705 non-null  float64 
 2   verification_status  38705 non-null  category
 3   emp_length           38705 non-null  category
 4   home_ownership       38705 non-null  category
 5   int_rate             38705 non-null  float64 
 6   loan_amnt            38705 non-null  int64   
 7   purpose              38705 non-null  category
 8   term                 38705 non-null  category
 9   grade                38705 non-null  category
dtypes: category(7), float64(2), int64(1)
memory usage: 1.1 MB
</pre></div>
</div>
</div>
</div>
</section>
<section id="analisis-univariado">
<h3><strong>Análisis univariado</strong><a class="headerlink" href="#analisis-univariado" title="Permalink to this heading">#</a></h3>
<p>Si la variable es categórica.</p>
<section id="medidas-de-conteo-y-proporciones">
<h4><strong>Medidas de conteo y proporciones</strong><a class="headerlink" href="#medidas-de-conteo-y-proporciones" title="Permalink to this heading">#</a></h4>
<p>El análisis de frecuencia es una técnica estadística que se utiliza para contar la cantidad de veces que ocurre cada categoría o valor dentro de una variable, generalmente en variables categóricas o discretas. Este tipo de análisis ayudar a identificar patrones 0 valores más comunes.</p>
<p><strong>Componentes clave del análisis de frecuencia</strong>:</p>
<ol class="arabic simple">
<li><p><strong>Frecuencia Absoluta o conteo</strong>: El número de veces que un valor o categoría específico aparece en el conjunto de datos.</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># conteo</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;loan_status&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span> 
</pre></div>
</div>
</div>
</div>
<ol class="arabic simple" start="2">
<li><p><strong>Frecuencia Relativa o proporciones</strong>: Es la proporción o porcentaje de veces que ocurre un valor o categoría en relación con el total de observaciones.</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Proporciones</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;loan_status&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Veamos otra variable categórica</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Descriptivo de una sola variable categórica solo conteo</span>
<span class="n">conteo</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;grade&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">conteo</span><span class="p">)</span>

<span class="c1"># Descriptivo de una sola variable categórica solo proporcion</span>
<span class="n">proporciones</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;grade&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">proporciones</span><span class="p">)</span>

<span class="c1"># Combinar los resultados en un solo DataFrame</span>
<span class="n">resultado</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;Conteo&#39;</span><span class="p">:</span> <span class="n">conteo</span><span class="p">,</span>
    <span class="s1">&#39;Proporción&#39;</span><span class="p">:</span> <span class="n">proporciones</span>
<span class="p">})</span>

<span class="c1"># imprimir</span>
<span class="nb">print</span><span class="p">(</span><span class="n">resultado</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>grade
B    11697
A     9694
C     7938
D     5213
E     2811
F     1035
G      317
Name: count, dtype: int64
grade
B    0.302209
A    0.250459
C    0.205090
D    0.134685
E    0.072626
F    0.026741
G    0.008190
Name: proportion, dtype: float64
       Conteo  Proporción
grade                    
B       11697    0.302209
A        9694    0.250459
C        7938    0.205090
D        5213    0.134685
E        2811    0.072626
F        1035    0.026741
G         317    0.008190
</pre></div>
</div>
</div>
</div>
<p>Si nuestra variable es <em>numérica</em>.</p>
</section>
<section id="medidas-de-tendencia-central">
<h4><strong>Medidas de tendencia central</strong><a class="headerlink" href="#medidas-de-tendencia-central" title="Permalink to this heading">#</a></h4>
<ul class="simple">
<li><p><strong>Media aritmética o promedio</strong>: Para un conjunto de <span class="math notranslate nohighlight">\(n\)</span> valores <span class="math notranslate nohighlight">\(x_{1},x_{2},\dots,x_{n}\)</span> que representan una muestra, la</p></li>
</ul>
<div class="math notranslate nohighlight">
\[
\bar{x}=\frac{1}{n}\sum_{i=1}^{n}x_{i}=\frac{1}{n}(x_{1}+x_{2}+\cdots+x_{n})
\]</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;annual_inc&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p><strong>Mediana</strong>:	Se denotará como <span class="math notranslate nohighlight">\(\tilde{x}\)</span> para la muestra. Para un
conjunto de valores ordenados se tiene:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}
\tilde{x}=\begin{cases}
x_{\frac{n+1}{2}}, &amp; \text{si }  n  \text{ es impar}\\
\frac{x_{\frac{n}{2}}+x_{\frac{n}{2}+1}}{2}, &amp; \text{si } n  \text{ es par}
\end{cases}
\end{split}\]</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;annual_inc&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p><strong>Moda</strong>: Se denotapor <span class="math notranslate nohighlight">\(\hat{x}\)</span>, es el dato u observación que más se repite. Los conjuntos pueden ser unimodales, bimodales o multimodales. Se puede calcular para datos cualitativos y cuantitativos.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Calcula la moda y su frecuencia</span>
<span class="n">mode_value</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;annual_inc&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mode</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">freq</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;annual_inc&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()[</span><span class="n">mode_value</span><span class="p">]</span>

<span class="c1"># Imprime la moda y la frecuencia</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Moda: &quot;</span><span class="p">,</span> <span class="n">mode_value</span><span class="p">,</span> <span class="s2">&quot; Frecuencia: &quot;</span><span class="p">,</span> <span class="n">freq</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Moda:  60000.0  Frecuencia:  1474
</pre></div>
</div>
</div>
</div>
<div class="note admonition">
<p class="admonition-title"><strong>Ventajas</strong></p>
<ul class="simple">
<li><p>La media siempre se puede calcular.</p></li>
<li><p>La mediana no se afecta por valores extremos</p></li>
<li><p>La moda no se afecta por valores extremos. Única medida de tendencia central para datos categóricos.</p></li>
</ul>
</div>
<div class="warning admonition">
<p class="admonition-title"><strong>Desventajas</strong></p>
<ul class="simple">
<li><p>La media se ve afectada por valores extremos</p></li>
<li><p>Cuando la cantidad de datos es mucha, no es fácilmente de forma manual calcular la mediana.</p></li>
<li><p>No siempre hay moda. A veces puede existir, pero no ser única.</p></li>
</ul>
</div>
</section>
<section id="medidas-de-dispersion">
<h4><strong>Medidas de dispersión</strong><a class="headerlink" href="#medidas-de-dispersion" title="Permalink to this heading">#</a></h4>
<ul class="simple">
<li><p>La <strong>varianza</strong> <span class="math notranslate nohighlight">\(s^2\)</span> de una muestra con valores <span class="math notranslate nohighlight">\(x_1,\ldots,x_n\)</span> se define por</p></li>
</ul>
<div class="math notranslate nohighlight">
\[
s^2 = \frac{(x_1 - \overline{x})^2+\cdots+(x_n - \overline{x})^2}{n-1},
\]</div>
<p>donde <span class="math notranslate nohighlight">\(\overline{x}\)</span> es la media de <span class="math notranslate nohighlight">\(x_1,\ldots,x_n\)</span>.</p>
<ul class="simple">
<li><p>La <strong>desviación estándar</strong> <span class="math notranslate nohighlight">\(s\)</span> muestral de un conjunto de datos
<span class="math notranslate nohighlight">\(x_1,\ldots,x_n\)</span> se define por</p></li>
</ul>
<div class="math notranslate nohighlight">
\[
s = \sqrt{s^2}.
\]</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;annual_inc&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>64222.95377876642
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p><strong>coeficiente de variación de Pearson</strong> <span class="math notranslate nohighlight">\(CV\)</span> de un conjunto de datos se define por</p></li>
</ul>
<div class="math notranslate nohighlight">
\[
CV = \left( \frac{s}{\overline{x}}  \right)*100\%,
\]</div>
<p>donde <span class="math notranslate nohighlight">\(s\)</span> y <span class="math notranslate nohighlight">\(\overline{x}\)</span> son la desviación estándar de los datos y la media aritmética de los datos,
respectivamente.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Calcular la media y la desviación estándar</span>
<span class="n">media</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;annual_inc&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">desviacion_estandar</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;annual_inc&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>

<span class="c1"># Calcular el coeficiente de variación (CV)</span>
<span class="n">cv</span> <span class="o">=</span> <span class="p">(</span><span class="n">desviacion_estandar</span> <span class="o">/</span> <span class="n">media</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;El coeficiente de variación es: </span><span class="si">{</span><span class="n">cv</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="medidas-de-posicion">
<h4><strong>Medidas de posición</strong><a class="headerlink" href="#medidas-de-posicion" title="Permalink to this heading">#</a></h4>
<p>El <strong><span class="math notranslate nohighlight">\(p\)</span>-ésimo (punto) percentil</strong> es un valor tal que a lo más un <span class="math notranslate nohighlight">\(p\%\)</span> de los datos tienen dicho valor o menos.</p>
<p>Los <strong>cuartiles</strong> son las medidas de posición relativa correspondientes a un conjunto de datos divididos en cuatro partes iguales. Se definen así:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(Q_{1}\)</span>: Primer cuartil (25-ésimo percentil)</p></li>
<li><p><span class="math notranslate nohighlight">\(Q_{2}\)</span>: Segundo cuartil (50-ésimo percentil o <em>mediana</em>)</p></li>
<li><p><span class="math notranslate nohighlight">\(Q_{3}\)</span>: Tercer cuartil (75-ésimo percentil)</p></li>
</ul>
<p>El proceso para calcular un cuartil es:</p>
<ol class="arabic">
<li><p><strong>Ordenar</strong> los <span class="math notranslate nohighlight">\(n\)</span> datos de menor a mayor.</p></li>
<li><p><strong>Calcular un índice <span class="math notranslate nohighlight">\(i\)</span></strong> a través de la fórmula:</p>
<div class="math notranslate nohighlight">
\[
   i = \frac{n \cdot k}{4}
   \]</div>
<p>siendo <span class="math notranslate nohighlight">\(n\)</span> la cantidad de datos y <span class="math notranslate nohighlight">\(k = 1, 2, 3\)</span>.</p>
</li>
<li><p>El cálculo del <span class="math notranslate nohighlight">\(k\)</span>-ésimo cuartil depende de si <span class="math notranslate nohighlight">\(i\)</span> es entero o no:</p>
<ul class="simple">
<li><p><strong>Si <span class="math notranslate nohighlight">\(i\)</span> no es entero</strong>: Se redondea al entero siguiente. Esta aproximación indica la <strong>posición</strong> del <span class="math notranslate nohighlight">\(k\)</span>-ésimo cuartil.</p></li>
<li><p><strong>Si <span class="math notranslate nohighlight">\(i\)</span> es entero</strong>: El <span class="math notranslate nohighlight">\(k\)</span>-ésimo cuartil es el promedio de los valores de los datos ubicados en las <strong>posiciones</strong> <span class="math notranslate nohighlight">\(i\)</span> y <span class="math notranslate nohighlight">\(i+1\)</span>.</p></li>
</ul>
</li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Calcular los cuartiles</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;annual_inc&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.25</span><span class="p">)</span>
<span class="n">q2</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;annual_inc&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.50</span><span class="p">)</span>  <span class="c1"># Este es la mediana</span>
<span class="n">q3</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;annual_inc&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.75</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Primer cuartil (Q1): </span><span class="si">{</span><span class="n">q1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Segundo cuartil (Q2 o Mediana): </span><span class="si">{</span><span class="n">q2</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tercer cuartil (Q3): </span><span class="si">{</span><span class="n">q3</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Primer cuartil (Q1): 41496.0
Segundo cuartil (Q2 o Mediana): 60000.0
Tercer cuartil (Q3): 83200.0
</pre></div>
</div>
</div>
</div>
<p>Una distribución es <strong>simétrica</strong> cuando la moda, la mediana y la media son aproximadamente iguales. En términos más coloquiales, las mitades izquierda y derecha de la distribución se ven idénticas, y ambas mitades comienzan con picos altos y se desvanecen a medida que uno se mueve hacia las “colas”.</p>
<p><img alt="distribución" src="_images/6sigma.png" /></p>
<p>Una distribución tiene sesgo a la derecha - Sesgo positivo si la “cola” a la derecha de la media es más larga que la de la izquierda. De la misma manera, una distribución tiene sesgo a la izquierda - Sesgo negativo si la “cola” a la izquierda de la media es más larga que la de la derecha. Estos son ejemplos de distribuciones asimétricas.</p>
<p><img alt="sesgo" src="_images/skewness.png" /></p>
<p><img alt="pearson" src="_images/pearson.jpg" /></p>
<p>Las distribuciones asimétricas suelen ser problemáticas, ya que la mayoría de los métodos estadísticos están desarrollados para distribuciones normales, que son simétricas. Para superar estos problemas, generalmente se realizan transformaciones en los datos para que se asemejen más a una distribución normal. Esto se discutirá con mayor profundidad más adelante.</p>
<p>El coeficiente de asimetría (skewness) se calcula con la siguiente fórmula:</p>
<div class="math notranslate nohighlight">
\[
\text{Skewness} = \frac{n}{(n-1)(n-2)} \sum \left(\frac{x_i - \bar{x}}{s}\right)^3
\]</div>
<p>donde:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\( n \)</span> es el número de observaciones.</p></li>
<li><p><span class="math notranslate nohighlight">\(x_i \)</span> es el valor individual.</p></li>
<li><p><span class="math notranslate nohighlight">\(\bar{x}\)</span> es la media de los valores.</p></li>
<li><p><span class="math notranslate nohighlight">\( s\)</span> es la desviación estándar.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">skew</span>
<span class="n">skewness</span> <span class="o">=</span> <span class="n">skew</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;annual_inc&#39;</span><span class="p">])</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Coeficiente de asimetría: </span><span class="si">{</span><span class="n">skewness</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Coeficiente de asimetría: 31.072660663606374
</pre></div>
</div>
</div>
</div>
<p>Un coeficiente de asimetría de <span class="math notranslate nohighlight">\(31.07\)</span> es extremadamente alto y sugiere que la distribución de los datos en la columna annual_inc tiene una asimetría significativa hacia la derecha (sesgo positivo). Esto significa que la mayoría de los datos están concentrados en el lado izquierdo de la distribución, con una cola larga hacia la derecha.</p>
<p>Otra medida es la <strong>curtosis</strong>:</p>
<p>Curtosis en exceso se define generalmente como curt – 3, una medida de la “puntiagudez” de la distribución de probabilidad de una variable aleatoria con valores reales.</p>
<p>La curtosis en exceso para una distribución normal es 0 (es decir, 3 - 3 = 0).
Un exceso negativo implica colas más ligeras que una distribución normal.
Un exceso positivo implica colas más pesadas que una distribución normal.</p>
<p><img alt="kurtosis" src="_images/kurtosis.png" /></p>
<p><img alt="kurtosis1" src="_images/kurtosis1.png" /></p>
<p>La curtosis (kurtosis) se calcula con la siguiente fórmula:</p>
<div class="math notranslate nohighlight">
\[
\text{Curtosis} = \frac{n(n+1)}{(n-1)(n-2)(n-3)} \sum \left(\frac{x_i - \bar{x}}{s}\right)^4 - \frac{3(n-1)^2}{(n-2)(n-3)}
\]</div>
<p>donde:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(n\)</span> es el número de observaciones.</p></li>
<li><p><span class="math notranslate nohighlight">\(x_i\)</span> es el valor individual.</p></li>
<li><p><span class="math notranslate nohighlight">\(\bar{x}\)</span> es la media de los valores.</p></li>
<li><p><span class="math notranslate nohighlight">\(s\)</span> es la desviación estándar.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">kurtosis</span>

<span class="c1"># Calcular la curtosis</span>
<span class="n">curtosis</span> <span class="o">=</span> <span class="n">kurtosis</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;annual_inc&#39;</span><span class="p">],</span> <span class="n">fisher</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Imprimir el resultado</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Curtosis en exceso: </span><span class="si">{</span><span class="n">curtosis</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Curtosis en exceso: 2298.548701935856
</pre></div>
</div>
</div>
</div>
<p>Un valor de <span class="math notranslate nohighlight">\(2298.55\)</span> para la curtosis en exceso es extremadamente alto. Esto indica que la distribución de los datos en la columna annual_inc es muy puntiaguda y tiene colas muy pesadas en comparación con una distribución normal.</p>
<ul class="simple">
<li><p>El <strong>rango intercuartil</strong>, <span class="math notranslate nohighlight">\(RI\)</span>, es la distancia entre el primer y el tercer cuartil:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[RI = Q_3 - Q_1\]</div>
<ul class="simple">
<li><p><strong>Valor atípico</strong>: Todo valor que está a más de <span class="math notranslate nohighlight">\(1.5RI\)</span> de distancia del cuartil más cercano se dice que es
atípico.Todo datos que se salga de este intervalo <span class="math notranslate nohighlight">\((Q_1-1.5RI,Q_3+1.5RI)\)</span> es un valor atípico.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;annual_inc&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Gráfico de Cajas y Bigotes de annual_inc&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;annual_inc&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Mostrar el gráfico</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/0600353e9fe8623f75778e45b007a67c303336ebe92e7b4b12d08c0bddf91e4c.png" src="_images/0600353e9fe8623f75778e45b007a67c303336ebe92e7b4b12d08c0bddf91e4c.png" />
</div>
</div>
<p>Realicemos todo en una sola celda</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># importar</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">skew</span><span class="p">,</span> <span class="n">kurtosis</span>

<span class="c1"># Agregaciones estándar con pandas</span>
<span class="n">resumen</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;annual_inc&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span>
    <span class="s1">&#39;Promedio&#39;</span><span class="p">:</span> <span class="s1">&#39;mean&#39;</span><span class="p">,</span>                       <span class="c1"># Media</span>
    <span class="s1">&#39;Desviacion_Estandar&#39;</span><span class="p">:</span> <span class="s1">&#39;std&#39;</span><span class="p">,</span>             <span class="c1"># Desviación Estándar</span>
    <span class="s1">&#39;Minimo&#39;</span><span class="p">:</span> <span class="s1">&#39;min&#39;</span><span class="p">,</span>                          <span class="c1"># Mínimo</span>
    <span class="s1">&#39;Maximo&#39;</span><span class="p">:</span> <span class="s1">&#39;max&#39;</span><span class="p">,</span>                          <span class="c1"># Máximo</span>
    <span class="s1">&#39;Mediana&#39;</span><span class="p">:</span> <span class="s1">&#39;median&#39;</span><span class="p">,</span>                      <span class="c1"># Mediana</span>
    <span class="s1">&#39;Cuantil 1&#39;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.25</span><span class="p">),</span>  <span class="c1"># Cuantil 25%</span>
    <span class="s1">&#39;Cuantil 3&#39;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.75</span><span class="p">)</span>   <span class="c1"># Cuantil 75%</span>
<span class="p">})</span>

<span class="c1"># Agregar funciones personalizadas</span>
<span class="n">resumen</span><span class="p">[</span><span class="s1">&#39;Asimetría&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">skew</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;annual_inc&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">())</span>
<span class="n">resumen</span><span class="p">[</span><span class="s1">&#39;Curtosis&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kurtosis</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;annual_inc&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">())</span>

<span class="c1"># Mostrar el resultado</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">resumen</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>                       annual_inc
Promedio             6.961750e+04
Desviacion_Estandar  6.422378e+04
Minimo               4.000000e+03
Maximo               6.000000e+06
Mediana              6.000000e+04
Cuantil 1            4.149600e+04
Cuantil 3            8.320000e+04
Asimetría            3.107266e+01
Curtosis             2.298549e+03
</pre></div>
</div>
</div>
</div>
<p>La biblioteca <code class="docutils literal notranslate"><span class="pre">ydata-profiling</span></code> es la evolución de lo que anteriormente se conocía como <code class="docutils literal notranslate"><span class="pre">pandas_profiling</span></code>. Es una herramienta que genera <strong>perfiles exploratorios detallados de los datos</strong> en un DataFrame de pandas de forma automática, facilitando el <strong>análisis inicial de los datos</strong> con resúmenes estadísticos, gráficos y observaciones.</p>
<div class="note admonition">
<p class="admonition-title"><strong>Características principales</strong></p>
<ul class="simple">
<li><p><strong>Resúmenes de variables</strong>: Te proporciona un resumen de cada columna, incluyendo estadísticas clave como media
mediana, varianza, y distribuciones.</p></li>
<li><p><strong>Valores faltantes</strong>: Identifica la cantidad de valores faltantes por columna y su distribución.</p></li>
<li><p><strong>Correlaciones</strong>: Presenta una matriz de correlaciones entre variables numéricas.</p></li>
<li><p><strong>Interacciones</strong>: Muestra relaciones significativas entre dos variables.</p></li>
<li><p><strong>Distribuciones</strong>: Genera histogramas y gráficos de densidad para las variables numéricas y categóricas.</p></li>
<li><p><strong>Alertas</strong>: Te notifica sobre datos problemáticos como valores altamente correlacionados, duplicados o valores constantes.</p></li>
</ul>
</div>
<p>Con esta herramienta, puedes automatizar gran parte del análisis exploratorio de datos (EDA) y obtener insights rápidos sobre tus datos.</p>
<p>Para usar <code class="docutils literal notranslate"><span class="pre">ydata_profiling</span></code>, primero necesitas instalarlo.</p>
<p>Luego, en tu script de Python, puedes usarlo de esta manera:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">ydata_profiling</span> <span class="kn">import</span> <span class="n">ProfileReport</span>

<span class="c1"># Generar informe de perfilado</span>
<span class="n">profile</span> <span class="o">=</span> <span class="n">ProfileReport</span><span class="p">(</span>
    <span class="n">df</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Profiling Report&quot;</span><span class="p">,</span>
    <span class="n">explorative</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># Modo explorativo para incluir más visualizaciones</span>
    <span class="n">correlations</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;pearson&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;calculate&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
        <span class="s2">&quot;spearman&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;calculate&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
        <span class="s2">&quot;kendall&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;calculate&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">},</span>
        <span class="s2">&quot;phi_k&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;calculate&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">},</span>
        <span class="s2">&quot;cramers&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;calculate&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">},</span>
    <span class="p">},</span>
    <span class="n">plot</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;histogram&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;bins&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">},</span>  <span class="c1"># Ajustar número de bins para histogramas</span>
        <span class="s2">&quot;scatter_threshold&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>  <span class="c1"># Limitar número de puntos en scatter plots</span>
        <span class="s2">&quot;boxplot&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;enabled&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>  <span class="c1"># Asegurarse de que los boxplots estén habilitados</span>
    <span class="p">},</span>
    <span class="n">missing_diagrams</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;heatmap&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>  <span class="c1"># Incluye heatmap de valores faltantes</span>
        <span class="s2">&quot;dendrogram&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>  <span class="c1"># Incluye dendrograma de valores faltantes</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">profile</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="s1">&#39;_image/dashboard.html&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Summarize dataset: 100%|██████████| 30/30 [00:02&lt;00:00, 14.22it/s, Completed]                           
Generate report structure: 100%|██████████| 1/1 [00:02&lt;00:00,  2.52s/it]
Render HTML: 100%|██████████| 1/1 [00:00&lt;00:00,  1.60it/s]
Export report to file: 100%|██████████| 1/1 [00:00&lt;?, ?it/s]
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="distribuciones">
<h3><strong>Distribuciones</strong><a class="headerlink" href="#distribuciones" title="Permalink to this heading">#</a></h3>
<p>Un <strong>histograma</strong> muestra la frecuencia de ocurrencias de datos en un gráfico de barras. Más específicamente, indica con qué frecuencia ocurre cada valor distinto en el conjunto de datos. El eje horizontal representa los valores del conjunto de datos y el eje vertical representa el número de veces que ocurren esos valores.</p>
<p>Un histograma es un ejemplo específico de una <strong>distribución</strong>.</p>
<p>Las <strong>distribuciones continuas</strong> permiten que <em>los datos tomen un número infinito de valores posibles</em>. Algunos ejemplos incluyen:</p>
<ul class="simple">
<li><p>Normal</p></li>
<li><p>Gamma</p></li>
<li><p><span class="math notranslate nohighlight">\(\chi\)</span>-cuadrada</p></li>
<li><p><span class="math notranslate nohighlight">\(t\)</span> de Student</p></li>
<li><p>etc.</p></li>
</ul>
<p>Por otro lado, las <strong>distribuciones discretas</strong> son aquellas en las que <em>los datos solo pueden ser uno de un conjunto finito de valores</em>. Los histogramas son distribuciones discretas porque los valores posibles deben provenir directamente del conjunto de datos del que se crean, que por definición debe ser un conjunto finito. Otros ejemplos de distribuciones discretas incluyen:</p>
<ul class="simple">
<li><p>Poisson</p></li>
<li><p>Binomial</p></li>
<li><p>Hipergeométrica</p></li>
<li><p>Bernoulli</p></li>
<li><p>etc.</p></li>
</ul>
<p><img alt="Distribuciones" src="_images/Distributions.png" /></p>
<p>Más información sobre distribuciones <a class="reference external" href="https://github.com/rasmusab/distribution_diagrams">aquí</a></p>
<section id="distribucion-normal">
<h4><strong>Distribución normal</strong><a class="headerlink" href="#distribucion-normal" title="Permalink to this heading">#</a></h4>
<p>La <strong>distribución normal</strong> es una de las distribuciones más importantes, ya que es la que con mayor frecuencia aproxima fenómenos del mundo real. Tiene una forma “campana” y es simétrica:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span> <span class="c1"># importando matplotlib</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span> <span class="c1"># importando seaborn</span>

<span class="c1"># parametros esteticos de seaborn</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set_palette</span><span class="p">(</span><span class="s2">&quot;deep&quot;</span><span class="p">,</span> <span class="n">desat</span><span class="o">=</span><span class="mf">.6</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">rc</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;figure.figsize&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">)})</span>

<span class="n">mu</span><span class="p">,</span> <span class="n">sigma</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.1</span> <span class="c1"># promedio y desviación estandar</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">mu</span><span class="p">,</span> <span class="n">sigma</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span> <span class="c1"># creacion de datos N(mu,sd)</span>

<span class="c1"># histograma</span>
<span class="n">count</span><span class="p">,</span> <span class="n">box</span><span class="p">,</span> <span class="n">omit</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="n">density</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">normal</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">box</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">sigma</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">))</span> <span class="o">*</span>
         <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span> <span class="o">-</span> <span class="p">(</span><span class="n">box</span> <span class="o">-</span> <span class="n">mu</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">sigma</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="p">),</span>
         <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/e53c80b6fef1c83a041b99cd210150d8fc9a50664a1715b4707a3c57423c49d9.png" src="_images/e53c80b6fef1c83a041b99cd210150d8fc9a50664a1715b4707a3c57423c49d9.png" />
</div>
</div>
</section>
<section id="distribucion-gamma">
<h4><strong>Distribución Gamma</strong><a class="headerlink" href="#distribucion-gamma" title="Permalink to this heading">#</a></h4>
<p>La distribución Gamma es una distribución continua que se utiliza frecuentemente para modelar tiempos de espera o eventos que ocurren de manera continua y aleatoria. Esta distribución es asimétrica y, a diferencia de la distribución normal, puede tomar diferentes formas dependiendo de los parámetros que se utilicen.</p>
<p>Es comúnmente usada en el análisis de la vida de productos, modelos de riesgo, y en muchos otros contextos donde se desea modelar el tiempo entre eventos.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">scipy.stats</span> <span class="k">as</span> <span class="nn">stats</span>  <span class="c1"># importando scipy.stats para la gamma</span>

<span class="c1"># parámetros estéticos de seaborn</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set_palette</span><span class="p">(</span><span class="s2">&quot;deep&quot;</span><span class="p">,</span> <span class="n">desat</span><span class="o">=</span><span class="mf">.6</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">rc</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;figure.figsize&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">)})</span>

<span class="c1"># Generación de datos de la distribución Gamma</span>
<span class="n">shape_param</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">gamma</span><span class="p">(</span><span class="n">shape_param</span><span class="p">)</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span><span class="mi">5000</span><span class="p">)</span>  <span class="c1"># gamma(3) con 5000 muestras</span>

<span class="c1"># Histograma</span>
<span class="n">gamma</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="n">histtype</span><span class="o">=</span><span class="s2">&quot;stepfilled&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">.7</span><span class="p">,</span> <span class="n">density</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Crear una curva de densidad (PDF) de la distribución Gamma</span>
<span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">()</span>
<span class="n">x_vals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">pdf_vals</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">gamma</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">x_vals</span><span class="p">,</span> <span class="n">shape_param</span><span class="p">)</span>

<span class="c1"># Graficar la función de densidad</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x_vals</span><span class="p">,</span> <span class="n">pdf_vals</span><span class="p">,</span> <span class="s1">&#39;r-&#39;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># Mostrar el gráfico</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribución Gamma con función de densidad&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Valor&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Densidad&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/06229a8f6af27c7050f3132037cfdca7b701c8ea099d94a08e1f75fb1085e208.png" src="_images/06229a8f6af27c7050f3132037cfdca7b701c8ea099d94a08e1f75fb1085e208.png" />
</div>
</div>
<p>Ahora, usemos los datos son de <em>LendingClub (LC) Statistics</em>, exactamente la variable <code class="docutils literal notranslate"><span class="pre">int_rate</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Importar seaborn</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>

<span class="c1"># Histograma de las ventas semanales con Seaborn</span>
<span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;int_rate&#39;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># kde=True si quieres agregar la densidad</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/e7dd280dde8fa7d4062766274fc877e9cbcc011157edd744cee4839f05445776.png" src="_images/e7dd280dde8fa7d4062766274fc877e9cbcc011157edd744cee4839f05445776.png" />
</div>
</div>
<p>Debemos mirar graficamente que distribución es:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Ajustar distribuciones (Normal, Gamma, Exponencial)</span>
<span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">norm</span><span class="p">,</span> <span class="n">gamma</span><span class="p">,</span> <span class="n">expon</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;int_rate&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

<span class="c1"># Ajuste de distribución normal</span>
<span class="n">params_norm</span> <span class="o">=</span> <span class="n">norm</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">x_norm</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">x</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">pdf_norm</span> <span class="o">=</span> <span class="n">norm</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">x_norm</span><span class="p">,</span> <span class="o">*</span><span class="n">params_norm</span><span class="p">)</span>

<span class="c1"># Ajuste de distribución gamma</span>
<span class="n">params_gamma</span> <span class="o">=</span> <span class="n">gamma</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">pdf_gamma</span> <span class="o">=</span> <span class="n">gamma</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">x_norm</span><span class="p">,</span> <span class="o">*</span><span class="n">params_gamma</span><span class="p">)</span>

<span class="c1"># Ajuste de distribución exponencial</span>
<span class="n">params_expon</span> <span class="o">=</span> <span class="n">expon</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">pdf_expon</span> <span class="o">=</span> <span class="n">expon</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">x_norm</span><span class="p">,</span> <span class="o">*</span><span class="n">params_expon</span><span class="p">)</span>

<span class="c1"># Graficar histogramas con distribuciones ajustadas</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;skyblue&#39;</span><span class="p">,</span> <span class="n">stat</span><span class="o">=</span><span class="s1">&#39;density&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Data Histogram&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x_norm</span><span class="p">,</span> <span class="n">pdf_norm</span><span class="p">,</span> <span class="s1">&#39;r-&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Normal Distribution Fit&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x_norm</span><span class="p">,</span> <span class="n">pdf_gamma</span><span class="p">,</span> <span class="s1">&#39;g-&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Gamma Distribution Fit&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x_norm</span><span class="p">,</span> <span class="n">pdf_expon</span><span class="p">,</span> <span class="s1">&#39;b-&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Exponential Distribution Fit&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Interest Rate (%)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Density&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribution Fitting for Interest Rates&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/a2ebcd7344ac7f4862215faca417c5e31a2e814d0adc6593c5d0f5fdf83b5028.png" src="_images/a2ebcd7344ac7f4862215faca417c5e31a2e814d0adc6593c5d0f5fdf83b5028.png" />
</div>
</div>
<p>Ahora, realizaremos una prueba no paramétrica para ver si sigue o no una distribución normal.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">kstest</span><span class="p">,</span> <span class="n">shapiro</span><span class="p">,</span> <span class="n">anderson</span>
<span class="kn">from</span> <span class="nn">statsmodels.stats.diagnostic</span> <span class="kn">import</span> <span class="n">lilliefors</span>

<span class="c1"># Prueba de Kolmogorov-Smirnov para la distribución Normal</span>
<span class="n">ks_norm</span> <span class="o">=</span> <span class="n">kstest</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;norm&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">params_norm</span><span class="p">)</span>

<span class="c1"># Prueba de Lilliefors (similar al KS test pero ajustado para normalidad)</span>
<span class="n">lillie_result</span> <span class="o">=</span> <span class="n">lilliefors</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">dist</span><span class="o">=</span><span class="s1">&#39;norm&#39;</span><span class="p">)</span>

<span class="c1"># Prueba de Shapiro-Wilk para normalidad</span>
<span class="n">shapiro_result</span> <span class="o">=</span> <span class="n">shapiro</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="c1"># Prueba de Anderson-Darling para la distribución Normal</span>
<span class="n">anderson_result</span> <span class="o">=</span> <span class="n">anderson</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">dist</span><span class="o">=</span><span class="s1">&#39;norm&#39;</span><span class="p">)</span>

<span class="c1"># Mostrar resultados</span>
<span class="n">ks_norm_result</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Kolmogorov-Smirnov Test (Normal): Statistic=</span><span class="si">{</span><span class="n">ks_norm</span><span class="o">.</span><span class="n">statistic</span><span class="si">}</span><span class="s2">, p-value=</span><span class="si">{</span><span class="n">ks_norm</span><span class="o">.</span><span class="n">pvalue</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="n">lillie_result_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Lilliefors Test (Normal): Statistic=</span><span class="si">{</span><span class="n">lillie_result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">, p-value=</span><span class="si">{</span><span class="n">lillie_result</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="n">shapiro_result_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Shapiro-Wilk Test (Normal): Statistic=</span><span class="si">{</span><span class="n">shapiro_result</span><span class="o">.</span><span class="n">statistic</span><span class="si">}</span><span class="s2">, p-value=</span><span class="si">{</span><span class="n">shapiro_result</span><span class="o">.</span><span class="n">pvalue</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="n">anderson_result_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Anderson-Darling Test (Normal): Statistic=</span><span class="si">{</span><span class="n">anderson_result</span><span class="o">.</span><span class="n">statistic</span><span class="si">}</span><span class="s2">, Critical Values=</span><span class="si">{</span><span class="n">anderson_result</span><span class="o">.</span><span class="n">critical_values</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="p">(</span><span class="n">ks_norm_result</span><span class="p">,</span> <span class="n">lillie_result_text</span><span class="p">,</span> <span class="n">shapiro_result_text</span><span class="p">,</span> <span class="n">anderson_result_text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>c:\Users\cdeor\miniconda3\envs\ml_venv\lib\site-packages\scipy\stats\_morestats.py:1882: UserWarning: p-value may not be accurate for N &gt; 5000.
  warnings.warn(&quot;p-value may not be accurate for N &gt; 5000.&quot;)
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(&#39;Kolmogorov-Smirnov Test (Normal): Statistic=0.06644862202022367, p-value=4.963707453536677e-149&#39;,
 &#39;Lilliefors Test (Normal): Statistic=0.06644553802790248, p-value=0.0009999999999998899&#39;,
 &#39;Shapiro-Wilk Test (Normal): Statistic=0.9820662140846252, p-value=0.0&#39;,
 &#39;Anderson-Darling Test (Normal): Statistic=129.76184121534607, Critical Values=[0.576 0.656 0.787 0.918 1.092]&#39;)
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="analisis-bivariado">
<h3><strong>Análisis bivariado</strong><a class="headerlink" href="#analisis-bivariado" title="Permalink to this heading">#</a></h3>
<section id="correlacion">
<h4><strong>Correlación</strong><a class="headerlink" href="#correlacion" title="Permalink to this heading">#</a></h4>
<p>La <strong>correlación</strong> es una medida estadística que describe el grado de relación entre dos variables. Específicamente, indica la fuerza y la dirección de la asociación lineal entre las variables. Los valores de correlación varían entre -1 y 1:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(+1\)</span> indica una correlación positiva perfecta (a medida que una variable aumenta, la otra también lo hace).</p></li>
<li><p><span class="math notranslate nohighlight">\(-1\)</span> indica una correlación negativa perfecta (a medida que una variable aumenta, la otra disminuye).</p></li>
<li><p><span class="math notranslate nohighlight">\(0\)</span> indica que no hay correlación lineal entre las variables.
Fórmula de la correlación de Pearson
La correlación de Pearson (<span class="math notranslate nohighlight">\(𝑟\)</span>r) es la más utilizada cuando las variables son continuas y tienen una relación lineal. Se calcula como:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[
r = \frac{\sum (x_i - \bar{x})(y_i - \bar{y})}{\sqrt{\sum (x_i - \bar{x})^2 \sum (y_i - \bar{y})^2}}
\]</div>
<p>donde:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(x_i\)</span> y <span class="math notranslate nohighlight">\(y_i\)</span> son los valores de las variables <span class="math notranslate nohighlight">\(X\)</span> e <span class="math notranslate nohighlight">\(Y\)</span>,</p></li>
<li><p><span class="math notranslate nohighlight">\(\bar{x}\)</span> y <span class="math notranslate nohighlight">\(\bar{y}\)</span> son las medias de las variables <span class="math notranslate nohighlight">\(X\)</span> e <span class="math notranslate nohighlight">\(Y\)</span></p></li>
</ul>
<div class="note admonition">
<p class="admonition-title"><strong>Características de la correlación</strong></p>
<ul class="simple">
<li><p>Puede ser positiva o negativa.</p></li>
<li><p>El valor absoluto indica la fuerza de la relación (más cercano a 1 indica una relación más fuerte).</p></li>
<li><p>La correlación de Pearson mide solo relaciones lineales.</p></li>
<li><p>Los valores extremos pueden afectar significativamente la correlación.</p></li>
<li><p>La correlación es una medida adimensional, no depende de las unidades de las variables.</p></li>
</ul>
</div>
<p>Las correlaciones que se usan comúnmente son la correlación de Pearson y la Spearman. Cuándo usar cada una.</p>
<ul class="simple">
<li><p><strong>Pearson</strong>: Usar cuando las variables son continuas, tienen una distribución normal, y se espera una relación lineal.</p></li>
<li><p><strong>Spearman</strong>: Usar cuando las variables no son normales, son ordinales o tienen una relación monotónica pero no necesariamente lineal.</p></li>
</ul>
<p>Veamos si las varriables numéricas de LendingClub (LC) Statistics estan correlacionadas:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Importemos</span>
<span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">spearmanr</span>

<span class="c1"># Seleccionemos las variables numéricas</span>
<span class="n">df_num</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;annual_inc&#39;</span><span class="p">,</span><span class="s1">&#39;int_rate&#39;</span><span class="p">,</span><span class="s1">&#39;loan_amnt&#39;</span><span class="p">]]</span>

<span class="c1"># Calcular la correlación de Spearman para cada par de columnas</span>
<span class="n">spearman_corr</span> <span class="o">=</span> <span class="n">df_num</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;spearman&#39;</span><span class="p">)</span>

<span class="c1"># Mostrar la matriz de correlación de Spearman</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Matriz de correlación de Spearman:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">spearman_corr</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Matriz de correlación de Spearman:
            annual_inc  int_rate  loan_amnt
annual_inc    1.000000   0.05583   0.425268
int_rate      0.055830   1.00000   0.253590
loan_amnt     0.425268   0.25359   1.000000
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> inline
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># Crear un heatmap para la matriz de correlación</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">spearman_corr</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;coolwarm&#39;</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;.2f&#39;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Matriz de Correlación de Spearman&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/82559b8dbc49a7543e8d3d1809e523139d8f350974bbc3e4316628e38060dbc8.png" src="_images/82559b8dbc49a7543e8d3d1809e523139d8f350974bbc3e4316628e38060dbc8.png" />
</div>
</div>
</section>
</section>
</section>
<section id="inferencia-estadistica">
<h2><strong>Inferencia estadística</strong><a class="headerlink" href="#inferencia-estadistica" title="Permalink to this heading">#</a></h2>
<section id="pruebas-de-hipotesis">
<h3><strong>Pruebas de hipótesis</strong><a class="headerlink" href="#pruebas-de-hipotesis" title="Permalink to this heading">#</a></h3>
<p><strong>Las pruebas de hipótesis</strong> son un procedimiento esencial en estadística. Una prueba de hipótesis evalúa dos declaraciones mutuamente excluyentes sobre una población para determinar cuál de ellas está mejor respaldada por los datos de la muestra. Cuando decimos que un hallazgo es <em>estadísticamente significativo</em>, es gracias a una prueba de hipótesis.</p>
<p>La primera hipótesis se denomina generalmente <strong>hipótesis nula</strong> y es una declaración general o punto de vista predeterminado que indica que no hay relación entre dos fenómenos medidos o ninguna asociación entre grupos. Se puede considerar como una suposición del statu quo. Por ejemplo, “La producción de la Empresa X es igual a 50 unidades por día”.</p>
<p>La <strong>hipótesis alternativa</strong> es la segunda hipótesis, y se establece en oposición a la hipótesis nula. Por lo general, se toma como la afirmación de que los fenómenos observados en los datos son el resultado de un efecto real y no aleatorio. Por ejemplo, “La producción de la Empresa X no es igual a 50 unidades por día”.</p>
<p><img alt="" src="_images/hypothesis.png" /></p>
<p>Para evaluar estas dos hipótesis, necesitamos indicar un umbral de <strong>nivel de significancia</strong>. Este es el valor que representa la probabilidad de que los resultados observados se deban realmente al azar, suponiendo que la hipótesis nula sea verdadera. Como no podemos probar al 100% que la hipótesis nula es falsa, debemos seleccionar un nivel de significancia que sea pequeño pero diferente de cero. Generalmente, se utiliza el 5% (aunque en teoría se puede establecer cualquier nivel deseado). Así, si la probabilidad calculada de que los resultados observados se deban al azar es inferior al 5%, rechazamos la hipótesis nula y proponemos la hipótesis alternativa; de lo contrario, no lo hacemos.</p>
<p>Hay dos tipos de errores que podemos cometer al hacer esto:</p>
<ol class="arabic simple">
<li><p><strong>Error Tipo I:</strong> Rechazar la hipótesis nula cuando no deberíamos. La probabilidad de cometer un error de Tipo I se denota con <span class="math notranslate nohighlight">\(\alpha\)</span>.</p></li>
<li><p><strong>Error Tipo II:</strong> No rechazar la hipótesis nula cuando deberíamos. La probabilidad de cometer un error de Tipo II se denota con <span class="math notranslate nohighlight">\(\beta\)</span>.</p></li>
</ol>
<p><strong>Veamos el siguiente ejemplo</strong>:</p>
<p>Supongamos que un banco está evaluando si aprobar o rechazar solicitudes de préstamo de clientes. La hipótesis nula (<span class="math notranslate nohighlight">\(H_0\)</span>) es que el cliente no es solvente (es decir, no puede pagar el préstamo). La hipótesis alternativa (<span class="math notranslate nohighlight">\(H_1\)</span>) es que el cliente sí es solvente (puede pagar el préstamo).</p>
<ul class="simple">
<li><p><strong>Error Tipo I (Falso positivo)</strong>
Este error ocurre cuando rechazas la hipótesis nula (<span class="math notranslate nohighlight">\(H_0\)</span>) cuando en realidad es verdadera.</p></li>
</ul>
<p>Entonces si el cliente en realidad no es solvente (no puede pagar el préstamo), pero el banco aprueba el préstamo.
Por consecuencia el banco comete un error tipo I al aprobar un préstamo a alguien que no podrá devolverlo, lo que puede generar pérdidas financieras por incumplimiento de pagos.</p>
<ul class="simple">
<li><p><strong>Error Tipo II (Falso negativo)</strong>
Este error ocurre cuando no rechazas la hipótesis nula (<span class="math notranslate nohighlight">\(H_0\)</span>) cuando en realidad es falsa.</p></li>
</ul>
<p>Entonces si el cliente en realidad es solvente (puede pagar el préstamo), pero el banco rechaza su solicitud.
Por consecuencia el banco comete un error tipo II al perder la oportunidad de otorgar un préstamo a un cliente confiable, lo que implica una pérdida de posibles ingresos por intereses.</p>
<p>En resumen:</p>
<ul class="simple">
<li><p><strong>Error Tipo I</strong>: El banco aprueba un préstamo a un cliente que no es solvente. Riesgo: Pérdida financiera por incumplimiento.</p></li>
<li><p><strong>Error Tipo II</strong>: El banco rechaza un préstamo a un cliente solvente. Riesgo: Pérdida de ingresos por no otorgar un préstamo rentable.</p></li>
</ul>
<p>Finalmente, llegamos al <strong>valor <span class="math notranslate nohighlight">\(p\)</span></strong>, que es nuestra probabilidad calculada de observar los resultados que tenemos, suponiendo que la hipótesis nula sea verdadera. Como se mencionó anteriormente, si este valor está por debajo del nivel de significancia (generalmente 5%), entonces se puede afirmar que se tiene evidencia razonable para rechazar la hipótesis nula. Sin embargo, esto NO implica automáticamente un hallazgo “significativo” o “importante”, eso es algo que se debe decidir al considerar la relevancia del resultado en el mundo real.</p>
<section id="comparacion-de-2-grupos-poblacionales-independientes-parametrica">
<h4><strong>Comparación de 2 grupos poblacionales independientes paramétrica</strong><a class="headerlink" href="#comparacion-de-2-grupos-poblacionales-independientes-parametrica" title="Permalink to this heading">#</a></h4>
<section id="igualdad-de-varianzas">
<h5><strong>Igualdad de varianzas</strong><a class="headerlink" href="#igualdad-de-varianzas" title="Permalink to this heading">#</a></h5>
<p>Importemos el siguiente conjunto de datos <code class="docutils literal notranslate"><span class="pre">data_bancos</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">ks_1samp</span><span class="p">,</span> <span class="n">shapiro</span><span class="p">,</span> <span class="n">bartlett</span><span class="p">,</span> <span class="n">levene</span><span class="p">,</span> <span class="n">fligner</span><span class="p">,</span> <span class="n">ttest_ind</span><span class="p">,</span> <span class="n">norm</span>
<span class="kn">from</span> <span class="nn">statsmodels.graphics.gofplots</span> <span class="kn">import</span> <span class="n">qqplot</span>
<span class="kn">from</span> <span class="nn">statsmodels.stats.weightstats</span> <span class="kn">import</span> <span class="n">DescrStatsW</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Cargar el archivo de Excel</span>
<span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;_data/datadescrip/datos_banca_norm.csv&#39;</span>
<span class="n">df_bank</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

<span class="c1"># Mostrar las primeras filas para entender la estructura</span>
<span class="n">df_bank</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Tipo</th>
      <th>Valor</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>InteresPrestamo</td>
      <td>5.496714</td>
    </tr>
    <tr>
      <th>1</th>
      <td>InteresPrestamo</td>
      <td>4.861736</td>
    </tr>
    <tr>
      <th>2</th>
      <td>InteresPrestamo</td>
      <td>5.647689</td>
    </tr>
    <tr>
      <th>3</th>
      <td>InteresPrestamo</td>
      <td>6.523030</td>
    </tr>
    <tr>
      <th>4</th>
      <td>InteresPrestamo</td>
      <td>4.765847</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_bank</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 200 entries, 0 to 199
Data columns (total 2 columns):
 #   Column  Non-Null Count  Dtype  
---  ------  --------------  -----  
 0   Tipo    200 non-null    object 
 1   Valor   200 non-null    float64
dtypes: float64(1), object(1)
memory usage: 3.2+ KB
</pre></div>
</div>
</div>
</div>
<p>Realicemos un diagrama de cajas y bigotes</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Generar diagrama de cajas y bigotes para los datos de df_bank</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;Tipo&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;Valor&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df_bank</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Diagrama de Cajas y Bigotes para Interés de Préstamo y Depósito&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Tipo de Interés&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Valor&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/9fd906e767f23aff3c009946fe8b55bd967e1899f037d8423ca7b7d4fe3dcee5.png" src="_images/9fd906e767f23aff3c009946fe8b55bd967e1899f037d8423ca7b7d4fe3dcee5.png" />
</div>
</div>
<ul class="simple">
<li><p>Probemos el primer supuesto. Los datos deben tener comportamiento de una distribución normal.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Separar los datos por tipo de interés</span>
<span class="n">interes_prestamo</span> <span class="o">=</span> <span class="n">df_bank</span><span class="p">[</span><span class="n">df_bank</span><span class="p">[</span><span class="s1">&#39;Tipo&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;InteresPrestamo&#39;</span><span class="p">][</span><span class="s1">&#39;Valor&#39;</span><span class="p">]</span>
<span class="n">interes_deposito</span> <span class="o">=</span> <span class="n">df_bank</span><span class="p">[</span><span class="n">df_bank</span><span class="p">[</span><span class="s1">&#39;Tipo&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;InteresDeposito&#39;</span><span class="p">][</span><span class="s1">&#39;Valor&#39;</span><span class="p">]</span>

<span class="c1"># Normalidad: Prueba de Kolmogorov-Smirnov </span>
<span class="n">ks_prestamo</span> <span class="o">=</span> <span class="n">ks_1samp</span><span class="p">((</span><span class="n">interes_prestamo</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">interes_prestamo</span><span class="p">))</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">interes_prestamo</span><span class="p">),</span> <span class="n">cdf</span><span class="o">=</span><span class="n">norm</span><span class="o">.</span><span class="n">cdf</span><span class="p">)</span>
<span class="n">ks_deposito</span> <span class="o">=</span> <span class="n">ks_1samp</span><span class="p">((</span><span class="n">interes_deposito</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">interes_deposito</span><span class="p">))</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">interes_deposito</span><span class="p">),</span> <span class="n">cdf</span><span class="o">=</span><span class="n">norm</span><span class="o">.</span><span class="n">cdf</span><span class="p">)</span>

<span class="c1"># Normalidad: Prueba de Shapiro-Wilk</span>
<span class="n">shapiro_prestamo</span> <span class="o">=</span> <span class="n">shapiro</span><span class="p">(</span><span class="n">interes_prestamo</span><span class="p">)</span>
<span class="n">shapiro_deposito</span> <span class="o">=</span> <span class="n">shapiro</span><span class="p">(</span><span class="n">interes_deposito</span><span class="p">)</span>

<span class="c1"># Mostrar resultados de normalidad</span>
<span class="n">normalidad_resultados_banca</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;Prueba&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Kolmogorov-Smirnov&#39;</span><span class="p">,</span> <span class="s1">&#39;Kolmogorov-Smirnov&#39;</span><span class="p">,</span> <span class="s1">&#39;Shapiro-Wilk&#39;</span><span class="p">,</span> <span class="s1">&#39;Shapiro-Wilk&#39;</span><span class="p">],</span>
    <span class="s1">&#39;Interés&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Préstamo&#39;</span><span class="p">,</span> <span class="s1">&#39;Depósito&#39;</span><span class="p">,</span> <span class="s1">&#39;Préstamo&#39;</span><span class="p">,</span> <span class="s1">&#39;Depósito&#39;</span><span class="p">],</span>
    <span class="s1">&#39;Estadístico&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">ks_prestamo</span><span class="o">.</span><span class="n">statistic</span><span class="p">,</span> <span class="n">ks_deposito</span><span class="o">.</span><span class="n">statistic</span><span class="p">,</span> <span class="n">shapiro_prestamo</span><span class="o">.</span><span class="n">statistic</span><span class="p">,</span> <span class="n">shapiro_deposito</span><span class="o">.</span><span class="n">statistic</span><span class="p">],</span>
    <span class="s1">&#39;p-valor&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">ks_prestamo</span><span class="o">.</span><span class="n">pvalue</span><span class="p">,</span> <span class="n">ks_deposito</span><span class="o">.</span><span class="n">pvalue</span><span class="p">,</span> <span class="n">shapiro_prestamo</span><span class="o">.</span><span class="n">pvalue</span><span class="p">,</span> <span class="n">shapiro_deposito</span><span class="o">.</span><span class="n">pvalue</span><span class="p">]</span>
<span class="p">}</span>

<span class="c1"># Convertir a DataFrame para visualizar</span>
<span class="n">normalidad_df_banca</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">normalidad_resultados_banca</span><span class="p">)</span>
<span class="n">normalidad_df_banca</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Prueba</th>
      <th>Interés</th>
      <th>Estadístico</th>
      <th>p-valor</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Kolmogorov-Smirnov</td>
      <td>Préstamo</td>
      <td>0.050829</td>
      <td>0.946707</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Kolmogorov-Smirnov</td>
      <td>Depósito</td>
      <td>0.073276</td>
      <td>0.629350</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Shapiro-Wilk</td>
      <td>Préstamo</td>
      <td>0.989883</td>
      <td>0.655152</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Shapiro-Wilk</td>
      <td>Depósito</td>
      <td>0.977534</td>
      <td>0.085255</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Miremos la grafica QQ-Plot:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Gráfica de QQ-plot para Interés de Préstamo</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">qqplot</span><span class="p">(</span><span class="n">interes_prestamo</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">())</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;QQ-Plot para Interés de Préstamo&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Cuantiles Teóricos&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Cuantiles de la Muestra&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># Gráfica de QQ-plot para Interés de Depósito</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">qqplot</span><span class="p">(</span><span class="n">interes_deposito</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">())</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;QQ-Plot para Interés de Depósito&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Cuantiles Teóricos&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Cuantiles de la Muestra&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/772258f5e2fd13d891b13c20ef301cf0739b2eaeb1692281c6692fdfbb02bb10.png" src="_images/772258f5e2fd13d891b13c20ef301cf0739b2eaeb1692281c6692fdfbb02bb10.png" />
<img alt="_images/1ddf956639d4bb5efc834c238cdf074cc959b96d20960cc43cf0a53e40af9a72.png" src="_images/1ddf956639d4bb5efc834c238cdf074cc959b96d20960cc43cf0a53e40af9a72.png" />
</div>
</div>
<ul class="simple">
<li><p>Probemos el 2do supuesto, que es la igualdad de varianza o la homocedasticidad</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Preparación de los datos para pruebas de igualdad de varianzas para df_bank</span>
<span class="n">data_gather_banca</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;Grupo&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;InteresPrestamo&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">interes_prestamo</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;InteresDeposito&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">interes_deposito</span><span class="p">),</span>
    <span class="s1">&#39;Valor&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span><span class="n">interes_prestamo</span><span class="p">,</span> <span class="n">interes_deposito</span><span class="p">])</span>
<span class="p">})</span>

<span class="c1"># Prueba de Bartlett</span>
<span class="n">bartlett_test_banca</span> <span class="o">=</span> <span class="n">bartlett</span><span class="p">(</span><span class="n">interes_prestamo</span><span class="p">,</span> <span class="n">interes_deposito</span><span class="p">)</span>

<span class="c1"># Mostrar resultados de las pruebas de igualdad de varianza</span>
<span class="n">igualdad_varianzas_resultados_banca</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;Prueba&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Bartlett&#39;</span><span class="p">],</span>
    <span class="s1">&#39;Estadístico&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">bartlett_test_banca</span><span class="o">.</span><span class="n">statistic</span><span class="p">],</span>
    <span class="s1">&#39;p-valor&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">bartlett_test_banca</span><span class="o">.</span><span class="n">pvalue</span><span class="p">]</span>
<span class="p">}</span>

<span class="c1"># Convertir a DataFrame para visualizar</span>
<span class="n">igualdad_varianzas_df_banca</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">igualdad_varianzas_resultados_banca</span><span class="p">)</span>
<span class="n">igualdad_varianzas_df_banca</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Prueba</th>
      <th>Estadístico</th>
      <th>p-valor</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Bartlett</td>
      <td>0.235319</td>
      <td>0.627608</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Ahora, veamos si hay o no diferencias estadísticamente significativas entre el interes del prestamo con el interes de deposito</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Prueba de diferencia de medias (t-test) para los datos bancarios</span>
<span class="n">t_test_result_banca</span> <span class="o">=</span> <span class="n">ttest_ind</span><span class="p">(</span><span class="n">interes_prestamo</span><span class="p">,</span> <span class="n">interes_deposito</span><span class="p">,</span> <span class="n">equal_var</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Mostrar resultados de diferencia de medias y tamaño del efecto</span>
<span class="n">diferencia_medias_resultados_banca</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;Prueba&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;t-test&#39;</span><span class="p">],</span>
    <span class="s1">&#39;Estadístico&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">t_test_result_banca</span><span class="o">.</span><span class="n">statistic</span><span class="p">],</span>
    <span class="s1">&#39;p-valor&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">t_test_result_banca</span><span class="o">.</span><span class="n">pvalue</span><span class="p">]</span>
<span class="p">}</span>

<span class="c1"># Convertir a DataFrame para visualizar</span>
<span class="n">diferencia_medias_df_banca</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">diferencia_medias_resultados_banca</span><span class="p">)</span>
<span class="n">diferencia_medias_df_banca</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Prueba</th>
      <th>Estadístico o Tamaño del Efecto</th>
      <th>p-valor</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>t-test</td>
      <td>-0.957932</td>
      <td>0.339265</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>El p-valor de 0.339 es mayor que el nivel de significancia comúnmente utilizado de 0.05. Esto indica que no hay suficiente evidencia para rechazar la hipótesis nula de que las medias de los intereses de préstamo y depósito son iguales. En otras palabras, no hay una diferencia estadísticamente significativa entre las medias de los intereses de préstamo y depósito en los datos proporcionados.</p>
</section>
<section id="varianzas-distintas">
<h5><strong>Varianzas distintas</strong><a class="headerlink" href="#varianzas-distintas" title="Permalink to this heading">#</a></h5>
<p>Importemos el siguiente conjunto de datos <code class="docutils literal notranslate"><span class="pre">data_tasas_interes</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Cargar el archivo de Excel</span>
<span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;_data/datadescrip/datos_tasas_interes.csv&#39;</span>
<span class="n">df_tasa</span><span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

<span class="c1"># Ponerlo categórico</span>
<span class="n">df_tasa</span><span class="p">[</span><span class="s1">&#39;Tipo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_tasa</span><span class="o">.</span><span class="n">Tipo</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">CategoricalDtype</span><span class="p">(</span><span class="n">categories</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;InteresCreditoPersonal&#39;</span><span class="p">,</span>
                                                                              <span class="s1">&#39;InteresCreditoHipotecario&#39;</span><span class="p">]))</span>

<span class="c1"># Mostrar las primeras filas para entender la estructura</span>
<span class="n">df_tasa</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Tipo</th>
      <th>Valor</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>InteresCreditoPersonal</td>
      <td>13.241785</td>
    </tr>
    <tr>
      <th>1</th>
      <td>InteresCreditoPersonal</td>
      <td>11.654339</td>
    </tr>
    <tr>
      <th>2</th>
      <td>InteresCreditoPersonal</td>
      <td>13.619221</td>
    </tr>
    <tr>
      <th>3</th>
      <td>InteresCreditoPersonal</td>
      <td>15.807575</td>
    </tr>
    <tr>
      <th>4</th>
      <td>InteresCreditoPersonal</td>
      <td>11.414617</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_tasa</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 200 entries, 0 to 199
Data columns (total 2 columns):
 #   Column  Non-Null Count  Dtype   
---  ------  --------------  -----   
 0   Tipo    200 non-null    category
 1   Valor   200 non-null    float64 
dtypes: category(1), float64(1)
memory usage: 2.0 KB
</pre></div>
</div>
</div>
</div>
<p>Realicemos un diagrama de cajas y bigotes</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Generar diagrama de cajas y bigotes para los datos de tasas de interés</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;Tipo&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;Valor&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df_tasa</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Diagrama de Cajas y Bigotes para Tasas de Interés de Créditos Personales e Hipotecarios&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Tipo de Crédito&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Tasa de Interés (%)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/a5250e0d4833c1e4a124d06c29ed4218e43ca2331cd0b933d42ae10f38b54e42.png" src="_images/a5250e0d4833c1e4a124d06c29ed4218e43ca2331cd0b933d42ae10f38b54e42.png" />
</div>
</div>
<ul class="simple">
<li><p>Probemos el 1er supuesto. Veamos si los datos tienen o no comportamiento normal</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Separar los datos por tipo de interés de los datos generados</span>
<span class="n">interes_credito_personal</span> <span class="o">=</span> <span class="n">df_tasa</span><span class="p">[</span><span class="n">df_tasa</span><span class="p">[</span><span class="s1">&#39;Tipo&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;InteresCreditoPersonal&#39;</span><span class="p">][</span><span class="s1">&#39;Valor&#39;</span><span class="p">]</span>
<span class="n">interes_credito_hipotecario</span> <span class="o">=</span> <span class="n">df_tasa</span><span class="p">[</span><span class="n">df_tasa</span><span class="p">[</span><span class="s1">&#39;Tipo&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;InteresCreditoHipotecario&#39;</span><span class="p">][</span><span class="s1">&#39;Valor&#39;</span><span class="p">]</span>

<span class="c1"># Normalidad: Prueba de Kolmogorov-Smirnov</span>
<span class="n">ks_credito_personal</span> <span class="o">=</span> <span class="n">ks_1samp</span><span class="p">((</span><span class="n">interes_credito_personal</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">interes_credito_personal</span><span class="p">))</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">interes_credito_personal</span><span class="p">),</span> <span class="n">cdf</span><span class="o">=</span><span class="n">norm</span><span class="o">.</span><span class="n">cdf</span><span class="p">)</span>
<span class="n">ks_credito_hipotecario</span> <span class="o">=</span> <span class="n">ks_1samp</span><span class="p">((</span><span class="n">interes_credito_hipotecario</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">interes_credito_hipotecario</span><span class="p">))</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">interes_credito_hipotecario</span><span class="p">),</span> <span class="n">cdf</span><span class="o">=</span><span class="n">norm</span><span class="o">.</span><span class="n">cdf</span><span class="p">)</span>

<span class="c1"># Normalidad: Prueba de Shapiro-Wilk</span>
<span class="n">shapiro_credito_personal</span> <span class="o">=</span> <span class="n">shapiro</span><span class="p">(</span><span class="n">interes_credito_personal</span><span class="p">)</span>
<span class="n">shapiro_credito_hipotecario</span> <span class="o">=</span> <span class="n">shapiro</span><span class="p">(</span><span class="n">interes_credito_hipotecario</span><span class="p">)</span>

<span class="c1"># Mostrar resultados de normalidad</span>
<span class="n">normalidad_resultados_interes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;Prueba&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Kolmogorov-Smirnov&#39;</span><span class="p">,</span> <span class="s1">&#39;Kolmogorov-Smirnov&#39;</span><span class="p">,</span> <span class="s1">&#39;Shapiro-Wilk&#39;</span><span class="p">,</span> <span class="s1">&#39;Shapiro-Wilk&#39;</span><span class="p">],</span>
    <span class="s1">&#39;Tipo&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Credito Personal&#39;</span><span class="p">,</span> <span class="s1">&#39;Credito Hipotecario&#39;</span><span class="p">,</span> <span class="s1">&#39;Credito Personal&#39;</span><span class="p">,</span> <span class="s1">&#39;Credito Hipotecario&#39;</span><span class="p">],</span>
    <span class="s1">&#39;Estadístico&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">ks_credito_personal</span><span class="o">.</span><span class="n">statistic</span><span class="p">,</span> <span class="n">ks_credito_hipotecario</span><span class="o">.</span><span class="n">statistic</span><span class="p">,</span> <span class="n">shapiro_credito_personal</span><span class="o">.</span><span class="n">statistic</span><span class="p">,</span> <span class="n">shapiro_credito_hipotecario</span><span class="o">.</span><span class="n">statistic</span><span class="p">],</span>
    <span class="s1">&#39;p-valor&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">ks_credito_personal</span><span class="o">.</span><span class="n">pvalue</span><span class="p">,</span> <span class="n">ks_credito_hipotecario</span><span class="o">.</span><span class="n">pvalue</span><span class="p">,</span> <span class="n">shapiro_credito_personal</span><span class="o">.</span><span class="n">pvalue</span><span class="p">,</span> <span class="n">shapiro_credito_hipotecario</span><span class="o">.</span><span class="n">pvalue</span><span class="p">]</span>
<span class="p">}</span>

<span class="c1"># Convertir a DataFrame para visualizar</span>
<span class="n">normalidad_df_interes</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">normalidad_resultados_interes</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">normalidad_df_interes</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>               Prueba                 Tipo  Estadístico   p-valor
0  Kolmogorov-Smirnov     Credito Personal     0.050829  0.946707
1  Kolmogorov-Smirnov  Credito Hipotecario     0.073276  0.629350
2        Shapiro-Wilk     Credito Personal     0.989883  0.655133
3        Shapiro-Wilk  Credito Hipotecario     0.977534  0.085255
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Probemos el 2do supuesto, que es la igualdad de varianza o la homocedasticidad</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Preparación de los datos para pruebas de igualdad de varianzas para las tasas de interés</span>
<span class="n">data_gather_interes</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;Grupo&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;InteresCreditoPersonal&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">interes_credito_personal</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;InteresCreditoHipotecario&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">interes_credito_hipotecario</span><span class="p">),</span>
    <span class="s1">&#39;Valor&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span><span class="n">interes_credito_personal</span><span class="p">,</span> <span class="n">interes_credito_hipotecario</span><span class="p">])</span>
<span class="p">})</span>

<span class="c1"># Prueba de Bartlett para igualdad de varianza entre las tasas de interés</span>
<span class="n">bartlett_test_interes</span> <span class="o">=</span> <span class="n">bartlett</span><span class="p">(</span><span class="n">interes_credito_personal</span><span class="p">,</span> <span class="n">interes_credito_hipotecario</span><span class="p">)</span>

<span class="c1"># Prueba de Levene (usando la mediana)</span>
<span class="n">levene_test</span> <span class="o">=</span> <span class="n">levene</span><span class="p">(</span><span class="n">interes_credito_personal</span><span class="p">,</span> <span class="n">interes_credito_hipotecario</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="s1">&#39;median&#39;</span><span class="p">)</span>

<span class="c1"># Mostrar resultados de las pruebas de igualdad de varianza</span>
<span class="n">igualdad_varianzas_resultados_interes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;Prueba&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Bartlett&#39;</span><span class="p">,</span><span class="s1">&#39;Levene&#39;</span><span class="p">],</span>
    <span class="s1">&#39;Estadístico&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">bartlett_test_interes</span><span class="o">.</span><span class="n">statistic</span><span class="p">,</span><span class="n">levene_test</span><span class="o">.</span><span class="n">statistic</span><span class="p">],</span>
    <span class="s1">&#39;p-valor&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">bartlett_test_interes</span><span class="o">.</span><span class="n">pvalue</span><span class="p">,</span><span class="n">levene_test</span><span class="o">.</span><span class="n">pvalue</span><span class="p">]</span>
<span class="p">}</span>

<span class="c1"># Convertir a DataFrame para visualizar</span>
<span class="n">igualdad_varianzas_df_interes</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">igualdad_varianzas_resultados_interes</span><span class="p">)</span>
<span class="n">igualdad_varianzas_df_interes</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Prueba</th>
      <th>Estadístico</th>
      <th>p-valor</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Bartlett</td>
      <td>43.011235</td>
      <td>5.442642e-11</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Levene</td>
      <td>33.256190</td>
      <td>3.066820e-08</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<ul class="simple">
<li><p>Veamos si hay o no diferencias estadisticamente significativas entre el interes del prestamo y el interes de deposito</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Prueba de diferencia de medias (t-test) para las tasas de interés de créditos personales e hipotecarios</span>
<span class="n">t_test_result_interes</span> <span class="o">=</span> <span class="n">ttest_ind</span><span class="p">(</span><span class="n">interes_credito_personal</span><span class="p">,</span> <span class="n">interes_credito_hipotecario</span><span class="p">,</span> <span class="n">equal_var</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># Mostrar resultados de diferencia de medias y tamaño del efecto</span>
<span class="n">diferencia_medias_resultados_interes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;Prueba&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;t-test&#39;</span><span class="p">],</span>
    <span class="s1">&#39;Estadístico&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">t_test_result_interes</span><span class="o">.</span><span class="n">statistic</span><span class="p">],</span>
    <span class="s1">&#39;p-valor&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">t_test_result_interes</span><span class="o">.</span><span class="n">pvalue</span><span class="p">]</span>
<span class="p">}</span>

<span class="c1"># Convertir a DataFrame para visualizar</span>
<span class="n">diferencia_medias_df_interes</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">diferencia_medias_resultados_interes</span><span class="p">)</span>
<span class="n">diferencia_medias_df_interes</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Prueba</th>
      <th>Estadístico</th>
      <th>p-valor</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>t-test</td>
      <td>16.572527</td>
      <td>2.182955e-35</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Dado el p-valor extremadamente bajo (2.18e-35), podemos concluir que existe una diferencia estadísticamente significativa entre las tasas de interés de los créditos personales y los créditos hipotecarios.</p>
</section>
</section>
<section id="comparacion-de-2-grupos-poblacionales-dependientes-parametrica-pareadas">
<h4><strong>Comparación de 2 grupos poblacionales dependientes paramétrica (pareadas)</strong><a class="headerlink" href="#comparacion-de-2-grupos-poblacionales-dependientes-parametrica-pareadas" title="Permalink to this heading">#</a></h4>
<p>En el contexto de marketing para la banca, este análisis podría utilizarse para evaluar la efectividad de una nueva campaña de marketing o estrategia de promoción. Por ejemplo:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">antes</span></code>: Representa la tasa de conversión de clientes antes de implementar una nueva campaña de marketing.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">despues</span></code>: Representar la tasa de conversión de los mismos clientes después de la campaña.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Datos de ejemplo: tasa de conversión de clientes antes y después de una campaña de marketing</span>
<span class="n">data_marketing</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;cliente&#39;</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span>
    <span class="s1">&#39;conversion_antes&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">12.9</span><span class="p">,</span> <span class="mf">13.5</span><span class="p">,</span> <span class="mf">12.8</span><span class="p">,</span> <span class="mf">15.6</span><span class="p">,</span> <span class="mf">17.2</span><span class="p">,</span> <span class="mf">19.2</span><span class="p">,</span> <span class="mf">12.6</span><span class="p">,</span> <span class="mf">15.3</span><span class="p">,</span> <span class="mf">14.4</span><span class="p">,</span> <span class="mf">11.3</span><span class="p">],</span>  <span class="c1"># Tasa de conversión antes de la campaña</span>
    <span class="s1">&#39;conversion_despues&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">12.7</span><span class="p">,</span> <span class="mf">13.6</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">,</span> <span class="mf">15.2</span><span class="p">,</span> <span class="mf">16.8</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">,</span> <span class="mf">15.9</span><span class="p">,</span> <span class="mf">16.0</span><span class="p">,</span> <span class="mf">11.1</span><span class="p">]</span>  <span class="c1"># Tasa de conversión después de la campaña</span>
<span class="p">}</span>

<span class="c1"># Crear el DataFrame</span>
<span class="n">df_marketing</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data_marketing</span><span class="p">)</span>

<span class="n">df_marketing</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>cliente</th>
      <th>conversion_antes</th>
      <th>conversion_despues</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>12.9</td>
      <td>12.7</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>13.5</td>
      <td>13.6</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>12.8</td>
      <td>12.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>15.6</td>
      <td>15.2</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>17.2</td>
      <td>16.8</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Realicemos el diagrama de cajas y bigotes</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Crear un DataFrame largo para facilitar la visualización con Seaborn</span>
<span class="n">df_long</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">df_marketing</span><span class="p">,</span> <span class="n">id_vars</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;cliente&#39;</span><span class="p">],</span> <span class="n">value_vars</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;conversion_antes&#39;</span><span class="p">,</span> <span class="s1">&#39;conversion_despues&#39;</span><span class="p">],</span>
                  <span class="n">var_name</span><span class="o">=</span><span class="s1">&#39;Etapa&#39;</span><span class="p">,</span> <span class="n">value_name</span><span class="o">=</span><span class="s1">&#39;Tasa de Conversión&#39;</span><span class="p">)</span>

<span class="c1"># Generar el diagrama de cajas y bigotes para los datos de tasas de conversión</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;Etapa&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;Tasa de Conversión&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df_long</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Diagrama de Cajas y Bigotes para la Tasa de Conversión de Clientes Antes y Después de la Campaña de Marketing&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Etapa de la Campaña&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Tasa de Conversión (%)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/a1a6092fd8a052f7e2bc26d4798e517c805dd2ac8d6431506151d9c41c880204.png" src="_images/a1a6092fd8a052f7e2bc26d4798e517c805dd2ac8d6431506151d9c41c880204.png" />
</div>
</div>
<ul class="simple">
<li><p>Probemos la normalidad de los datos</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Prueba de normalidad usando Shapiro-Wilk para &quot;antes&quot; y &quot;después&quot;</span>
<span class="n">shapiro_antes</span> <span class="o">=</span> <span class="n">shapiro</span><span class="p">(</span><span class="n">df_marketing</span><span class="p">[</span><span class="s1">&#39;conversion_antes&#39;</span><span class="p">])</span>
<span class="n">shapiro_despues</span> <span class="o">=</span> <span class="n">shapiro</span><span class="p">(</span><span class="n">df_marketing</span><span class="p">[</span><span class="s1">&#39;conversion_despues&#39;</span><span class="p">])</span>

<span class="c1"># Mostrar resultados de normalidad</span>
<span class="n">normalidad_resultados_interes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;Prueba&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Shapiro-Wilk&#39;</span><span class="p">,</span> <span class="s1">&#39;Shapiro-Wilk&#39;</span><span class="p">],</span>
    <span class="s1">&#39;Tipo&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;conversion_antes&#39;</span><span class="p">,</span> <span class="s1">&#39;conversion_despues&#39;</span><span class="p">],</span>
    <span class="s1">&#39;Estadístico&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">shapiro_antes</span><span class="o">.</span><span class="n">statistic</span><span class="p">,</span> <span class="n">shapiro_despues</span><span class="o">.</span><span class="n">statistic</span><span class="p">],</span>
    <span class="s1">&#39;p-valor&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">shapiro_antes</span><span class="o">.</span><span class="n">pvalue</span><span class="p">,</span> <span class="n">shapiro_despues</span><span class="o">.</span><span class="n">pvalue</span><span class="p">]</span>
<span class="p">}</span>

<span class="c1"># Convertir a DataFrame para visualizar</span>
<span class="n">normalidad_df_interes</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">normalidad_resultados_interes</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">normalidad_df_interes</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>         Prueba                Tipo  Estadístico   p-valor
0  Shapiro-Wilk    conversion_antes     0.944436  0.603337
1  Shapiro-Wilk  conversion_despues     0.936383  0.513510
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Veamos si hay diferencias estadísticamente significativas o no</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># importar para prueba pareada</span>
<span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">ttest_rel</span>

<span class="c1"># Prueba t para datos pareados (diferencias antes y después)</span>
<span class="n">t_test_result</span> <span class="o">=</span> <span class="n">ttest_rel</span><span class="p">(</span><span class="n">df_marketing</span><span class="p">[</span><span class="s1">&#39;conversion_despues&#39;</span><span class="p">],</span> <span class="n">df_marketing</span><span class="p">[</span><span class="s1">&#39;conversion_antes&#39;</span><span class="p">],</span> <span class="n">alternative</span><span class="o">=</span><span class="s1">&#39;two-sided&#39;</span><span class="p">)</span>

<span class="n">resultado_analisis</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;Prueba t pareada&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Estadístico t&#39;</span><span class="p">:</span> <span class="n">t_test_result</span><span class="o">.</span><span class="n">statistic</span><span class="p">,</span> <span class="s1">&#39;p-valor&#39;</span><span class="p">:</span> <span class="n">t_test_result</span><span class="o">.</span><span class="n">pvalue</span><span class="p">}</span>
<span class="p">}</span>

<span class="c1"># Convertir a DataFrame para visualizar</span>
<span class="n">resultado_analisis</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">resultado_analisis</span><span class="p">)</span>

<span class="c1"># Mostrar los resultados</span>
<span class="n">resultado_analisis</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Prueba t pareada</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Estadístico t</th>
      <td>0.213308</td>
    </tr>
    <tr>
      <th>p-valor</th>
      <td>0.835840</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>El p-valor de 0.836 es mucho mayor que el nivel de significancia comúnmente utilizado (por ejemplo, 0.05). Esto indica que no hay suficiente evidencia para rechazar la hipótesis nula de que no hay diferencia en las medias de las tasas de conversión antes y después de la campaña de marketing.</p>
</section>
<section id="comparacion-de-2-grupos-poblacionales-independientes-no-parametrica">
<h4><strong>Comparación de 2 grupos poblacionales independientes no paramétrica</strong><a class="headerlink" href="#comparacion-de-2-grupos-poblacionales-independientes-no-parametrica" title="Permalink to this heading">#</a></h4>
<p>Para nuestra prueba estadística no paramétrica usaremos los datos de <strong>LendingClub (LC) Statistics</strong>. Veamos si hay diferencias estadísticamente significativas de la tasa de interes según el pago o no.</p>
<p>Realicemos un diagrama de cajas y bigotes</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Crear un diagrama de cajas y bigotes para &#39;unemployment&#39; vs &#39;type&#39; usando Seaborn</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>  <span class="c1"># Ajustar el tamaño del gráfico</span>

<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;loan_status&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;int_rate&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">)</span>

<span class="c1"># Agregar título y etiquetas</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Diagrama de Cajas y Bigotes: Tasa de interes según el estatus&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Estatus&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Tasa de interes&#39;</span><span class="p">)</span>

<span class="c1"># Mostrar el gráfico</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/40f63ff686e63a33af3aab8a381ac8d055149ac9672c32fc4789ee3868171073.png" src="_images/40f63ff686e63a33af3aab8a381ac8d055149ac9672c32fc4789ee3868171073.png" />
</div>
</div>
<ul class="simple">
<li><p>Veamos si hay normalidad en los datos</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Separar los datos por tipo de interés</span>
<span class="n">interes_Fully_Paid</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;loan_status&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Fully Paid&#39;</span><span class="p">][</span><span class="s1">&#39;int_rate&#39;</span><span class="p">]</span>
<span class="n">interes_Charged_Off</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;loan_status&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Charged Off&#39;</span><span class="p">][</span><span class="s1">&#39;int_rate&#39;</span><span class="p">]</span>

<span class="c1"># Normalidad: Prueba de Kolmogorov-Smirnov</span>
<span class="n">ks_Fully_Paid</span> <span class="o">=</span> <span class="n">ks_1samp</span><span class="p">((</span><span class="n">interes_Fully_Paid</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">interes_Fully_Paid</span><span class="p">))</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">interes_Fully_Paid</span><span class="p">),</span> <span class="n">cdf</span><span class="o">=</span><span class="n">norm</span><span class="o">.</span><span class="n">cdf</span><span class="p">)</span>
<span class="n">ks_Charged_Off</span> <span class="o">=</span> <span class="n">ks_1samp</span><span class="p">((</span><span class="n">interes_Charged_Off</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">interes_Charged_Off</span><span class="p">))</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">interes_Charged_Off</span><span class="p">),</span> <span class="n">cdf</span><span class="o">=</span><span class="n">norm</span><span class="o">.</span><span class="n">cdf</span><span class="p">)</span>

<span class="c1"># Prueba de lilliefors para la distribución Normal</span>
<span class="n">lilliefors_Fully_Paid</span> <span class="o">=</span> <span class="n">lilliefors</span><span class="p">(</span><span class="n">interes_Fully_Paid</span><span class="p">,</span> <span class="n">dist</span><span class="o">=</span><span class="s1">&#39;norm&#39;</span><span class="p">)</span>
<span class="n">lilliefors_Charged_Off</span> <span class="o">=</span> <span class="n">lilliefors</span><span class="p">(</span><span class="n">interes_Charged_Off</span><span class="p">,</span> <span class="n">dist</span><span class="o">=</span><span class="s1">&#39;norm&#39;</span><span class="p">)</span>

<span class="c1"># Mostrar resultados de normalidad</span>
<span class="n">normalidad_resultados_banca</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;Prueba&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Kolmogorov-Smirnov&#39;</span><span class="p">,</span> <span class="s1">&#39;Kolmogorov-Smirnov&#39;</span><span class="p">,</span> <span class="s1">&#39;lilliefors&#39;</span><span class="p">,</span> <span class="s1">&#39;lilliefors&#39;</span><span class="p">],</span>
    <span class="s1">&#39;Interés&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Fully Paid&#39;</span><span class="p">,</span> <span class="s1">&#39;Charged Off&#39;</span><span class="p">,</span> <span class="s1">&#39;Fully Paid&#39;</span><span class="p">,</span> <span class="s1">&#39;Charged Off&#39;</span><span class="p">],</span>
    <span class="s1">&#39;Estadístico&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">ks_Fully_Paid</span><span class="o">.</span><span class="n">statistic</span><span class="p">,</span> <span class="n">ks_Charged_Off</span><span class="o">.</span><span class="n">statistic</span><span class="p">,</span> <span class="n">lilliefors_Fully_Paid</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">lilliefors_Charged_Off</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
    <span class="s1">&#39;p-valor&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">ks_Fully_Paid</span><span class="o">.</span><span class="n">pvalue</span><span class="p">,</span> <span class="n">ks_Charged_Off</span><span class="o">.</span><span class="n">pvalue</span><span class="p">,</span> <span class="n">lilliefors_Fully_Paid</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">lilliefors_Charged_Off</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
<span class="p">}</span>

<span class="c1"># Convertir a DataFrame para visualizar</span>
<span class="n">normalidad_df_banca</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">normalidad_resultados_banca</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">normalidad_df_banca</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>               Prueba      Interés  Estadístico        p-valor
0  Kolmogorov-Smirnov   Fully Paid     0.073990  8.141216e-159
1  Kolmogorov-Smirnov  Charged Off     0.033266   1.151589e-05
2          lilliefors   Fully Paid     0.073986   1.000000e-03
3          lilliefors  Charged Off     0.033262   1.000000e-03
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Probemos la homocedasticidad</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Prueba de Levene centrada en la mediana para igualdad de varianzas entre las tasas de interés de &quot;Fully Paid&quot; y &quot;Charged Off&quot;</span>
<span class="n">levene_test_banca</span> <span class="o">=</span> <span class="n">levene</span><span class="p">(</span><span class="n">interes_Fully_Paid</span><span class="p">,</span> <span class="n">interes_Charged_Off</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="s1">&#39;median&#39;</span><span class="p">)</span>

<span class="c1"># Mostrar resultados de la prueba de Levene</span>
<span class="n">igualdad_varianzas_levene_resultados</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;Prueba&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Levene (mediana)&#39;</span><span class="p">],</span>
    <span class="s1">&#39;Estadístico&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">levene_test_banca</span><span class="o">.</span><span class="n">statistic</span><span class="p">],</span>
    <span class="s1">&#39;p-valor&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">levene_test_banca</span><span class="o">.</span><span class="n">pvalue</span><span class="p">]</span>
<span class="p">}</span>

<span class="c1"># Convertir a DataFrame para visualizar</span>
<span class="n">igualdad_varianzas_levene_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">igualdad_varianzas_levene_resultados</span><span class="p">)</span>
<span class="n">igualdad_varianzas_levene_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Prueba</th>
      <th>Estadístico</th>
      <th>p-valor</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Levene (mediana)</td>
      <td>0.308287</td>
      <td>0.578736</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<ul class="simple">
<li><p>Usemos una prueba no paramétrica para ver si hay diferencias significativas entre los dos grupos</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">mannwhitneyu</span>

<span class="c1"># Prueba de Mann-Whitney U para comparar las medianas de las tasas de interés de &quot;Fully Paid&quot; y &quot;Charged Off&quot;</span>
<span class="n">mannwhitney_test_banca</span> <span class="o">=</span> <span class="n">mannwhitneyu</span><span class="p">(</span><span class="n">interes_Fully_Paid</span><span class="p">,</span> <span class="n">interes_Charged_Off</span><span class="p">,</span> <span class="n">alternative</span><span class="o">=</span><span class="s1">&#39;two-sided&#39;</span><span class="p">)</span>

<span class="c1"># Mostrar resultados de la prueba de Mann-Whitney U</span>
<span class="n">mannwhitney_resultados</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;Prueba&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Mann-Whitney U&#39;</span><span class="p">],</span>
    <span class="s1">&#39;Estadístico&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">mannwhitney_test_banca</span><span class="o">.</span><span class="n">statistic</span><span class="p">],</span>
    <span class="s1">&#39;p-valor&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">mannwhitney_test_banca</span><span class="o">.</span><span class="n">pvalue</span><span class="p">]</span>
<span class="p">}</span>

<span class="c1"># Convertir a DataFrame para visualizar</span>
<span class="n">mannwhitney_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">mannwhitney_resultados</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mannwhitney_df</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>           Prueba  Estadístico  p-valor
0  Mann-Whitney U   61292227.5      0.0
</pre></div>
</div>
</div>
</div>
<p>Los resultados sugieren que las tasas de interés para los préstamos que han sido <code class="docutils literal notranslate"><span class="pre">Fully</span> <span class="pre">Paid</span></code> y aquellos que han sido <code class="docutils literal notranslate"><span class="pre">Charged</span> <span class="pre">Off</span></code> son significativamente diferentes. Esto podría implicar que los préstamos con mayores tasas de interés tienden a tener un mayor riesgo de no ser pagados en su totalidad (es decir, ser <code class="docutils literal notranslate"><span class="pre">Charged</span> <span class="pre">Off</span></code>)</p>
</section>
<section id="comparacion-de-2-grupos-poblacionales-dependientes-no-parametrica-pareadas">
<h4><strong>Comparación de 2 grupos poblacionales dependientes no paramétrica (pareadas)</strong><a class="headerlink" href="#comparacion-de-2-grupos-poblacionales-dependientes-no-parametrica-pareadas" title="Permalink to this heading">#</a></h4>
<p>El contexto de los datos es la rotación de puestos en la banca, supongamos que estamos comparando dos periodos (pretest y posttest) para evaluar si hubo un cambio significativo en el puntaje de satisfacción del personal antes y después de un programa de intervención en la empresa bancaria.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Cargar el archivo de Excel</span>
<span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;_data/datadescrip/rotacion_puesto_banca.csv&#39;</span>
<span class="n">df_rot</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

<span class="c1"># Mostrar las primeras filas para entender la estructura</span>
<span class="n">df_rot</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Experimento</th>
      <th>Q1</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Pretest</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Pretest</td>
      <td>7.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Pretest</td>
      <td>21.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Pretest</td>
      <td>14.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Pretest</td>
      <td>12.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_rot</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 60 entries, 0 to 59
Data columns (total 2 columns):
 #   Column       Non-Null Count  Dtype  
---  ------       --------------  -----  
 0   Experimento  60 non-null     object 
 1   Q1           60 non-null     float64
dtypes: float64(1), object(1)
memory usage: 1.1+ KB
</pre></div>
</div>
</div>
</div>
<p>Hagamos un diagrama de cajas y bigotes</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Crear un diagrama de cajas y bigotes para &#39;Q1&#39; vs &#39;Experimento&#39; usando Seaborn en el contexto de rotación de la banca</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>  <span class="c1"># Ajustar el tamaño del gráfico</span>

<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;Experimento&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;Q1&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">)</span>

<span class="c1"># Agregar título y etiquetas</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Diagrama de Cajas y Bigotes: Satisfacción del personal según el experimento&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Experimento (Pretest vs. Posttest)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Puntaje de Satisfacción del Personal (Q1)&#39;</span><span class="p">)</span>

<span class="c1"># Mostrar el gráfico</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/b17c9d00823683c04b8373e224d3622e3d430576da1f4567f1567693ab5e332b.png" src="_images/b17c9d00823683c04b8373e224d3622e3d430576da1f4567f1567693ab5e332b.png" />
</div>
</div>
<ul class="simple">
<li><p>Veamos la distribución de los datos</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Separar los datos por experimento en el contexto de rotación de la banca</span>
<span class="n">satisfaccion_Pretest</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Experimento&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Pretest&#39;</span><span class="p">][</span><span class="s1">&#39;Q1&#39;</span><span class="p">]</span>
<span class="n">satisfaccion_Posttest</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Experimento&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Posttest&#39;</span><span class="p">][</span><span class="s1">&#39;Q1&#39;</span><span class="p">]</span>

<span class="c1"># Prueba de Lilliefors para la distribución Normal</span>
<span class="n">lilliefors_Pretest</span> <span class="o">=</span> <span class="n">lilliefors</span><span class="p">(</span><span class="n">satisfaccion_Pretest</span><span class="p">,</span> <span class="n">dist</span><span class="o">=</span><span class="s1">&#39;norm&#39;</span><span class="p">)</span>
<span class="n">lilliefors_Posttest</span> <span class="o">=</span> <span class="n">lilliefors</span><span class="p">(</span><span class="n">satisfaccion_Posttest</span><span class="p">,</span> <span class="n">dist</span><span class="o">=</span><span class="s1">&#39;norm&#39;</span><span class="p">)</span>

<span class="c1"># Prueba de Shapiro-Wilk</span>
<span class="n">shapiro_Pretest</span> <span class="o">=</span> <span class="n">shapiro</span><span class="p">(</span><span class="n">satisfaccion_Pretest</span><span class="p">)</span>
<span class="n">shapiro_Posttest</span> <span class="o">=</span> <span class="n">shapiro</span><span class="p">(</span><span class="n">satisfaccion_Posttest</span><span class="p">)</span>

<span class="c1"># Mostrar resultados de normalidad</span>
<span class="n">normalidad_resultados_rotacion</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;Prueba&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Lilliefors&#39;</span><span class="p">,</span> <span class="s1">&#39;Lilliefors&#39;</span><span class="p">,</span> <span class="s1">&#39;Shapiro-Wilk&#39;</span><span class="p">,</span> <span class="s1">&#39;Shapiro-Wilk&#39;</span><span class="p">],</span>
    <span class="s1">&#39;Experimento&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Pretest&#39;</span><span class="p">,</span> <span class="s1">&#39;Posttest&#39;</span><span class="p">,</span> <span class="s1">&#39;Pretest&#39;</span><span class="p">,</span> <span class="s1">&#39;Posttest&#39;</span><span class="p">],</span>
    <span class="s1">&#39;Estadístico&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">lilliefors_Pretest</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">lilliefors_Posttest</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                    <span class="n">shapiro_Pretest</span><span class="o">.</span><span class="n">statistic</span><span class="p">,</span> <span class="n">shapiro_Posttest</span><span class="o">.</span><span class="n">statistic</span><span class="p">],</span>
    <span class="s1">&#39;p-valor&#39;</span><span class="p">:</span> <span class="p">[</span> <span class="n">lilliefors_Pretest</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">lilliefors_Posttest</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                <span class="n">shapiro_Pretest</span><span class="o">.</span><span class="n">pvalue</span><span class="p">,</span> <span class="n">shapiro_Posttest</span><span class="o">.</span><span class="n">pvalue</span><span class="p">]</span>
<span class="p">}</span>

<span class="c1"># Convertir a DataFrame para visualizar</span>
<span class="n">normalidad_df_rotacion</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">normalidad_resultados_rotacion</span><span class="p">)</span>
<span class="n">normalidad_df_rotacion</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Prueba</th>
      <th>Experimento</th>
      <th>Estadístico</th>
      <th>p-valor</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Lilliefors</td>
      <td>Pretest</td>
      <td>0.200947</td>
      <td>0.003294</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Lilliefors</td>
      <td>Posttest</td>
      <td>0.185819</td>
      <td>0.009551</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Shapiro-Wilk</td>
      <td>Pretest</td>
      <td>0.795257</td>
      <td>0.000054</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Shapiro-Wilk</td>
      <td>Posttest</td>
      <td>0.838003</td>
      <td>0.000351</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<ul class="simple">
<li><p>Veamos si hay diferencias entre el antes y despues.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">wilcoxon</span>

<span class="c1"># Prueba de Wilcoxon para datos pareados (no paramétrica) para comparar Pretest y Posttest</span>
<span class="n">wilcoxon_test_rotacion</span> <span class="o">=</span> <span class="n">wilcoxon</span><span class="p">(</span><span class="n">satisfaccion_Pretest</span><span class="p">,</span> <span class="n">satisfaccion_Posttest</span><span class="p">,</span> <span class="n">alternative</span><span class="o">=</span><span class="s1">&#39;two-sided&#39;</span><span class="p">,</span>
                                  <span class="n">correction</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Mostrar resultados de la prueba de Wilcoxon</span>
<span class="n">wilcoxon_resultados</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;Prueba&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Wilcoxon (pareada)&#39;</span><span class="p">],</span>
    <span class="s1">&#39;Estadístico&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">wilcoxon_test_rotacion</span><span class="o">.</span><span class="n">statistic</span><span class="p">],</span>
    <span class="s1">&#39;p-valor&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">wilcoxon_test_rotacion</span><span class="o">.</span><span class="n">pvalue</span><span class="p">]</span>
<span class="p">}</span>

<span class="c1"># Convertir a DataFrame para visualizar</span>
<span class="n">wilcoxon_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">wilcoxon_resultados</span><span class="p">)</span>
<span class="n">wilcoxon_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Prueba</th>
      <th>Estadístico</th>
      <th>p-valor</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Wilcoxon (pareada)</td>
      <td>132.0</td>
      <td>0.038418</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Los resultados sugieren que la intervención realizada en la empresa bancaria (por ejemplo, una política o programa de rotación de puestos) tuvo un impacto significativo en la satisfacción del personal.</p>
</section>
<section id="anova-para-mas-de-2-grupos-parametricas">
<h4><strong>ANOVA para mas de 2 grupos paramétricas</strong><a class="headerlink" href="#anova-para-mas-de-2-grupos-parametricas" title="Permalink to this heading">#</a></h4>
<p>El <strong>ANOVA (Análisis de Varianza)</strong> es una técnica estadística que permite comparar las medias de tres o más grupos para determinar si existen diferencias significativas entre ellos. El objetivo es analizar si la variabilidad entre los grupos es mayor que la variabilidad dentro de cada grupo, lo cual indicaría que al menos uno de los grupos tiene una media diferente.</p>
<p>Este análisis es útil en contextos bancarios, como por ejemplo, para evaluar si la satisfacción del cliente, el nivel de ingresos o las tasas de interés varían significativamente entre diferentes segmentos o categorías de clientes.</p>
<p>A continuación, te proporciono un ejemplo de datos para un banco con tres grupos de clientes (Clientes A, Clientes B, Clientes C), y la columna satisfaction_score representando un score de satisfacción. Inicialmente importemos los paquetes a usar</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">scipy.stats</span> <span class="k">as</span> <span class="nn">stats</span>
<span class="kn">from</span> <span class="nn">statsmodels.formula.api</span> <span class="kn">import</span> <span class="n">ols</span>
<span class="kn">import</span> <span class="nn">statsmodels.api</span> <span class="k">as</span> <span class="nn">sm</span>
<span class="kn">from</span> <span class="nn">statsmodels.stats.multicomp</span> <span class="kn">import</span> <span class="n">pairwise_tukeyhsd</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Importemos los datos con <code class="docutils literal notranslate"><span class="pre">pandas</span></code></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Importar los datos</span>
<span class="n">df_satisf</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;_data/datadescrip/banca_satisfaccion.csv&#39;</span><span class="p">)</span>

<span class="c1"># Poner la columna &#39;Grupo&#39; como categórica</span>
<span class="n">df_satisf</span><span class="p">[</span><span class="s1">&#39;Grupo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_satisf</span><span class="p">[</span><span class="s1">&#39;Grupo&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">CategoricalDtype</span><span class="p">(</span><span class="n">categories</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">]))</span>

<span class="c1"># mostrar la informacion</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df_satisf</span><span class="o">.</span><span class="n">info</span><span class="p">())</span>

<span class="c1"># imprimir las 5 primeras filas</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df_satisf</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 30 entries, 0 to 29
Data columns (total 2 columns):
 #   Column  Non-Null Count  Dtype   
---  ------  --------------  -----   
 0   Grupo   30 non-null     category
 1   Score   30 non-null     int64   
dtypes: category(1), int64(1)
memory usage: 530.0 bytes
None
  Grupo  Score
0     A     75
1     A     78
2     A     80
3     A     82
4     A     85
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Hagamos un diagrama de cajas y bigotes</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Crear un diagrama de cajas y bigotes para &#39;Q1&#39; vs &#39;Experimento&#39; usando Seaborn en el contexto de rotación de la banca</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>  <span class="c1"># Ajustar el tamaño del gráfico</span>

<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;Grupo&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;Score&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df_satisf</span><span class="p">)</span>

<span class="c1"># Agregar título y etiquetas</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Diagrama de Cajas y Bigotes: Score del personal según el grupo&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Grupo&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Puntaje de Score de satisfacción &#39;</span><span class="p">)</span>

<span class="c1"># Mostrar el gráfico</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>c:\Users\cdeor\miniconda3\envs\ml_venv\lib\site-packages\seaborn\_oldcore.py:1498: FutureWarning: is_categorical_dtype is deprecated and will be removed in a future version. Use isinstance(dtype, CategoricalDtype) instead
  if pd.api.types.is_categorical_dtype(vector):
c:\Users\cdeor\miniconda3\envs\ml_venv\lib\site-packages\seaborn\categorical.py:641: FutureWarning: The default of observed=False is deprecated and will be changed to True in a future version of pandas. Pass observed=False to retain current behavior or observed=True to adopt the future default and silence this warning.
  grouped_vals = vals.groupby(grouper)
</pre></div>
</div>
<img alt="_images/55ecbbdaf595d8defa7551d3f3f4147c2c15a61ecec0043d90c9cf7092f13ea8.png" src="_images/55ecbbdaf595d8defa7551d3f3f4147c2c15a61ecec0043d90c9cf7092f13ea8.png" />
</div>
</div>
<p>Veamos el comportamiento de los datos</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Separar los datos por grupo </span>
<span class="n">grupo_a</span> <span class="o">=</span> <span class="n">df_satisf</span><span class="p">[</span><span class="n">df_satisf</span><span class="p">[</span><span class="s1">&#39;Grupo&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;A&#39;</span><span class="p">][</span><span class="s1">&#39;Score&#39;</span><span class="p">]</span>
<span class="n">grupo_b</span> <span class="o">=</span> <span class="n">df_satisf</span><span class="p">[</span><span class="n">df_satisf</span><span class="p">[</span><span class="s1">&#39;Grupo&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;B&#39;</span><span class="p">][</span><span class="s1">&#39;Score&#39;</span><span class="p">]</span>
<span class="n">grupo_c</span> <span class="o">=</span> <span class="n">df_satisf</span><span class="p">[</span><span class="n">df_satisf</span><span class="p">[</span><span class="s1">&#39;Grupo&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;C&#39;</span><span class="p">][</span><span class="s1">&#39;Score&#39;</span><span class="p">]</span>

<span class="c1"># Prueba de Shapiro-Wilk</span>
<span class="n">shapiro_grupo_a</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">shapiro</span><span class="p">(</span><span class="n">grupo_a</span><span class="p">)</span>
<span class="n">shapiro_grupo_b</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">shapiro</span><span class="p">(</span><span class="n">grupo_b</span><span class="p">)</span>
<span class="n">shapiro_grupo_c</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">shapiro</span><span class="p">(</span><span class="n">grupo_c</span><span class="p">)</span>

<span class="c1"># Mostrar resultados de normalidad</span>
<span class="n">normalidad_resultados_satisfaccion</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;Prueba&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Shapiro-Wilk&#39;</span><span class="p">,</span> <span class="s1">&#39;Shapiro-Wilk&#39;</span><span class="p">,</span> <span class="s1">&#39;Shapiro-Wilk&#39;</span><span class="p">],</span>
    <span class="s1">&#39;Experimento&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">,</span><span class="s1">&#39;C&#39;</span><span class="p">],</span>
    <span class="s1">&#39;Estadístico&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">shapiro_grupo_a</span><span class="o">.</span><span class="n">statistic</span><span class="p">,</span> <span class="n">shapiro_grupo_b</span><span class="o">.</span><span class="n">statistic</span><span class="p">,</span><span class="n">shapiro_grupo_c</span><span class="o">.</span><span class="n">statistic</span><span class="p">],</span>
    <span class="s1">&#39;p-valor&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">shapiro_grupo_a</span><span class="o">.</span><span class="n">pvalue</span><span class="p">,</span> <span class="n">shapiro_grupo_b</span><span class="o">.</span><span class="n">pvalue</span><span class="p">,</span><span class="n">shapiro_grupo_c</span><span class="o">.</span><span class="n">pvalue</span><span class="p">]</span>
<span class="p">}</span>

<span class="c1"># Convertir a DataFrame para visualizar</span>
<span class="n">normalidad_df_satisfaccion</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">normalidad_resultados_satisfaccion</span><span class="p">)</span>
<span class="n">normalidad_df_satisfaccion</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Prueba</th>
      <th>Experimento</th>
      <th>Estadístico</th>
      <th>p-valor</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Shapiro-Wilk</td>
      <td>A</td>
      <td>0.973892</td>
      <td>0.924396</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Shapiro-Wilk</td>
      <td>B</td>
      <td>0.970165</td>
      <td>0.892368</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Shapiro-Wilk</td>
      <td>C</td>
      <td>0.970165</td>
      <td>0.892368</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<ul class="simple">
<li><p>Realicemos la igualdad de varianza</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Prueba de Levene centrada en la mediana para igualdad de varianzas entre las tasas de interés de &quot;Fully Paid&quot; y &quot;Charged Off&quot;</span>
<span class="n">bartlett_test</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">bartlett</span><span class="p">(</span><span class="n">grupo_a</span><span class="p">,</span><span class="n">grupo_b</span><span class="p">,</span><span class="n">grupo_c</span><span class="p">)</span>

<span class="c1"># Mostrar resultados de la prueba de Levene</span>
<span class="n">igualdad_varianzas_bartless_resultados</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;Prueba&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Bartless&#39;</span><span class="p">],</span>
    <span class="s1">&#39;Estadístico&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">bartlett_test</span><span class="o">.</span><span class="n">statistic</span><span class="p">],</span>
    <span class="s1">&#39;p-valor&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">bartlett_test</span><span class="o">.</span><span class="n">pvalue</span><span class="p">]</span>
<span class="p">}</span>

<span class="c1"># Convertir a DataFrame para visualizar</span>
<span class="n">igualdad_varianzas_bartlett_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">igualdad_varianzas_bartless_resultados</span><span class="p">)</span>
<span class="n">igualdad_varianzas_bartlett_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Prueba</th>
      <th>Estadístico</th>
      <th>p-valor</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Bartless</td>
      <td>1.376344</td>
      <td>0.502494</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<ul class="simple">
<li><p>Desarrollemos la prueba ANOVA:</p></li>
</ul>
<p>El método <code class="docutils literal notranslate"><span class="pre">sm.stats.anova_lm()</span></code> pertenece al paquete <code class="docutils literal notranslate"><span class="pre">statsmodels</span></code> y se usa para realizar el análisis de varianza (ANOVA) a partir de un modelo de regresión ajustado. Ahora te explicaré los parámetros que estás utilizando, específicamente <code class="docutils literal notranslate"><span class="pre">modelo</span></code> y <code class="docutils literal notranslate"><span class="pre">typ=2</span></code>:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">modelo</span></code>: este es el <strong>modelo de regresión ajustado</strong> que se pasa a la función para realizar el análisis ANOVA. El modelo se ajusta previamente usando una fórmula con <code class="docutils literal notranslate"><span class="pre">ols()</span></code>, como en el caso de:</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Crear el modelo de regresión usando Ordinary Least Squares (OLS)</span>
<span class="n">modelo</span> <span class="o">=</span> <span class="n">ols</span><span class="p">(</span><span class="s1">&#39;Score ~ Grupo&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df_satisf</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<ol class="arabic simple" start="2">
<li><p><code class="docutils literal notranslate"><span class="pre">typ</span></code> especifica el tipo de suma de cuadrados (Sum of Squares) que se utiliza en el ANOVA. Hay tres tipos principales:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">typ=1</span></code> (Suma de cuadrados tipo I): Este tipo calcula las sumas de cuadrados de acuerdo al orden en que las variables aparecen en el modelo. Se usa para modelos con diseño jerárquico o cuando el orden de las variables es importante. El principal inconveniente es que puede dar resultados engañosos si las variables están correlacionadas.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">typ=2</span></code> (Suma de cuadrados tipo II): Este tipo ajusta cada variable ignorando la interacción entre las variables explicativas. Es adecuado para modelos balanceados (donde el tamaño de muestra es igual en cada grupo) y es más robusto cuando las variables no están correlacionadas.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">typ=3</span></code> (Suma de cuadrados tipo III): Se usa para modelos no balanceados o cuando hay interacción entre las variables explicativas. Ajusta cada variable después de tener en cuenta todas las demás. Este tipo es adecuado cuando los factores están correlacionados.</p></li>
</ul>
</li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Realizar el ANOVA de tipo II</span>
<span class="n">anova_resultado</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">anova_lm</span><span class="p">(</span><span class="n">modelo</span><span class="p">,</span> <span class="n">typ</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># Mostrar los resultados del ANOVA</span>
<span class="nb">print</span><span class="p">(</span><span class="n">anova_resultado</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>               sum_sq    df         F    PR(&gt;F)
Grupo      875.266667   2.0  7.428706  0.002688
Residual  1590.600000  27.0       NaN       NaN
</pre></div>
</div>
</div>
</div>
<p>En otras palabras, hay evidencia suficiente para afirmar que <strong>existe una diferencia estadisticamente significativa en los score de satisfacción entre al menos uno de los grupos (A, B o C)</strong>.</p>
<p>Si queremos ver cuales son diferentes podemos aplicar una <strong>prueba posthoc (como tukeyHSD)</strong> para identificar específicamente qué grupos son significativamente diferentes entre sí.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Pruebas post hoc (Tukey HSD)</span>
<span class="n">tukey</span> <span class="o">=</span> <span class="n">pairwise_tukeyhsd</span><span class="p">(</span><span class="n">endog</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Score&#39;</span><span class="p">],</span>
                          <span class="n">groups</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Grupo&#39;</span><span class="p">],</span>
                          <span class="n">alpha</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tukey</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> Multiple Comparison of Means - Tukey HSD, FWER=0.05 
=====================================================
group1 group2 meandiff p-adj   lower    upper  reject
-----------------------------------------------------
     A      B     -9.3 0.0301 -17.8107 -0.7893   True
     A      C    -12.8 0.0025 -21.3107 -4.2893   True
     B      C     -3.5 0.5711 -12.0107  5.0107  False
-----------------------------------------------------
</pre></div>
</div>
</div>
</div>
</section>
<section id="kw-para-mas-de-2-grupos-no-parametrica">
<h4><strong>KW para mas de 2 grupos no parametrica</strong><a class="headerlink" href="#kw-para-mas-de-2-grupos-no-parametrica" title="Permalink to this heading">#</a></h4>
<p>El test de <strong>Kruskal-Wallis</strong> es una prueba estadística no paramétrica que se utiliza para determinar si existen diferencias significativas en la mediana entre tres o más grupos independientes. A diferencia de la <strong>ANOVA</strong>, que asume normalidad y homogeneidad de varianzas, el test de <strong>Kruskal-Wallis</strong> no requiere estas suposiciones. Es útil cuando los datos no cumplen con las condiciones necesarias para realizar una <strong>ANOVA</strong>.</p>
<p>Aquí te muestro cómo puedes realizar el análisis de <strong>Kruskal-Wallis</strong> y las pruebas post-hoc en Python usando <code class="docutils literal notranslate"><span class="pre">scipy</span></code> y <code class="docutils literal notranslate"><span class="pre">statsmodels</span></code>.</p>
<p>Para <strong>Kruskal-Wallis</strong>, usaremos el conjunto de datos <strong>LendingClub (LC) Statistics</strong>.</p>
<ul class="simple">
<li><p>Importemos los paquetes necesarios:</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span>
<span class="kn">from</span> <span class="nn">statsmodels.stats.multitest</span> <span class="kn">import</span> <span class="n">multipletests</span>
<span class="kn">from</span> <span class="nn">statsmodels.stats.diagnostic</span> <span class="kn">import</span> <span class="n">lilliefors</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Tomaremos las variables <code class="docutils literal notranslate"><span class="pre">annual_inc</span></code> y <code class="docutils literal notranslate"><span class="pre">verification_status</span></code>, para ver si hay diferencias entre los grupos de verificación de status por el ingreso anual.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Subconjunto de datos</span>
<span class="n">df_status</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;annual_inc&#39;</span><span class="p">,</span><span class="s1">&#39;verification_status&#39;</span><span class="p">]]</span>

<span class="c1"># imprimir las 5 primeras filas</span>
<span class="n">df_status</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>annual_inc</th>
      <th>verification_status</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>24000.0</td>
      <td>Verified</td>
    </tr>
    <tr>
      <th>1</th>
      <td>30000.0</td>
      <td>Source Verified</td>
    </tr>
    <tr>
      <th>2</th>
      <td>12252.0</td>
      <td>Not Verified</td>
    </tr>
    <tr>
      <th>3</th>
      <td>49200.0</td>
      <td>Source Verified</td>
    </tr>
    <tr>
      <th>4</th>
      <td>80000.0</td>
      <td>Source Verified</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<ul class="simple">
<li><p>Hagamos un diagrama de cajas y bigotes</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Crear un diagrama de cajas y bigotes para &#39;Q1&#39; vs &#39;Experimento&#39; usando Seaborn en el contexto de rotación de la banca</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>  <span class="c1"># Ajustar el tamaño del gráfico</span>

<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;verification_status&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;annual_inc&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df_status</span><span class="p">)</span>

<span class="c1"># Agregar título y etiquetas</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Diagrama de Cajas y Bigotes: ingresos anuales según el status&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Verificación de status&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Ingresos anuales&#39;</span><span class="p">)</span>

<span class="c1"># Mostrar el gráfico</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/a9119438f6b679765a6964b6bd6c78b77c8987c9224f3304e36b37e77a134708.png" src="_images/a9119438f6b679765a6964b6bd6c78b77c8987c9224f3304e36b37e77a134708.png" />
</div>
</div>
<ul class="simple">
<li><p>Veamos el comportamiento de los datos por status</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Separar los datos por grupo</span>
<span class="n">grupo_no_ver</span> <span class="o">=</span> <span class="n">df_status</span><span class="p">[</span><span class="n">df_status</span><span class="p">[</span><span class="s1">&#39;verification_status&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Not Verified&#39;</span><span class="p">][</span><span class="s1">&#39;annual_inc&#39;</span><span class="p">]</span>
<span class="n">grupo_s_ver</span> <span class="o">=</span> <span class="n">df_status</span><span class="p">[</span><span class="n">df_status</span><span class="p">[</span><span class="s1">&#39;verification_status&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Source Verified&#39;</span><span class="p">][</span><span class="s1">&#39;annual_inc&#39;</span><span class="p">]</span>
<span class="n">grupo_ver</span> <span class="o">=</span> <span class="n">df_status</span><span class="p">[</span><span class="n">df_status</span><span class="p">[</span><span class="s1">&#39;verification_status&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Verified&#39;</span><span class="p">][</span><span class="s1">&#39;annual_inc&#39;</span><span class="p">]</span>

<span class="c1"># Prueba de Shapiro-Wilk</span>
<span class="n">shapiro_grupo_no_ver</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">shapiro</span><span class="p">(</span><span class="n">grupo_no_ver</span><span class="p">)</span>
<span class="n">shapiro_grupo_s_ver</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">shapiro</span><span class="p">(</span><span class="n">grupo_s_ver</span><span class="p">)</span>
<span class="n">shapiro_grupo_ver</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">shapiro</span><span class="p">(</span><span class="n">grupo_ver</span><span class="p">)</span>

<span class="c1"># Prueba de Kolmogorov-Smirnov (usando una aproximación con stats.kstest)</span>
<span class="n">ks_grupo_no_ver</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">kstest</span><span class="p">(</span><span class="n">grupo_no_ver</span><span class="p">,</span> <span class="s1">&#39;norm&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">grupo_no_ver</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">grupo_no_ver</span><span class="o">.</span><span class="n">std</span><span class="p">()))</span>
<span class="n">ks_grupo_s_ver</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">kstest</span><span class="p">(</span><span class="n">grupo_s_ver</span><span class="p">,</span> <span class="s1">&#39;norm&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">grupo_s_ver</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">grupo_s_ver</span><span class="o">.</span><span class="n">std</span><span class="p">()))</span>
<span class="n">ks_grupo_ver</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">kstest</span><span class="p">(</span><span class="n">grupo_ver</span><span class="p">,</span> <span class="s1">&#39;norm&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">grupo_ver</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">grupo_ver</span><span class="o">.</span><span class="n">std</span><span class="p">()))</span>

<span class="c1"># Prueba de Lilliefors (similar al KS test pero ajustado para normalidad)</span>
<span class="n">lillie_grupo_no_ver</span> <span class="o">=</span> <span class="n">lilliefors</span><span class="p">(</span><span class="n">grupo_no_ver</span><span class="p">,</span> <span class="n">dist</span><span class="o">=</span><span class="s1">&#39;norm&#39;</span><span class="p">)</span>
<span class="n">lillie_grupo_s_ver</span> <span class="o">=</span> <span class="n">lilliefors</span><span class="p">(</span><span class="n">grupo_s_ver</span><span class="p">,</span> <span class="n">dist</span><span class="o">=</span><span class="s1">&#39;norm&#39;</span><span class="p">)</span>
<span class="n">lillie_grupo_ver</span> <span class="o">=</span> <span class="n">lilliefors</span><span class="p">(</span><span class="n">grupo_ver</span><span class="p">,</span> <span class="n">dist</span><span class="o">=</span><span class="s1">&#39;norm&#39;</span><span class="p">)</span>

<span class="c1"># Mostrar resultados de normalidad</span>
<span class="n">normalidad_resultados_status</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;Prueba&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Shapiro-Wilk&#39;</span><span class="p">,</span> <span class="s1">&#39;Shapiro-Wilk&#39;</span><span class="p">,</span> <span class="s1">&#39;Shapiro-Wilk&#39;</span><span class="p">,</span> 
               <span class="s1">&#39;Kolmogorov-Smirnov&#39;</span><span class="p">,</span> <span class="s1">&#39;Kolmogorov-Smirnov&#39;</span><span class="p">,</span> <span class="s1">&#39;Kolmogorov-Smirnov&#39;</span><span class="p">,</span>
               <span class="s1">&#39;lilliefors&#39;</span><span class="p">,</span><span class="s1">&#39;lilliefors&#39;</span><span class="p">,</span><span class="s1">&#39;lilliefors&#39;</span><span class="p">],</span>
    <span class="s1">&#39;Grupo&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Not Verified&#39;</span><span class="p">,</span> <span class="s1">&#39;Source Verified&#39;</span><span class="p">,</span> <span class="s1">&#39;Verified&#39;</span><span class="p">,</span> 
              <span class="s1">&#39;Not Verified&#39;</span><span class="p">,</span> <span class="s1">&#39;Source Verified&#39;</span><span class="p">,</span> <span class="s1">&#39;Verified&#39;</span><span class="p">,</span>
              <span class="s1">&#39;Not Verified&#39;</span><span class="p">,</span> <span class="s1">&#39;Source Verified&#39;</span><span class="p">,</span> <span class="s1">&#39;Verified&#39;</span><span class="p">],</span>
    <span class="s1">&#39;Estadístico&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">shapiro_grupo_no_ver</span><span class="o">.</span><span class="n">statistic</span><span class="p">,</span> <span class="n">shapiro_grupo_s_ver</span><span class="o">.</span><span class="n">statistic</span><span class="p">,</span> <span class="n">shapiro_grupo_ver</span><span class="o">.</span><span class="n">statistic</span><span class="p">,</span>
                    <span class="n">ks_grupo_no_ver</span><span class="o">.</span><span class="n">statistic</span><span class="p">,</span> <span class="n">ks_grupo_s_ver</span><span class="o">.</span><span class="n">statistic</span><span class="p">,</span> <span class="n">ks_grupo_ver</span><span class="o">.</span><span class="n">statistic</span><span class="p">,</span>
                    <span class="n">lillie_grupo_no_ver</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">lillie_grupo_s_ver</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">lillie_grupo_ver</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
    <span class="s1">&#39;p-valor&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">shapiro_grupo_no_ver</span><span class="o">.</span><span class="n">pvalue</span><span class="p">,</span> <span class="n">shapiro_grupo_s_ver</span><span class="o">.</span><span class="n">pvalue</span><span class="p">,</span> <span class="n">shapiro_grupo_ver</span><span class="o">.</span><span class="n">pvalue</span><span class="p">,</span>
                <span class="n">ks_grupo_no_ver</span><span class="o">.</span><span class="n">pvalue</span><span class="p">,</span> <span class="n">ks_grupo_s_ver</span><span class="o">.</span><span class="n">pvalue</span><span class="p">,</span> <span class="n">ks_grupo_ver</span><span class="o">.</span><span class="n">pvalue</span><span class="p">,</span>
                <span class="n">lillie_grupo_no_ver</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">lillie_grupo_s_ver</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">lillie_grupo_ver</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
<span class="p">}</span>

<span class="c1"># Convertir a DataFrame para visualizar</span>
<span class="n">normalidad_df_status</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">normalidad_resultados_status</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">normalidad_df_status</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>               Prueba            Grupo  Estadístico        p-valor
0        Shapiro-Wilk     Not Verified     0.373742   0.000000e+00
1        Shapiro-Wilk  Source Verified     0.296574   0.000000e+00
2        Shapiro-Wilk         Verified     0.725082   0.000000e+00
3  Kolmogorov-Smirnov     Not Verified     0.208876   0.000000e+00
4  Kolmogorov-Smirnov  Source Verified     0.252673   0.000000e+00
5  Kolmogorov-Smirnov         Verified     0.135945  3.970921e-200
6          lilliefors     Not Verified     0.208876   1.000000e-03
7          lilliefors  Source Verified     0.252673   1.000000e-03
8          lilliefors         Verified     0.135945   1.000000e-03
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>c:\Users\cdeor\miniconda3\envs\ml_venv\lib\site-packages\scipy\stats\_morestats.py:1882: UserWarning: p-value may not be accurate for N &gt; 5000.
  warnings.warn(&quot;p-value may not be accurate for N &gt; 5000.&quot;)
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Veamos la igualdad de varianzas usando la prueba de levene</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Prueba de Levene para igualdad de varianzas</span>
<span class="n">levene_result</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">levene</span><span class="p">(</span><span class="n">grupo_no_ver</span><span class="p">,</span> <span class="n">grupo_s_ver</span><span class="p">,</span> <span class="n">grupo_ver</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="s1">&#39;median&#39;</span><span class="p">)</span>

<span class="c1"># Mostrar resultados de la prueba de Levene</span>
<span class="n">igualdad_varianzas_levene_resultados</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;Prueba&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;levene&#39;</span><span class="p">],</span>
    <span class="s1">&#39;Estadístico&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">levene_result</span><span class="o">.</span><span class="n">statistic</span><span class="p">],</span>
    <span class="s1">&#39;p-valor&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">levene_result</span><span class="o">.</span><span class="n">pvalue</span><span class="p">]</span>
<span class="p">}</span>

<span class="c1"># Convertir a DataFrame para visualizar</span>
<span class="n">igualdad_varianzas_levene_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">igualdad_varianzas_levene_resultados</span><span class="p">)</span>
<span class="n">igualdad_varianzas_levene_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Prueba</th>
      <th>Estadístico</th>
      <th>p-valor</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>levene</td>
      <td>71.150392</td>
      <td>1.433660e-31</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<ul class="simple">
<li><p>Apliquemos la prueba de Kruskal-Wallis:</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Realizar la prueba de Kruskal-Wallis</span>
<span class="n">kruskal_result</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">kruskal</span><span class="p">(</span><span class="n">grupo_no_ver</span><span class="p">,</span> <span class="n">grupo_s_ver</span><span class="p">,</span> <span class="n">grupo_ver</span><span class="p">)</span>

<span class="c1"># Mostrar resultados de la prueba de kruskal-wallis</span>
<span class="n">kw_resultados</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;Prueba&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Kruskal-Wallis&#39;</span><span class="p">],</span>
    <span class="s1">&#39;Estadístico&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">kruskal_result</span><span class="o">.</span><span class="n">statistic</span><span class="p">],</span>
    <span class="s1">&#39;p-valor&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">kruskal_result</span><span class="o">.</span><span class="n">pvalue</span><span class="p">]</span>
<span class="p">}</span>

<span class="c1"># Convertir a DataFrame para visualizar</span>
<span class="n">kw_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">kw_resultados</span><span class="p">)</span>
<span class="n">kw_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Prueba</th>
      <th>Estadístico</th>
      <th>p-valor</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Kruskal-Wallis</td>
      <td>2064.329137</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>El p-valor extremadamente bajo (0.0) indica que hay diferencias estadísticamente significativas en los ingresos anuales entre los diferentes niveles del estatus de verificación (<code class="docutils literal notranslate"><span class="pre">Verified</span></code>, <code class="docutils literal notranslate"><span class="pre">Source</span> <span class="pre">Verified</span></code>, <code class="docutils literal notranslate"><span class="pre">Not</span> <span class="pre">Verified</span></code>). Es decir, al menos uno de estos grupos tiene una mediana de ingresos significativamente diferente de las demás.</p>
<ul class="simple">
<li><p>Dado que la prueba de Kruskal-Wallis indica diferencias significativas entre al menos uno de los grupos, se recomienda realizar una prueba post-hoc para identificar cuáles pares específicos de estatus de verificación tienen diferencias significativas en los ingresos anuales. Aplicaremos la prueba de Dunn, pero debemos instalar el paquete <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">scikit-posthocs</span></code>.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Importar el paquete </span>
<span class="kn">import</span> <span class="nn">scikit_posthocs</span> <span class="k">as</span> <span class="nn">sp</span>

<span class="c1"># Aplicar la prueba de Dunn</span>
<span class="n">dunn_result</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">posthoc_dunn</span><span class="p">(</span><span class="n">df_status</span><span class="p">,</span> <span class="n">val_col</span><span class="o">=</span><span class="s1">&#39;annual_inc&#39;</span><span class="p">,</span> <span class="n">group_col</span><span class="o">=</span><span class="s1">&#39;verification_status&#39;</span><span class="p">)</span>

<span class="c1"># Convertir el resultado a un DataFrame para mejor visualización</span>
<span class="n">dunn_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">dunn_result</span><span class="p">)</span>
<span class="n">dunn_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Not Verified</th>
      <th>Source Verified</th>
      <th>Verified</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Not Verified</th>
      <td>1.000000e+00</td>
      <td>1.755547e-22</td>
      <td>0.000000e+00</td>
    </tr>
    <tr>
      <th>Source Verified</th>
      <td>1.755547e-22</td>
      <td>1.000000e+00</td>
      <td>6.075867e-198</td>
    </tr>
    <tr>
      <th>Verified</th>
      <td>0.000000e+00</td>
      <td>6.075867e-198</td>
      <td>1.000000e+00</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Los resultados post-hoc de Dunn confirman que hay diferencias significativas en los ingresos anuales entre cada par de estatus de verificación.</p>
</section>
</section>
</section>
<section id="machine-learning-no-supervisado">
<h2><strong>Machine learning no supervisado</strong><a class="headerlink" href="#machine-learning-no-supervisado" title="Permalink to this heading">#</a></h2>
<p>En esta analizaremos los <strong>algoritmos de aprendizaje no supervisado</strong>. En el aprendizaje no supervisado, al algoritmo de aprendizaje sólo se le muestran los datos de entrada y se le pide que extraiga el conocimiento de estos datos.</p>
<p>También, el aprendizaje no supervisado es una clase de técnicas de aprendizaje automático para descubrir patrones en los datos. Por ejemplo, encontrar los “clusters” naturales de los clientes basándose en sus historiales de compra, o buscar patrones y correlaciones entre estas compras, y utilizar estos patrones para expresar los datos de forma comprimida. Estos son ejemplos de técnicas de aprendizaje no supervisado denominadas “clustering” y “reducción de dimensiones”.</p>
<p>El aprendizaje no supervisado se define en oposición al aprendizaje supervisado. Un ejemplo de aprendizaje supervisado es utilizar las mediciones de los tumores para clasificarlos como benignos o cancerosos. En este caso, el descubrimiento de patrones está guiado, o “supervisado”, para que los patrones sean lo más útiles posible para predecir la etiqueta: benigno o canceroso. El aprendizaje no supervisado, en cambio, es un aprendizaje sin etiquetas. Es puro descubrimiento de patrones, sin estar guiado por una tarea de predicción.</p>
<p>Para hacer usado de las funciones de <strong>análisis de componentes principales</strong>, <strong>cluster</strong>, entre otras; debemos instalar el paquete <code class="docutils literal notranslate"><span class="pre">sklearn</span></code>.</p>
<section id="tipos-de-aprendizaje-no-supervisado">
<h3><strong>Tipos de aprendizaje no supervisado</strong><a class="headerlink" href="#tipos-de-aprendizaje-no-supervisado" title="Permalink to this heading">#</a></h3>
<p>Los tipos de aprendizaje no supervisado son:</p>
<ul class="simple">
<li><p>Las <code class="docutils literal notranslate"><span class="pre">transformaciones</span> <span class="pre">no</span> <span class="pre">supervisadas</span></code> de un conjunto de datos son algoritmos que crean una nueva representación de los datos que podría ser más fácil de entender para los humanos u otros algoritmos de aprendizaje automático en comparación con la representación original de los datos. Una aplicación común de las <code class="docutils literal notranslate"><span class="pre">transformaciones</span> <span class="pre">no</span> <span class="pre">supervisadas</span></code> es la <code class="docutils literal notranslate"><span class="pre">reducción</span> <span class="pre">de</span> <span class="pre">la</span> <span class="pre">dimensionalidad</span></code>, que toma una representación de alta dimensión de los datos, que consiste en muchas características, y encuentra una nueva forma de representar estos datos que resuma las características esenciales con menos características. Una aplicación común de la reducción de la dimensionalidad es la reducción a dos dimensiones con fines de visualización.</p></li>
<li><p>Los <code class="docutils literal notranslate"><span class="pre">algoritmos</span> <span class="pre">de</span> <span class="pre">clustering</span></code>, por su parte, dividen los datos en distintos grupos de elementos similares. Consideremos el ejemplo de subir fotos a una red social. Para permitirle organizar sus fotos, el sitio podría querer agrupar las fotos que muestran la misma persona. Sin embargo, el sitio no sabe qué fotos muestran a quién, y no sabe cuántas personas diferentes aparecen en tu colección de fotos. Un enfoque sensato sería extraer todas las caras y dividirlas en grupos de caras que se parezcan. Con suerte, estos corresponden a la misma persona, y las imágenes pueden ser agrupar las imágenes.</p></li>
</ul>
</section>
<section id="desafios-del-aprendizaje-no-supervisado">
<h3><strong>Desafíos del aprendizaje no supervisado</strong><a class="headerlink" href="#desafios-del-aprendizaje-no-supervisado" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>Un reto importante en el aprendizaje no supervisado es evaluar si el algoritmo aprendió algo útil.</p></li>
<li><p>Los algoritmos de aprendizaje no supervisado suelen aplicarse a datos que no contienen ninguna información de etiquetas, por lo que no sabemos cuál debería ser la salida correcta. Por lo tanto, es muy difícil decir si un modelo <code class="docutils literal notranslate"><span class="pre">lo</span> <span class="pre">hizo</span> <span class="pre">bien</span></code>. Por ejemplo, nuestro hipotético algoritmo de agrupación podría haber agrupado todas las fotos que muestran caras de perfil y todas las fotos de caras completas. Esta sería, sin duda, una forma posible de dividir una colección de imágenes de rostros de personas, pero no es la que buscábamos. Sin embargo, no hay forma de <code class="docutils literal notranslate"><span class="pre">decirle</span></code> al algoritmo lo que estamos buscando, y a menudo la única forma de evaluar el resultado de un algoritmo no supervisado es inspeccionarlo manualmente.</p></li>
<li><p>Los algoritmos no supervisados se <strong>utilizan a menudo en un entorno exploratorio, cuando un científico de datos quiere entender mejor los datos, más que como parte de un sistema automático más amplio</strong>.</p></li>
<li><p>Otra aplicación habitual de los algoritmos no supervisados es como paso previo al procesamiento de los algoritmos supervisados. El aprendizaje de una nueva representación de los datos puede a veces mejorar la precisión de los algoritmos supervisados, o puede conducir a un menor consumo de memoria y tiempo.</p></li>
</ul>
<p>Antes de comenzar con los algoritmos “reales” no supervisados, discutiremos brevemente algunos métodos simples de preprocesamiento que a menudo resultan útiles. Aunque el preprocesamiento y el escalado se utilizan a menudo junto con los algoritmos de aprendizaje supervisado, los métodos de escalado no hacen uso de la información supervisada, lo que los convierte en no supervisados.</p>
</section>
<section id="preprocesamiento-y-escalado">
<h3><strong>Preprocesamiento y escalado</strong><a class="headerlink" href="#preprocesamiento-y-escalado" title="Permalink to this heading">#</a></h3>
<p>El <strong>preprocesamiento y escalado</strong> son pasos esenciales en la preparación de los datos para el análisis y modelado en machine learning. El preprocesamiento incluye tareas como la limpieza de datos, manejo de valores faltantes, codificación de variables categóricas y normalización de características. Estas actividades aseguran que los datos sean consistentes y estén en un formato adecuado para ser utilizados en modelos predictivos. El escalado, por su parte, ajusta la magnitud de las características numéricas, ya sea normalizándolas en un rango específico o estandarizándolas con una media de 0 y desviación estándar de 1, lo que mejora el rendimiento de muchos algoritmos.</p>
<p>Podemos encontrar distintos de tipo de reescaladores:</p>
<ul class="simple">
<li><p>El <code class="docutils literal notranslate"><span class="pre">StandardScaler</span></code> en scikit-learn asegura que para cada la media es 0 y la varianza es 1, lo que hace que todas las características tengan la misma magnitud. Sin embargo, este escalado no asegura ningún valor mínimo y máximo en particular para las características.</p></li>
</ul>
<div class="math notranslate nohighlight">
\[
Z = \frac{X-\mu}{\sigma}
\]</div>
<ul class="simple">
<li><p>El <code class="docutils literal notranslate"><span class="pre">RobustScaler</span></code> funciona de forma similar al <code class="docutils literal notranslate"><span class="pre">StandardScaler</span></code> en que asegura propiedades estadísticas para cada característica que garantizan que están en la misma escala. Sin embargo, el <code class="docutils literal notranslate"><span class="pre">RobustScaler</span></code> utiliza la mediana y los cuartiles, en lugar de la media y varianza. Esto hace que el <code class="docutils literal notranslate"><span class="pre">RobustScaler</span></code> ignore los puntos de datos que son muy diferentes del resto (como los errores de medición). Estos puntos de datos extraños también se llamados <code class="docutils literal notranslate"><span class="pre">outliers</span></code>, y pueden dar problemas a otras técnicas de escalado.</p></li>
</ul>
<div class="math notranslate nohighlight">
\[
X_{robustScaler}= \frac{X- x_{Q_{2}}}{x_{Q_3}-x_{Q_1}}
\]</div>
<ul class="simple">
<li><p>El <code class="docutils literal notranslate"><span class="pre">MinMaxScaler</span></code>, por otro lado, desplaza los datos de manera que todas las características estén exactamente entre 0 y 1. Para el conjunto de datos bidimensional esto significa que todos los datos están contenidos dentro del rectángulo creado por el eje <span class="math notranslate nohighlight">\(x\)</span> entre 0 y 1 y el eje <span class="math notranslate nohighlight">\(y\)</span> entre 0 y 1.</p></li>
</ul>
<div class="math notranslate nohighlight">
\[
X_{MinMaxScaler}= \frac{X- x_{min}}{x_{max}-X_{min}}
\]</div>
<ul class="simple">
<li><p>El <code class="docutils literal notranslate"><span class="pre">Normalizer</span></code> realiza un tipo de reescalado muy diferente. Escala cada punto de datos de manera que el vector de características tenga una longitud euclidiana de 1. En otras palabras, proyecta un punto de datos en el círculo (o esfera, en el caso de las dimensiones superiores) con un radio de 1. Esto significa que cada punto de datos se puede radio de 1. Esto significa que cada punto de datos está escalado por un número diferente (por la inversa de su longitud). Esta normalización se utiliza a menudo cuando sólo importa la dirección (o ángulo) de los datos, y no la longitud del vector de características. Estas son las normas que se usan</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split} 
\begin{align*}
||x||_1 &amp;= |x_1|+\cdots+|x_n|\\
||x||_2 &amp;= \sqrt{x_1^2+\cdots+x_n^2}\\
||x||_{\infty} &amp;= \max\{|x_1|,...,|x_n|\}
\end{align*}
\end{split}\]</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">sklearn.datasets</span> <span class="kn">import</span> <span class="n">make_blobs</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="p">(</span><span class="n">StandardScaler</span><span class="p">,</span> <span class="n">MinMaxScaler</span><span class="p">,</span> <span class="n">Normalizer</span><span class="p">,</span>
                                   <span class="n">RobustScaler</span><span class="p">)</span>

<span class="c1"># Definir un mapa de colores usando &#39;viridis&#39; como ejemplo</span>
<span class="n">cm2</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="s1">&#39;viridis&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">plot_scaling</span><span class="p">():</span>
    <span class="c1"># Generar datos</span>
    <span class="n">X</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">make_blobs</span><span class="p">(</span><span class="n">n_samples</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">centers</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">cluster_std</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">X</span> <span class="o">+=</span> <span class="mi">3</span>

    <span class="c1"># Crear la figura principal</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
    <span class="n">main_ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot2grid</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">rowspan</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">colspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

    <span class="c1"># Gráfico de los datos originales</span>
    <span class="n">main_ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">X</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">X</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">c</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cm2</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
    <span class="n">maxx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">X</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
    <span class="n">maxy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">X</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>

    <span class="n">main_ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">-</span><span class="n">maxx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">maxx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">main_ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="o">-</span><span class="n">maxy</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">maxy</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">main_ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Original Data&quot;</span><span class="p">)</span>

    <span class="c1"># Crear otros gráficos para mostrar los datos escalados</span>
    <span class="n">other_axes</span> <span class="o">=</span> <span class="p">[</span><span class="n">plt</span><span class="o">.</span><span class="n">subplot2grid</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">))</span>
                  <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">)]</span>

    <span class="c1"># Aplicar diferentes técnicas de escalado</span>
    <span class="k">for</span> <span class="n">ax</span><span class="p">,</span> <span class="n">scaler</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">other_axes</span><span class="p">,</span> <span class="p">[</span><span class="n">StandardScaler</span><span class="p">(),</span> <span class="n">RobustScaler</span><span class="p">(),</span>
                                       <span class="n">MinMaxScaler</span><span class="p">(),</span> <span class="n">Normalizer</span><span class="p">(</span><span class="n">norm</span><span class="o">=</span><span class="s1">&#39;l2&#39;</span><span class="p">)]):</span>
        <span class="n">X_</span> <span class="o">=</span> <span class="n">scaler</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">X_</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">X_</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">c</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cm2</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">scaler</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>

    <span class="n">other_axes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">main_ax</span><span class="p">)</span>

    <span class="c1"># Ajustar las espinas de los gráficos</span>
    <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">other_axes</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;right&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="s1">&#39;none&#39;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;bottom&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;top&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="s1">&#39;none&#39;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_ticks_position</span><span class="p">(</span><span class="s1">&#39;bottom&#39;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_ticks_position</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>

<span class="c1"># Ejecutar la función</span>
<span class="n">plot_scaling</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/c43395eb1ae0a52b3cd3a761b8a02cca249aaf005d7b6700ef954b17b03e7cb6.png" src="_images/c43395eb1ae0a52b3cd3a761b8a02cca249aaf005d7b6700ef954b17b03e7cb6.png" />
</div>
</div>
</section>
<section id="analisis-de-componentes-principales-reduccion-de-dimensiones">
<h3><strong>Análisis de componentes principales (reducción de dimensiones)</strong><a class="headerlink" href="#analisis-de-componentes-principales-reduccion-de-dimensiones" title="Permalink to this heading">#</a></h3>
<p>La reducción de dimensiones resume un conjunto de datos utilizando sus patrones comunes. El <code class="docutils literal notranslate"><span class="pre">PCA</span></code> se utiliza a menudo antes del aprendizaje supervisado para mejorar el rendimiento y la generalización del modelo. También puede ser útil para el aprendizaje no supervisado.</p>
<p>La reducción de dimensiones encuentra patrones en los datos y utiliza estos patrones para volver a expresarlos en forma comprimida. Esto hace que el cálculo posterior con los datos sea mucho más eficiente. Sin embargo, la función más importante de la reducción de dimensiones es reducir un conjunto de datos a su “esqueleto básico”, descartando características ruidosas que causan grandes problemas para tareas de aprendizaje supervisado como la regresión y la clasificación. En muchas aplicaciones del mundo real, es la reducción de dimensiones lo que hace posible la predicción.</p>
<p>El <strong><code class="docutils literal notranslate"><span class="pre">análisis</span> <span class="pre">de</span> <span class="pre">componentes</span> <span class="pre">principales</span></code></strong>, abreviado <strong><code class="docutils literal notranslate"><span class="pre">PCA</span></code></strong>:</p>
<ul class="simple">
<li><p>es un método de interdependencia para resumir la información contenida en las variables y facilitar su análisis.</p></li>
<li><p>El PCA transforma el conjunto de variables originales en un subconjunto más pequeño de variables, las cuales son combinaciones lineales de las primeras, que contienen mayor parte de la variabilidad presente en el conjunto inicial, donde la naturaleza de las variable es cuantitativa</p></li>
</ul>
<div class="warning admonition">
<p class="admonition-title"><strong>Observación</strong></p>
<p>El objetivo principal del PCA es descubrir la verdadera dimensionalidad del espacio en el que se encuentran los datos. En este proceso se pueden formar nuevas variables, de modo que:</p>
<ul class="simple">
<li><p>No estén correlacionadas.</p></li>
<li><p>La primera componente principal explique tanto de la variabilidad en los datos como sea posible.</p></li>
<li><p>Cada componente subsiguiente tome en cuenta tanto de la variabilidad restante como sea posible.</p></li>
<li><p>En el caso de no correlación entre las variables originales, el ACP no tiene mucho que hacer, pues las componentes se corresponderían con cada variable por orden de magnitud en la varianza.</p></li>
<li><p>Se presentará esta técnica como una herramienta exploratoria para facilitar la descripción e interpretación de los datos, es decir es una técnica descriptiva.</p></li>
</ul>
</div>
<p>Solo como ejemplo del PCA, trabajaremos con los datos de vinos: <code class="docutils literal notranslate"><span class="pre">winequality-red</span></code>. Inicialmente importemos los paquetes</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Importar los paquetes</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">StandardScaler</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">sklearn.decomposition</span> <span class="kn">import</span> <span class="n">PCA</span>

<span class="c1"># Importar la función train_test_split </span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>
</pre></div>
</div>
</div>
</div>
<p>Importemos del dataset. Vamos tomar la variable <code class="docutils literal notranslate"><span class="pre">Customer_Segment</span></code>, nuestra variable respuesta.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Importar un archivo CSV como DataFrame</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;_data/datadescrip/Wine.csv&#39;</span><span class="p">)</span>

<span class="c1"># Ver las primeras 5 filas del DataFrame</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Alcohol</th>
      <th>Malic_Acid</th>
      <th>Ash</th>
      <th>Ash_Alcanity</th>
      <th>Magnesium</th>
      <th>Total_Phenols</th>
      <th>Flavanoids</th>
      <th>Nonflavanoid_Phenols</th>
      <th>Proanthocyanins</th>
      <th>Color_Intensity</th>
      <th>Hue</th>
      <th>OD280</th>
      <th>Proline</th>
      <th>Customer_Segment</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>14.23</td>
      <td>1.71</td>
      <td>2.43</td>
      <td>15.6</td>
      <td>127</td>
      <td>2.80</td>
      <td>3.06</td>
      <td>0.28</td>
      <td>2.29</td>
      <td>5.64</td>
      <td>1.04</td>
      <td>3.92</td>
      <td>1065</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>13.20</td>
      <td>1.78</td>
      <td>2.14</td>
      <td>11.2</td>
      <td>100</td>
      <td>2.65</td>
      <td>2.76</td>
      <td>0.26</td>
      <td>1.28</td>
      <td>4.38</td>
      <td>1.05</td>
      <td>3.40</td>
      <td>1050</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>13.16</td>
      <td>2.36</td>
      <td>2.67</td>
      <td>18.6</td>
      <td>101</td>
      <td>2.80</td>
      <td>3.24</td>
      <td>0.30</td>
      <td>2.81</td>
      <td>5.68</td>
      <td>1.03</td>
      <td>3.17</td>
      <td>1185</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>14.37</td>
      <td>1.95</td>
      <td>2.50</td>
      <td>16.8</td>
      <td>113</td>
      <td>3.85</td>
      <td>3.49</td>
      <td>0.24</td>
      <td>2.18</td>
      <td>7.80</td>
      <td>0.86</td>
      <td>3.45</td>
      <td>1480</td>
      <td>1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>13.24</td>
      <td>2.59</td>
      <td>2.87</td>
      <td>21.0</td>
      <td>118</td>
      <td>2.80</td>
      <td>2.69</td>
      <td>0.39</td>
      <td>1.82</td>
      <td>4.32</td>
      <td>1.04</td>
      <td>2.93</td>
      <td>735</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Seleccionemos las variables independientes o caracteristica sin la variable respuesta</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Variables independientes y variable respuesta</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">:</span><span class="mi">13</span><span class="p">]</span> <span class="c1"># Caracteristica o features</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">13</span><span class="p">]</span>   <span class="c1"># respuesta o target</span>
</pre></div>
</div>
</div>
</div>
<p>Para tener una idea de si existen características fuertemente correlacionadas en nuestros datos, utilizaremos funciones incorporadas en el paquete pandas, especialmente <code class="docutils literal notranslate"><span class="pre">corr()</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Mostrar la matriz de correlación con un mapa de calor</span>
<span class="n">corr_wine</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>

<span class="c1"># Crear la figura</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">corr_wine</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;coolwarm_r&#39;</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;.2f&quot;</span><span class="p">,</span> <span class="n">cbar</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/d36b66dd07b3f43359304b9cb7462a99f539b6cd265fc0c5504c49bbd4afa2df.png" src="_images/d36b66dd07b3f43359304b9cb7462a99f539b6cd265fc0c5504c49bbd4afa2df.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">corr_wine</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">background_gradient</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;coolwarm_r&#39;</span><span class="p">)</span>  <span class="c1"># Puedes usar otro cmap si prefieres</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style type="text/css">
#T_b472e_row0_col0, #T_b472e_row1_col1, #T_b472e_row2_col2, #T_b472e_row3_col3, #T_b472e_row4_col4, #T_b472e_row5_col5, #T_b472e_row6_col6, #T_b472e_row7_col7, #T_b472e_row8_col8, #T_b472e_row9_col9, #T_b472e_row10_col10, #T_b472e_row11_col11, #T_b472e_row12_col12 {
  background-color: #3b4cc0;
  color: #f1f1f1;
}
#T_b472e_row0_col1, #T_b472e_row0_col4 {
  background-color: #efcfbf;
  color: #000000;
}
#T_b472e_row0_col2 {
  background-color: #f5a081;
  color: #000000;
}
#T_b472e_row0_col3 {
  background-color: #d44e41;
  color: #f1f1f1;
}
#T_b472e_row0_col5, #T_b472e_row12_col8, #T_b472e_row12_col10 {
  background-color: #dadce0;
  color: #000000;
}
#T_b472e_row0_col6 {
  background-color: #dcdddd;
  color: #000000;
}
#T_b472e_row0_col7, #T_b472e_row4_col3, #T_b472e_row9_col8, #T_b472e_row10_col4 {
  background-color: #f4987a;
  color: #000000;
}
#T_b472e_row0_col8 {
  background-color: #f5c2aa;
  color: #000000;
}
#T_b472e_row0_col9 {
  background-color: #9ebeff;
  color: #000000;
}
#T_b472e_row0_col10 {
  background-color: #f7b194;
  color: #000000;
}
#T_b472e_row0_col11 {
  background-color: #f3c7b1;
  color: #000000;
}
#T_b472e_row0_col12 {
  background-color: #8caffe;
  color: #000000;
}
#T_b472e_row1_col0, #T_b472e_row2_col10, #T_b472e_row9_col2 {
  background-color: #f7b093;
  color: #000000;
}
#T_b472e_row1_col2 {
  background-color: #f18d6f;
  color: #f1f1f1;
}
#T_b472e_row1_col3, #T_b472e_row1_col9 {
  background-color: #dbdcde;
  color: #000000;
}
#T_b472e_row1_col4 {
  background-color: #e67259;
  color: #f1f1f1;
}
#T_b472e_row1_col5, #T_b472e_row8_col2 {
  background-color: #d0473d;
  color: #f1f1f1;
}
#T_b472e_row1_col6, #T_b472e_row5_col3 {
  background-color: #d1493f;
  color: #f1f1f1;
}
#T_b472e_row1_col7, #T_b472e_row12_col11 {
  background-color: #d2dbe8;
  color: #000000;
}
#T_b472e_row1_col8 {
  background-color: #d85646;
  color: #f1f1f1;
}
#T_b472e_row1_col10, #T_b472e_row3_col0, #T_b472e_row3_col12, #T_b472e_row6_col7, #T_b472e_row7_col4, #T_b472e_row7_col5, #T_b472e_row7_col6, #T_b472e_row7_col8, #T_b472e_row7_col11, #T_b472e_row10_col1, #T_b472e_row10_col2, #T_b472e_row10_col9, #T_b472e_row12_col3 {
  background-color: #b40426;
  color: #f1f1f1;
}
#T_b472e_row1_col11, #T_b472e_row3_col5, #T_b472e_row7_col12 {
  background-color: #d24b40;
  color: #f1f1f1;
}
#T_b472e_row1_col12 {
  background-color: #e9785d;
  color: #f1f1f1;
}
#T_b472e_row2_col0, #T_b472e_row4_col10 {
  background-color: #f2cab5;
  color: #000000;
}
#T_b472e_row2_col1, #T_b472e_row2_col12 {
  background-color: #e6d7cf;
  color: #000000;
}
#T_b472e_row2_col3 {
  background-color: #bbd1f8;
  color: #000000;
}
#T_b472e_row2_col4 {
  background-color: #edd2c3;
  color: #000000;
}
#T_b472e_row2_col5 {
  background-color: #f2cbb7;
  color: #000000;
}
#T_b472e_row2_col6 {
  background-color: #eed0c0;
  color: #000000;
}
#T_b472e_row2_col7, #T_b472e_row10_col12 {
  background-color: #e4d9d2;
  color: #000000;
}
#T_b472e_row2_col8 {
  background-color: #f6a385;
  color: #000000;
}
#T_b472e_row2_col9 {
  background-color: #d9dce1;
  color: #000000;
}
#T_b472e_row2_col11, #T_b472e_row4_col2 {
  background-color: #f7b99e;
  color: #000000;
}
#T_b472e_row3_col1 {
  background-color: #d1dae9;
  color: #000000;
}
#T_b472e_row3_col2, #T_b472e_row10_col8 {
  background-color: #e1dad6;
  color: #000000;
}
#T_b472e_row3_col4 {
  background-color: #e16751;
  color: #f1f1f1;
}
#T_b472e_row3_col6, #T_b472e_row3_col8, #T_b472e_row11_col1 {
  background-color: #dd5f4b;
  color: #f1f1f1;
}
#T_b472e_row3_col7 {
  background-color: #c5d6f2;
  color: #000000;
}
#T_b472e_row3_col9 {
  background-color: #f6bea4;
  color: #000000;
}
#T_b472e_row3_col10 {
  background-color: #eb7d62;
  color: #f1f1f1;
}
#T_b472e_row3_col11 {
  background-color: #e36c55;
  color: #f1f1f1;
}
#T_b472e_row4_col0 {
  background-color: #ead4c8;
  color: #000000;
}
#T_b472e_row4_col1, #T_b472e_row8_col9 {
  background-color: #f7b599;
  color: #000000;
}
#T_b472e_row4_col5, #T_b472e_row5_col0 {
  background-color: #e7d7ce;
  color: #000000;
}
#T_b472e_row4_col6 {
  background-color: #e2dad5;
  color: #000000;
}
#T_b472e_row4_col7, #T_b472e_row10_col0 {
  background-color: #ea7b60;
  color: #f1f1f1;
}
#T_b472e_row4_col8, #T_b472e_row9_col7 {
  background-color: #ebd3c6;
  color: #000000;
}
#T_b472e_row4_col9 {
  background-color: #e3d9d3;
  color: #000000;
}
#T_b472e_row4_col11 {
  background-color: #f4c5ad;
  color: #000000;
}
#T_b472e_row4_col12 {
  background-color: #c6d6f1;
  color: #000000;
}
#T_b472e_row5_col1, #T_b472e_row12_col7 {
  background-color: #e36b54;
  color: #f1f1f1;
}
#T_b472e_row5_col2, #T_b472e_row7_col10 {
  background-color: #ec7f63;
  color: #f1f1f1;
}
#T_b472e_row5_col4 {
  background-color: #f5c4ac;
  color: #000000;
}
#T_b472e_row5_col6 {
  background-color: #5572df;
  color: #f1f1f1;
}
#T_b472e_row5_col7 {
  background-color: #c83836;
  color: #f1f1f1;
}
#T_b472e_row5_col8 {
  background-color: #98b9ff;
  color: #000000;
}
#T_b472e_row5_col9 {
  background-color: #f7af91;
  color: #000000;
}
#T_b472e_row5_col10 {
  background-color: #b3cdfb;
  color: #000000;
}
#T_b472e_row5_col11 {
  background-color: #7b9ff9;
  color: #f1f1f1;
}
#T_b472e_row5_col12, #T_b472e_row6_col12 {
  background-color: #afcafc;
  color: #000000;
}
#T_b472e_row6_col0 {
  background-color: #efcebd;
  color: #000000;
}
#T_b472e_row6_col1 {
  background-color: #d55042;
  color: #f1f1f1;
}
#T_b472e_row6_col2, #T_b472e_row10_col7 {
  background-color: #e97a5f;
  color: #f1f1f1;
}
#T_b472e_row6_col3, #T_b472e_row11_col9 {
  background-color: #ca3b37;
  color: #f1f1f1;
}
#T_b472e_row6_col4, #T_b472e_row9_col4 {
  background-color: #f5c0a7;
  color: #000000;
}
#T_b472e_row6_col5 {
  background-color: #5673e0;
  color: #f1f1f1;
}
#T_b472e_row6_col8 {
  background-color: #8fb1fe;
  color: #000000;
}
#T_b472e_row6_col9 {
  background-color: #f29072;
  color: #f1f1f1;
}
#T_b472e_row6_col10 {
  background-color: #9bbcff;
  color: #000000;
}
#T_b472e_row6_col11 {
  background-color: #6788ee;
  color: #f1f1f1;
}
#T_b472e_row7_col0 {
  background-color: #dc5d4a;
  color: #f1f1f1;
}
#T_b472e_row7_col1, #T_b472e_row8_col10, #T_b472e_row12_col9 {
  background-color: #cfdaea;
  color: #000000;
}
#T_b472e_row7_col2 {
  background-color: #f39778;
  color: #000000;
}
#T_b472e_row7_col3 {
  background-color: #cdd9ec;
  color: #000000;
}
#T_b472e_row7_col9 {
  background-color: #ecd3c5;
  color: #000000;
}
#T_b472e_row8_col0 {
  background-color: #f7ba9f;
  color: #000000;
}
#T_b472e_row8_col1 {
  background-color: #f08b6e;
  color: #f1f1f1;
}
#T_b472e_row8_col3 {
  background-color: #e8765c;
  color: #f1f1f1;
}
#T_b472e_row8_col4 {
  background-color: #f2c9b4;
  color: #000000;
}
#T_b472e_row8_col5 {
  background-color: #93b5fe;
  color: #000000;
}
#T_b472e_row8_col6 {
  background-color: #84a7fc;
  color: #f1f1f1;
}
#T_b472e_row8_col7 {
  background-color: #d95847;
  color: #f1f1f1;
}
#T_b472e_row8_col11 {
  background-color: #a5c3fe;
  color: #000000;
}
#T_b472e_row8_col12 {
  background-color: #d3dbe7;
  color: #000000;
}
#T_b472e_row9_col0, #T_b472e_row12_col5 {
  background-color: #aec9fc;
  color: #000000;
}
#T_b472e_row9_col1, #T_b472e_row12_col4 {
  background-color: #d8dce2;
  color: #000000;
}
#T_b472e_row9_col3 {
  background-color: #f7b396;
  color: #000000;
}
#T_b472e_row9_col5 {
  background-color: #f6a283;
  color: #000000;
}
#T_b472e_row9_col6, #T_b472e_row12_col1 {
  background-color: #f39475;
  color: #000000;
}
#T_b472e_row9_col10 {
  background-color: #bd1f2d;
  color: #f1f1f1;
}
#T_b472e_row9_col11 {
  background-color: #c53334;
  color: #f1f1f1;
}
#T_b472e_row9_col12 {
  background-color: #d6dce4;
  color: #000000;
}
#T_b472e_row10_col3, #T_b472e_row11_col3 {
  background-color: #da5a49;
  color: #f1f1f1;
}
#T_b472e_row10_col5 {
  background-color: #bcd2f7;
  color: #000000;
}
#T_b472e_row10_col6 {
  background-color: #9dbdff;
  color: #000000;
}
#T_b472e_row10_col11 {
  background-color: #9abbff;
  color: #000000;
}
#T_b472e_row11_col0 {
  background-color: #f7a98b;
  color: #000000;
}
#T_b472e_row11_col2 {
  background-color: #cd423b;
  color: #f1f1f1;
}
#T_b472e_row11_col4 {
  background-color: #f59c7d;
  color: #000000;
}
#T_b472e_row11_col5 {
  background-color: #7da0f9;
  color: #f1f1f1;
}
#T_b472e_row11_col6 {
  background-color: #6687ed;
  color: #f1f1f1;
}
#T_b472e_row11_col7 {
  background-color: #bb1b2c;
  color: #f1f1f1;
}
#T_b472e_row11_col8 {
  background-color: #b1cbfc;
  color: #000000;
}
#T_b472e_row11_col10 {
  background-color: #97b8ff;
  color: #000000;
}
#T_b472e_row11_col12 {
  background-color: #d7dce3;
  color: #000000;
}
#T_b472e_row12_col0 {
  background-color: #94b6ff;
  color: #000000;
}
#T_b472e_row12_col2 {
  background-color: #f6a586;
  color: #000000;
}
#T_b472e_row12_col6 {
  background-color: #a9c6fd;
  color: #000000;
}
</style>
<table id="T_b472e">
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th id="T_b472e_level0_col0" class="col_heading level0 col0" >Alcohol</th>
      <th id="T_b472e_level0_col1" class="col_heading level0 col1" >Malic_Acid</th>
      <th id="T_b472e_level0_col2" class="col_heading level0 col2" >Ash</th>
      <th id="T_b472e_level0_col3" class="col_heading level0 col3" >Ash_Alcanity</th>
      <th id="T_b472e_level0_col4" class="col_heading level0 col4" >Magnesium</th>
      <th id="T_b472e_level0_col5" class="col_heading level0 col5" >Total_Phenols</th>
      <th id="T_b472e_level0_col6" class="col_heading level0 col6" >Flavanoids</th>
      <th id="T_b472e_level0_col7" class="col_heading level0 col7" >Nonflavanoid_Phenols</th>
      <th id="T_b472e_level0_col8" class="col_heading level0 col8" >Proanthocyanins</th>
      <th id="T_b472e_level0_col9" class="col_heading level0 col9" >Color_Intensity</th>
      <th id="T_b472e_level0_col10" class="col_heading level0 col10" >Hue</th>
      <th id="T_b472e_level0_col11" class="col_heading level0 col11" >OD280</th>
      <th id="T_b472e_level0_col12" class="col_heading level0 col12" >Proline</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_b472e_level0_row0" class="row_heading level0 row0" >Alcohol</th>
      <td id="T_b472e_row0_col0" class="data row0 col0" >1.000000</td>
      <td id="T_b472e_row0_col1" class="data row0 col1" >0.094397</td>
      <td id="T_b472e_row0_col2" class="data row0 col2" >0.211545</td>
      <td id="T_b472e_row0_col3" class="data row0 col3" >-0.310235</td>
      <td id="T_b472e_row0_col4" class="data row0 col4" >0.270798</td>
      <td id="T_b472e_row0_col5" class="data row0 col5" >0.289101</td>
      <td id="T_b472e_row0_col6" class="data row0 col6" >0.236815</td>
      <td id="T_b472e_row0_col7" class="data row0 col7" >-0.155929</td>
      <td id="T_b472e_row0_col8" class="data row0 col8" >0.136698</td>
      <td id="T_b472e_row0_col9" class="data row0 col9" >0.546364</td>
      <td id="T_b472e_row0_col10" class="data row0 col10" >-0.071747</td>
      <td id="T_b472e_row0_col11" class="data row0 col11" >0.072343</td>
      <td id="T_b472e_row0_col12" class="data row0 col12" >0.643720</td>
    </tr>
    <tr>
      <th id="T_b472e_level0_row1" class="row_heading level0 row1" >Malic_Acid</th>
      <td id="T_b472e_row1_col0" class="data row1 col0" >0.094397</td>
      <td id="T_b472e_row1_col1" class="data row1 col1" >1.000000</td>
      <td id="T_b472e_row1_col2" class="data row1 col2" >0.164045</td>
      <td id="T_b472e_row1_col3" class="data row1 col3" >0.288500</td>
      <td id="T_b472e_row1_col4" class="data row1 col4" >-0.054575</td>
      <td id="T_b472e_row1_col5" class="data row1 col5" >-0.335167</td>
      <td id="T_b472e_row1_col6" class="data row1 col6" >-0.411007</td>
      <td id="T_b472e_row1_col7" class="data row1 col7" >0.292977</td>
      <td id="T_b472e_row1_col8" class="data row1 col8" >-0.220746</td>
      <td id="T_b472e_row1_col9" class="data row1 col9" >0.248985</td>
      <td id="T_b472e_row1_col10" class="data row1 col10" >-0.561296</td>
      <td id="T_b472e_row1_col11" class="data row1 col11" >-0.368710</td>
      <td id="T_b472e_row1_col12" class="data row1 col12" >-0.192011</td>
    </tr>
    <tr>
      <th id="T_b472e_level0_row2" class="row_heading level0 row2" >Ash</th>
      <td id="T_b472e_row2_col0" class="data row2 col0" >0.211545</td>
      <td id="T_b472e_row2_col1" class="data row2 col1" >0.164045</td>
      <td id="T_b472e_row2_col2" class="data row2 col2" >1.000000</td>
      <td id="T_b472e_row2_col3" class="data row2 col3" >0.443367</td>
      <td id="T_b472e_row2_col4" class="data row2 col4" >0.286587</td>
      <td id="T_b472e_row2_col5" class="data row2 col5" >0.128980</td>
      <td id="T_b472e_row2_col6" class="data row2 col6" >0.115077</td>
      <td id="T_b472e_row2_col7" class="data row2 col7" >0.186230</td>
      <td id="T_b472e_row2_col8" class="data row2 col8" >0.009652</td>
      <td id="T_b472e_row2_col9" class="data row2 col9" >0.258887</td>
      <td id="T_b472e_row2_col10" class="data row2 col10" >-0.074667</td>
      <td id="T_b472e_row2_col11" class="data row2 col11" >0.003911</td>
      <td id="T_b472e_row2_col12" class="data row2 col12" >0.223626</td>
    </tr>
    <tr>
      <th id="T_b472e_level0_row3" class="row_heading level0 row3" >Ash_Alcanity</th>
      <td id="T_b472e_row3_col0" class="data row3 col0" >-0.310235</td>
      <td id="T_b472e_row3_col1" class="data row3 col1" >0.288500</td>
      <td id="T_b472e_row3_col2" class="data row3 col2" >0.443367</td>
      <td id="T_b472e_row3_col3" class="data row3 col3" >1.000000</td>
      <td id="T_b472e_row3_col4" class="data row3 col4" >-0.083333</td>
      <td id="T_b472e_row3_col5" class="data row3 col5" >-0.321113</td>
      <td id="T_b472e_row3_col6" class="data row3 col6" >-0.351370</td>
      <td id="T_b472e_row3_col7" class="data row3 col7" >0.361922</td>
      <td id="T_b472e_row3_col8" class="data row3 col8" >-0.197327</td>
      <td id="T_b472e_row3_col9" class="data row3 col9" >0.018732</td>
      <td id="T_b472e_row3_col10" class="data row3 col10" >-0.273955</td>
      <td id="T_b472e_row3_col11" class="data row3 col11" >-0.276769</td>
      <td id="T_b472e_row3_col12" class="data row3 col12" >-0.440597</td>
    </tr>
    <tr>
      <th id="T_b472e_level0_row4" class="row_heading level0 row4" >Magnesium</th>
      <td id="T_b472e_row4_col0" class="data row4 col0" >0.270798</td>
      <td id="T_b472e_row4_col1" class="data row4 col1" >-0.054575</td>
      <td id="T_b472e_row4_col2" class="data row4 col2" >0.286587</td>
      <td id="T_b472e_row4_col3" class="data row4 col3" >-0.083333</td>
      <td id="T_b472e_row4_col4" class="data row4 col4" >1.000000</td>
      <td id="T_b472e_row4_col5" class="data row4 col5" >0.214401</td>
      <td id="T_b472e_row4_col6" class="data row4 col6" >0.195784</td>
      <td id="T_b472e_row4_col7" class="data row4 col7" >-0.256294</td>
      <td id="T_b472e_row4_col8" class="data row4 col8" >0.236441</td>
      <td id="T_b472e_row4_col9" class="data row4 col9" >0.199950</td>
      <td id="T_b472e_row4_col10" class="data row4 col10" >0.055398</td>
      <td id="T_b472e_row4_col11" class="data row4 col11" >0.066004</td>
      <td id="T_b472e_row4_col12" class="data row4 col12" >0.393351</td>
    </tr>
    <tr>
      <th id="T_b472e_level0_row5" class="row_heading level0 row5" >Total_Phenols</th>
      <td id="T_b472e_row5_col0" class="data row5 col0" >0.289101</td>
      <td id="T_b472e_row5_col1" class="data row5 col1" >-0.335167</td>
      <td id="T_b472e_row5_col2" class="data row5 col2" >0.128980</td>
      <td id="T_b472e_row5_col3" class="data row5 col3" >-0.321113</td>
      <td id="T_b472e_row5_col4" class="data row5 col4" >0.214401</td>
      <td id="T_b472e_row5_col5" class="data row5 col5" >1.000000</td>
      <td id="T_b472e_row5_col6" class="data row5 col6" >0.864564</td>
      <td id="T_b472e_row5_col7" class="data row5 col7" >-0.449935</td>
      <td id="T_b472e_row5_col8" class="data row5 col8" >0.612413</td>
      <td id="T_b472e_row5_col9" class="data row5 col9" >-0.055136</td>
      <td id="T_b472e_row5_col10" class="data row5 col10" >0.433681</td>
      <td id="T_b472e_row5_col11" class="data row5 col11" >0.699949</td>
      <td id="T_b472e_row5_col12" class="data row5 col12" >0.498115</td>
    </tr>
    <tr>
      <th id="T_b472e_level0_row6" class="row_heading level0 row6" >Flavanoids</th>
      <td id="T_b472e_row6_col0" class="data row6 col0" >0.236815</td>
      <td id="T_b472e_row6_col1" class="data row6 col1" >-0.411007</td>
      <td id="T_b472e_row6_col2" class="data row6 col2" >0.115077</td>
      <td id="T_b472e_row6_col3" class="data row6 col3" >-0.351370</td>
      <td id="T_b472e_row6_col4" class="data row6 col4" >0.195784</td>
      <td id="T_b472e_row6_col5" class="data row6 col5" >0.864564</td>
      <td id="T_b472e_row6_col6" class="data row6 col6" >1.000000</td>
      <td id="T_b472e_row6_col7" class="data row6 col7" >-0.537900</td>
      <td id="T_b472e_row6_col8" class="data row6 col8" >0.652692</td>
      <td id="T_b472e_row6_col9" class="data row6 col9" >-0.172379</td>
      <td id="T_b472e_row6_col10" class="data row6 col10" >0.543479</td>
      <td id="T_b472e_row6_col11" class="data row6 col11" >0.787194</td>
      <td id="T_b472e_row6_col12" class="data row6 col12" >0.494193</td>
    </tr>
    <tr>
      <th id="T_b472e_level0_row7" class="row_heading level0 row7" >Nonflavanoid_Phenols</th>
      <td id="T_b472e_row7_col0" class="data row7 col0" >-0.155929</td>
      <td id="T_b472e_row7_col1" class="data row7 col1" >0.292977</td>
      <td id="T_b472e_row7_col2" class="data row7 col2" >0.186230</td>
      <td id="T_b472e_row7_col3" class="data row7 col3" >0.361922</td>
      <td id="T_b472e_row7_col4" class="data row7 col4" >-0.256294</td>
      <td id="T_b472e_row7_col5" class="data row7 col5" >-0.449935</td>
      <td id="T_b472e_row7_col6" class="data row7 col6" >-0.537900</td>
      <td id="T_b472e_row7_col7" class="data row7 col7" >1.000000</td>
      <td id="T_b472e_row7_col8" class="data row7 col8" >-0.365845</td>
      <td id="T_b472e_row7_col9" class="data row7 col9" >0.139057</td>
      <td id="T_b472e_row7_col10" class="data row7 col10" >-0.262640</td>
      <td id="T_b472e_row7_col11" class="data row7 col11" >-0.503270</td>
      <td id="T_b472e_row7_col12" class="data row7 col12" >-0.311385</td>
    </tr>
    <tr>
      <th id="T_b472e_level0_row8" class="row_heading level0 row8" >Proanthocyanins</th>
      <td id="T_b472e_row8_col0" class="data row8 col0" >0.136698</td>
      <td id="T_b472e_row8_col1" class="data row8 col1" >-0.220746</td>
      <td id="T_b472e_row8_col2" class="data row8 col2" >0.009652</td>
      <td id="T_b472e_row8_col3" class="data row8 col3" >-0.197327</td>
      <td id="T_b472e_row8_col4" class="data row8 col4" >0.236441</td>
      <td id="T_b472e_row8_col5" class="data row8 col5" >0.612413</td>
      <td id="T_b472e_row8_col6" class="data row8 col6" >0.652692</td>
      <td id="T_b472e_row8_col7" class="data row8 col7" >-0.365845</td>
      <td id="T_b472e_row8_col8" class="data row8 col8" >1.000000</td>
      <td id="T_b472e_row8_col9" class="data row8 col9" >-0.025250</td>
      <td id="T_b472e_row8_col10" class="data row8 col10" >0.295544</td>
      <td id="T_b472e_row8_col11" class="data row8 col11" >0.519067</td>
      <td id="T_b472e_row8_col12" class="data row8 col12" >0.330417</td>
    </tr>
    <tr>
      <th id="T_b472e_level0_row9" class="row_heading level0 row9" >Color_Intensity</th>
      <td id="T_b472e_row9_col0" class="data row9 col0" >0.546364</td>
      <td id="T_b472e_row9_col1" class="data row9 col1" >0.248985</td>
      <td id="T_b472e_row9_col2" class="data row9 col2" >0.258887</td>
      <td id="T_b472e_row9_col3" class="data row9 col3" >0.018732</td>
      <td id="T_b472e_row9_col4" class="data row9 col4" >0.199950</td>
      <td id="T_b472e_row9_col5" class="data row9 col5" >-0.055136</td>
      <td id="T_b472e_row9_col6" class="data row9 col6" >-0.172379</td>
      <td id="T_b472e_row9_col7" class="data row9 col7" >0.139057</td>
      <td id="T_b472e_row9_col8" class="data row9 col8" >-0.025250</td>
      <td id="T_b472e_row9_col9" class="data row9 col9" >1.000000</td>
      <td id="T_b472e_row9_col10" class="data row9 col10" >-0.521813</td>
      <td id="T_b472e_row9_col11" class="data row9 col11" >-0.428815</td>
      <td id="T_b472e_row9_col12" class="data row9 col12" >0.316100</td>
    </tr>
    <tr>
      <th id="T_b472e_level0_row10" class="row_heading level0 row10" >Hue</th>
      <td id="T_b472e_row10_col0" class="data row10 col0" >-0.071747</td>
      <td id="T_b472e_row10_col1" class="data row10 col1" >-0.561296</td>
      <td id="T_b472e_row10_col2" class="data row10 col2" >-0.074667</td>
      <td id="T_b472e_row10_col3" class="data row10 col3" >-0.273955</td>
      <td id="T_b472e_row10_col4" class="data row10 col4" >0.055398</td>
      <td id="T_b472e_row10_col5" class="data row10 col5" >0.433681</td>
      <td id="T_b472e_row10_col6" class="data row10 col6" >0.543479</td>
      <td id="T_b472e_row10_col7" class="data row10 col7" >-0.262640</td>
      <td id="T_b472e_row10_col8" class="data row10 col8" >0.295544</td>
      <td id="T_b472e_row10_col9" class="data row10 col9" >-0.521813</td>
      <td id="T_b472e_row10_col10" class="data row10 col10" >1.000000</td>
      <td id="T_b472e_row10_col11" class="data row10 col11" >0.565468</td>
      <td id="T_b472e_row10_col12" class="data row10 col12" >0.236183</td>
    </tr>
    <tr>
      <th id="T_b472e_level0_row11" class="row_heading level0 row11" >OD280</th>
      <td id="T_b472e_row11_col0" class="data row11 col0" >0.072343</td>
      <td id="T_b472e_row11_col1" class="data row11 col1" >-0.368710</td>
      <td id="T_b472e_row11_col2" class="data row11 col2" >0.003911</td>
      <td id="T_b472e_row11_col3" class="data row11 col3" >-0.276769</td>
      <td id="T_b472e_row11_col4" class="data row11 col4" >0.066004</td>
      <td id="T_b472e_row11_col5" class="data row11 col5" >0.699949</td>
      <td id="T_b472e_row11_col6" class="data row11 col6" >0.787194</td>
      <td id="T_b472e_row11_col7" class="data row11 col7" >-0.503270</td>
      <td id="T_b472e_row11_col8" class="data row11 col8" >0.519067</td>
      <td id="T_b472e_row11_col9" class="data row11 col9" >-0.428815</td>
      <td id="T_b472e_row11_col10" class="data row11 col10" >0.565468</td>
      <td id="T_b472e_row11_col11" class="data row11 col11" >1.000000</td>
      <td id="T_b472e_row11_col12" class="data row11 col12" >0.312761</td>
    </tr>
    <tr>
      <th id="T_b472e_level0_row12" class="row_heading level0 row12" >Proline</th>
      <td id="T_b472e_row12_col0" class="data row12 col0" >0.643720</td>
      <td id="T_b472e_row12_col1" class="data row12 col1" >-0.192011</td>
      <td id="T_b472e_row12_col2" class="data row12 col2" >0.223626</td>
      <td id="T_b472e_row12_col3" class="data row12 col3" >-0.440597</td>
      <td id="T_b472e_row12_col4" class="data row12 col4" >0.393351</td>
      <td id="T_b472e_row12_col5" class="data row12 col5" >0.498115</td>
      <td id="T_b472e_row12_col6" class="data row12 col6" >0.494193</td>
      <td id="T_b472e_row12_col7" class="data row12 col7" >-0.311385</td>
      <td id="T_b472e_row12_col8" class="data row12 col8" >0.330417</td>
      <td id="T_b472e_row12_col9" class="data row12 col9" >0.316100</td>
      <td id="T_b472e_row12_col10" class="data row12 col10" >0.236183</td>
      <td id="T_b472e_row12_col11" class="data row12 col11" >0.312761</td>
      <td id="T_b472e_row12_col12" class="data row12 col12" >1.000000</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>Ahora seleccionemos el conjunto de entrenamiento y prueba usando la función <code class="docutils literal notranslate"><span class="pre">train_test_split</span></code></p>
<p>``train_test_split<code class="docutils literal notranslate"><span class="pre">es</span> <span class="pre">una</span> <span class="pre">función</span> <span class="pre">de</span> <span class="pre">la</span> <span class="pre">biblioteca</span></code>scikit-learn` en Python que se utiliza para dividir un conjunto de datos en dos partes: uno para entrenamiento (train) y otro para pruebas (test). Esta división es fundamental cuando se entrenan modelos de machine learning, ya que permite evaluar el rendimiento del modelo en datos no vistos después del entrenamiento.</p>
<p>Aquí te explico brevemente cada parte:</p>
<ul class="simple">
<li><p><strong>Conjunto de entrenamiento (train set)</strong>: Es el subconjunto de datos que se utiliza para entrenar el modelo.</p></li>
<li><p><strong>Conjunto de prueba (test set)</strong>: Es el subconjunto de datos que se reserva para evaluar el rendimiento del modelo entrenado.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Dividir el conjunto de datos en entrenamiento y conjunto de testing</span>
<span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span><span class="n">test_size</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">stratify</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Antes de realizar un análisis de componentes principales (PCA), es importante estandarizar los datos (es decir, escalarlos para que tengan media 0 y desviación estándar 1). Esto se debe a las siguientes razones clave:</p>
<ol class="arabic simple">
<li><p>Sensibilidad a la Escala
PCA busca maximizar la varianza de los datos para identificar las principales direcciones de variación. Si las características de los datos están en diferentes escalas, las variables con valores más grandes (por ejemplo, ingresos en miles) dominarán el análisis, mientras que las variables con valores pequeños (por ejemplo, puntajes de satisfacción en una escala de 1 a 10) tendrán un impacto muy reducido. Estandarizar las variables pone todas las características en la misma escala, permitiendo que el PCA capte adecuadamente la importancia relativa de cada variable.</p></li>
<li><p>Efecto en la Varianza
PCA se basa en la matriz de covarianza de los datos, que calcula las relaciones entre las variables. Si las variables no están estandarizadas, las que tengan un rango mayor tendrán más peso en el cálculo de la varianza total, lo que sesgará los resultados hacia esas variables. Esto lleva a componentes principales que no reflejan adecuadamente la estructura subyacente de los datos.</p></li>
<li><p>Comparabilidad de las Variables
Las características en los conjuntos de datos reales a menudo tienen unidades diferentes (por ejemplo, ingresos, edades, kilómetros, etc.). Si no se estandarizan, PCA puede no ser capaz de comparar correctamente la contribución de cada característica. La estandarización asegura que todas las características contribuyan por igual al análisis, eliminando el sesgo de unidades.</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Escalar las variables y establecer los valores en una nueva variabl</span>
<span class="n">scaler</span> <span class="o">=</span> <span class="n">StandardScaler</span><span class="p">()</span>

<span class="c1"># Estandaizamos los datos X_scaled_train y X_scaled_test</span>
<span class="n">X_scaled_train</span> <span class="o">=</span> <span class="n">scaler</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X_train</span><span class="p">)</span>
<span class="n">X_scaled_test</span> <span class="o">=</span> <span class="n">scaler</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="warning admonition">
<p class="admonition-title"><strong>Observación</strong></p>
<p>si aplicas <code class="docutils literal notranslate"><span class="pre">fit_transform</span></code> tanto en el conjunto de entrenamiento como en el de prueba, puedes cometer <strong>data leakage</strong> (fuga de datos). Esto sucede porque estarías utilizando información del conjunto de prueba (que debería ser “desconocido” para el modelo) durante la fase de preprocesamiento, lo cual afecta la evaluación y puede generar una visión poco realista del rendimiento del modelo.</p>
<p>Al usar <code class="docutils literal notranslate"><span class="pre">fit_transform</span></code> en ambos conjuntos, los parámetros estadísticos (como la media y la desviación estándar) se calcularían con los datos de prueba, violando el principio de que estos datos deben permanecer completamente fuera del proceso de entrenamiento.</p>
</div>
<p>La idea de la reducción de dimensionalidad es la siguiente:</p>
<p><img alt="pca" src="_images/pca.png" /></p>
<p>El proceso algoritmico es el siguiente:</p>
<ol class="arabic simple">
<li><p>Aplicar escalado de variables a la matriz de características <span class="math notranslate nohighlight">\(X\)</span>, formada por <span class="math notranslate nohighlight">\(m\)</span> variables independientes.</p></li>
<li><p>Calcular la matriz de covarianzas de las <span class="math notranslate nohighlight">\(m\)</span> variables independientes de <span class="math notranslate nohighlight">\(X\)</span>.</p></li>
<li><p>Calcular los valores y vectores propios de la matriz de covarianzas.</p></li>
<li><p>Elegir un porcentaje <span class="math notranslate nohighlight">\(P\)</span> de varianza explicada y elegir los <span class="math notranslate nohighlight">\(p\leq m\)</span> valores propios más grandes tales que:</p></li>
</ol>
<div class="math notranslate nohighlight">
\[
\frac{\sum_{j=1}^{p}\lambda_j}{\sum_{i=1}^{m}\lambda_i}\geq P
\]</div>
<ol class="arabic simple" start="5">
<li><p>Los <span class="math notranslate nohighlight">\(p\)</span> vectores propios asociados a estos <span class="math notranslate nohighlight">\(p\)</span> valores más grandes son las componentes principales. El espacio <span class="math notranslate nohighlight">\(m-\)</span> dimensional del dataset original se proyecta al nuevo subespacio <span class="math notranslate nohighlight">\(p-\)</span> dimensional de características, aplicando la matriz de proyecciones (que tiene los <span class="math notranslate nohighlight">\(p\)</span> vectores propios por columnas)</p></li>
</ol>
<p>Ahora que hemos preprocesado nuestros datos, estamos listos para usar PCA para determinar en qué medida podemos reducir la dimensionalidad de nuestros datos. Podemos usar <strong>gráficos de pantalla</strong> y <strong>gráficos de varianza explicada acumulativa</strong> para encontrar el número de componentes a utilizar en análisis posteriores.</p>
<p>Los gráficos de pantalla muestran el número de componentes frente a la varianza explicada por cada componente, ordenada en orden descendente de varianza. Los gráficos de pantalla nos ayudan a tener una mejor idea de qué componentes explican una cantidad suficiente de varianza en nuestros datos. Al utilizar los gráficos de pantalla, generalmente se utiliza una "curva" (una caída abrupta de un punto de datos al siguiente) en el gráfico para decidir sobre un corte adecuado.</p><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Obtener nuestros ratios de varianza explicada de PCA utilizando todas las características.</span>
<span class="n">pca</span> <span class="o">=</span> <span class="n">PCA</span><span class="p">()</span>
<span class="n">pca</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_scaled_train</span><span class="p">)</span>
<span class="n">exp_variance</span> <span class="o">=</span> <span class="n">pca</span><span class="o">.</span><span class="n">explained_variance_ratio_</span>

<span class="c1"># Graficar la varianza explicada utilizando un gráfico de barras.</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">pca</span><span class="o">.</span><span class="n">n_components_</span><span class="p">),</span> <span class="n">exp_variance</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Varianza&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Componentes principales&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/9639c18d5a414e76b7d86e1e28064c284ccf12880abd3c1fb874ce790efd28ef.png" src="_images/9639c18d5a414e76b7d86e1e28064c284ccf12880abd3c1fb874ce790efd28ef.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">pca</span><span class="o">.</span><span class="n">n_components_</span><span class="p">),</span> <span class="n">exp_variance</span><span class="p">,</span> <span class="s1">&#39;bx-&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Componentes principales&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Varianza&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Método del codo para escogencia de la optima componente&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/9d71c35b7fa0b06f126d2a9d8939aa5f909390f87ffd51bdd0bed5d78ff75258.png" src="_images/9d71c35b7fa0b06f126d2a9d8939aa5f909390f87ffd51bdd0bed5d78ff75258.png" />
</div>
</div>
<p>Si somos desafortunads y no parece haber un <em>codo</em> claro en este gráfico, lo que significa que no es sencillo encontrar el número de dimensiones intrínsecas utilizando este método. En su lugar, también podemos mirar el <strong>gráfico acumulativo de varianza explicada</strong> para determinar cuántas características se requieren para explicar, por ejemplo, alrededor del <span class="math notranslate nohighlight">\(85\%\)</span> de la varianza (los puntos de corte son algo arbitrarios aquí, y generalmente se deciden por <em>reglas empíricas</em>). Una vez que determinamos el número adecuado de componentes, podemos realizar PCA con esa cantidad de componentes, idealmente reduciendo la dimensionalidad de nuestros datos.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Calcular la varianza explicada acumulada</span>
<span class="n">cum_exp_variance</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">exp_variance</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">cum_exp_variance</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Componentes principales&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Varianza explicativa acumulada&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mf">0.85</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/f4c3673f96d4194a6eadfc59698d641841cc26992ed25b75b824a40ecf2331a3.png" src="_images/f4c3673f96d4194a6eadfc59698d641841cc26992ed25b75b824a40ecf2331a3.png" />
</div>
</div>
<p>¡Vimos en el gráfico que 7 características (recuerde que la indexación comienza en 0) pueden explicar el 85% de la varianza!. </p><p>Veamos como quedaría las variables característica con respecto a las componentes principales
:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Supongamos que tienes pca.components_ y X definidos</span>
<span class="n">num_components</span> <span class="o">=</span> <span class="n">pca</span><span class="o">.</span><span class="n">components_</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># Número de componentes principales</span>
<span class="n">feature_names</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">columns</span>  <span class="c1"># Obtener los nombres de las características del DataFrame</span>

<span class="n">plt</span><span class="o">.</span><span class="n">matshow</span><span class="p">(</span><span class="n">pca</span><span class="o">.</span><span class="n">components_</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;coolwarm_r&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">()</span>

<span class="c1"># Establecer las etiquetas de los ticks en el eje y</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">ticks</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">num_components</span><span class="p">),</span>
           <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">ra componente&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_components</span><span class="p">)])</span>

<span class="c1"># Establecer las etiquetas de los ticks en el eje x</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">ticks</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">feature_names</span><span class="p">)),</span>
           <span class="n">labels</span><span class="o">=</span><span class="n">feature_names</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Características o variables independientes&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Componentes Principales&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/ab9a0725f02f84fdbe53c4308728ff67ea63c313b6115a015c47abdb874824ce.png" src="_images/ab9a0725f02f84fdbe53c4308728ff67ea63c313b6115a015c47abdb874824ce.png" />
</div>
</div>
<p>Por lo tanto, podemos usar 7 componentes para realizar PCA y reducir la dimensionalidad de nuestras características de entrenamiento y prueba.</p><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Realizar PCA con el número de componentes elegido y proyectar los datos en los componentes.</span>
<span class="n">pca</span> <span class="o">=</span> <span class="n">PCA</span><span class="p">(</span><span class="n">n_components</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># Ajustar y transformar las características de entrenamiento escaladas utilizando pca.</span>
<span class="n">X_train_pca</span> <span class="o">=</span> <span class="n">pca</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X_scaled_train</span><span class="p">)</span>

<span class="c1"># Ajuste y transforme las características de prueba escaladas utilizando PCA.</span>
<span class="n">X_test_pca</span> <span class="o">=</span> <span class="n">pca</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X_scaled_test</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Muestras las variables del conjunto de entrenamiento</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Crear un DataFrame con los datos transformados</span>
<span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s1">&#39;PC</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">pca</span><span class="o">.</span><span class="n">n_components_</span><span class="p">)]</span>
<span class="n">X_train_pca_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">X_train_pca</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>

<span class="n">X_train_pca_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PC1</th>
      <th>PC2</th>
      <th>PC3</th>
      <th>PC4</th>
      <th>PC5</th>
      <th>PC6</th>
      <th>PC7</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-0.783937</td>
      <td>-1.590432</td>
      <td>0.568115</td>
      <td>0.039495</td>
      <td>1.177684</td>
      <td>1.076519</td>
      <td>-0.869513</td>
    </tr>
    <tr>
      <th>1</th>
      <td>-1.792083</td>
      <td>0.583400</td>
      <td>-1.321347</td>
      <td>-0.527003</td>
      <td>-0.970855</td>
      <td>-0.427172</td>
      <td>-0.534818</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2.101051</td>
      <td>2.109598</td>
      <td>0.790712</td>
      <td>-0.591235</td>
      <td>0.245845</td>
      <td>0.613814</td>
      <td>-0.696635</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3.107242</td>
      <td>0.448619</td>
      <td>-1.057832</td>
      <td>0.473768</td>
      <td>-1.028770</td>
      <td>-0.410854</td>
      <td>0.651005</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.725718</td>
      <td>-2.107998</td>
      <td>0.588435</td>
      <td>-0.829437</td>
      <td>-0.875271</td>
      <td>0.438685</td>
      <td>0.583508</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Un <code class="docutils literal notranslate"><span class="pre">Pipeline</span></code> es una herramienta en <code class="docutils literal notranslate"><span class="pre">scikit-learn</span></code> que te permite encadenar múltiples pasos de procesamiento y modelado en un solo flujo de trabajo. Es especialmente útil cuando necesitas aplicar varias transformaciones a tus datos (como escalado, reducción de dimensionalidad, etc.) antes de entrenar un modelo de aprendizaje automático.</p>
<div class="tip dropdown admonition">
<p class="admonition-title">¿Por qué usar Pipeline?</p>
<ul class="simple">
<li><p><strong>Automatización</strong>: Automatiza el flujo de trabajo de preprocesamiento y modelado en una sola estructura. Esto asegura que los mismos pasos de preprocesamiento se apliquen a los datos de entrenamiento y a los datos de prueba.</p></li>
<li><p><strong>Evitar fugas de datos</strong>: Al entrenar un modelo, debes asegurarte de que el preprocesamiento (como escalado) se hace solo con los datos de entrenamiento y luego se aplica a los datos de prueba, evitando fugas de información.</p></li>
<li><p><strong>Código más limpio y organizado</strong>: Al agrupar todos los pasos en un solo objeto Pipeline, reduces la cantidad de código repetitivo, facilitando la lectura y el mantenimiento.</p></li>
</ul>
</div>
<p>Automatización de lo realizado anteriormente</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Importar los paquetes</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">StandardScaler</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">sklearn.decomposition</span> <span class="kn">import</span> <span class="n">PCA</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>
<span class="kn">from</span> <span class="nn">sklearn.pipeline</span> <span class="kn">import</span> <span class="n">Pipeline</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Importar un archivo CSV como DataFrame</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;_data/datadescrip/Wine.csv&#39;</span><span class="p">)</span>

<span class="c1"># Variables independientes y variable respuesta</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">:</span><span class="mi">13</span><span class="p">]</span> <span class="c1"># Caracteristica o features</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">13</span><span class="p">]</span>   <span class="c1"># respuesta o target</span>

<span class="c1"># Dividir el conjunto de datos en entrenamiento y conjunto de testing</span>
<span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span><span class="n">test_size</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">stratify</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># Pipeline </span>
<span class="n">pca_line</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">([(</span><span class="s2">&quot;scaler&quot;</span><span class="p">,</span> <span class="n">StandardScaler</span><span class="p">()),</span> <span class="p">(</span><span class="s2">&quot;pca&quot;</span><span class="p">,</span> <span class="n">PCA</span><span class="p">(</span><span class="n">n_components</span><span class="o">=</span><span class="mi">7</span><span class="p">))])</span>

<span class="c1"># Aplicar el pipeline a los datos (suponiendo que &#39;X_train&#39; es tu conjunto de características)</span>
<span class="n">X_pca</span> <span class="o">=</span> <span class="n">pca_line</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X_train</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Crear un DataFrame con los componentes principales</span>
<span class="n">acp</span> <span class="o">=</span> <span class="n">pca_line</span><span class="o">.</span><span class="n">named_steps</span><span class="p">[</span><span class="s2">&quot;pca&quot;</span><span class="p">]</span>
<span class="n">df_pca</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">X_pca</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;PC</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">acp</span><span class="o">.</span><span class="n">n_components_</span><span class="p">)])</span>

<span class="c1"># Mostrar las primeras filas del DataFrame</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df_pca</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>        PC1       PC2       PC3       PC4       PC5       PC6       PC7
0 -0.783937 -1.590432  0.568115  0.039495  1.177684  1.076519 -0.869513
1 -1.792083  0.583400 -1.321347 -0.527003 -0.970855 -0.427172 -0.534818
2  2.101051  2.109598  0.790712 -0.591235  0.245845  0.613814 -0.696635
3  3.107242  0.448619 -1.057832  0.473768 -1.028770 -0.410854  0.651005
4  0.725718 -2.107998  0.588435 -0.829437 -0.875271  0.438685  0.583508
</pre></div>
</div>
</div>
</div>
<div class="tip admonition">
<p class="admonition-title"><strong>Ejercicios</strong></p>
<ol class="arabic simple">
<li><p>Cargue el conjunto de datos <code class="docutils literal notranslate"><span class="pre">grains</span></code> ubicados en la carpeta dataadescrip y realice un análisis de componentes principales similar a lo explicado, sin <code class="docutils literal notranslate"><span class="pre">pipeline</span></code>.</p></li>
<li><p>Cargue los datos de <code class="docutils literal notranslate"><span class="pre">fish</span></code>, haga un análisis exploratorio y desarrolle el codigo siguiente</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Importación de paquetes necesarios</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">StandardScaler</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">sklearn.decomposition</span> <span class="kn">import</span> <span class="n">PCA</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>
<span class="kn">from</span> <span class="nn">sklearn.pipeline</span> <span class="kn">import</span> <span class="n">Pipeline</span>

<span class="c1"># Usa un escalador: escalado</span>
<span class="c1">## escalado = ____</span>

<span class="c1"># Crea la instancia ACP: acp</span>
<span class="c1">## acp = ____</span>

<span class="c1"># Crea pipeline: pipeline</span>
<span class="c1">## pipeline = ____</span>

<span class="c1"># Ajuste el pipeline para samples (muestra de fish)</span>
<span class="c1">## ____</span>

<span class="c1"># Grafique la varianza explicada</span>
<span class="c1">## caract = ____</span>
<span class="c1">## plt.bar(____, ____)</span>
<span class="c1">## plt.xlabel(&#39;Variables del ACP&#39;)</span>
<span class="c1">## plt.ylabel(&#39;varianza&#39;)</span>
<span class="c1">## plt.xticks(caract)</span>
<span class="c1">## plt.show()</span>
</pre></div>
</div>
</div>
</section>
<section id="analisis-de-agrupamiento-cluster">
<h3><strong>Análisis de agrupamiento (cluster)</strong><a class="headerlink" href="#analisis-de-agrupamiento-cluster" title="Permalink to this heading">#</a></h3>
<p>Descubra cómo identificar y analizar grupos subyacentes en conjuntos de datos mediante técnicas de agrupamiento. En este capítulo, aprenderá a:</p>
<ul class="simple">
<li><p><strong>Segmentar Empresas</strong>: Agrupe empresas según sus precios de mercado de valores para identificar patrones y similitudes en su desempeño.</p></li>
<li><p><strong>Clasificar Especies</strong>: Diferencie entre diversas especies agrupando sus medidas biológicas para obtener una comprensión más clara de su diversidad y relaciones.</p></li>
</ul>
<p>Aprenderá a aplicar métodos de clustering para revelar estructuras ocultas en los datos, permitiéndole segmentar y analizar información de manera más eficaz y orientada a objetivos específicos.</p>
<section id="k-means">
<h4><strong>K-Means</strong><a class="headerlink" href="#k-means" title="Permalink to this heading">#</a></h4>
<p>El algoritmo <strong>KMeans</strong> agrupa los datos intentando separar las muestras en <span class="math notranslate nohighlight">\(n\)</span> grupos de varianza igual, minimizando un criterio conocido como la <em>inercia o la suma de cuadrados</em> dentro del clúster. Este algoritmo requiere que se especifique el número de clústeres. Escala bien con grandes cantidades de muestras y se ha utilizado en una amplia gama de áreas de aplicación en muchos campos diferentes.</p>
<p>El algoritmo <strong>k-means</strong> divide un conjunto de muestras en clústeres disjuntos, cada uno descrito por la media de las muestras en el clúster. Las medias se conocen comúnmente como los <em>centroides</em> de los clústeres; ten en cuenta que, en general, no son puntos del conjunto de datos, aunque viven en el mismo espacio.</p>
<p>La inercia puede ser reconocida como una medida de cuán internamente coherentes son los clústeres. Presenta varios inconvenientes:</p>
<ul class="simple">
<li><p>La inercia supone que los clústeres son convexos e isotrópicos, lo cual no siempre es el caso. Responde mal a clústeres alargados o a variedades con formas irregulares.</p></li>
<li><p>La inercia no es una métrica normalizada: solo sabemos que valores más bajos son mejores y que cero es óptimo. Pero en espacios de alta dimensión, las distancias euclidianas tienden a inflarse (esto es un ejemplo de la llamada “maldición de la dimensionalidad”). Ejecutar un algoritmo de reducción de dimensionalidad como el Análisis de Componentes Principales (PCA) antes del agrupamiento k-means puede aliviar este problema y acelerar los cálculos.</p></li>
</ul>
<div class="note admonition">
<p class="admonition-title"><strong>Ventajas de K-Means</strong></p>
<ul class="simple">
<li><p>Simple de entender e implementar.</p></li>
<li><p>Eficiente en términos de tiempo de cálculo para grandes conjuntos de datos.</p></li>
</ul>
</div>
<div class="warning admonition">
<p class="admonition-title"><strong>Desventajas de K-Means</strong></p>
<ul class="simple">
<li><p>Requiere especificar el número de clústeres K a priori.</p></li>
<li><p>Sensible a la inicialización de los centroides.</p></li>
<li><p>No siempre encuentra el clúster óptimo; puede converger a soluciones locales en lugar de globales.</p></li>
</ul>
</div>
<p>Entendamos como funciona el algoritmo de <code class="docutils literal notranslate"><span class="pre">K-Means</span></code>:</p>
<ol class="arabic simple">
<li><p><strong>Paso 1</strong>: Elegir el número <span class="math notranslate nohighlight">\(K\)</span> de clusters. Tomemos <span class="math notranslate nohighlight">\(K=2\)</span></p></li>
</ol>
<figure class="align-center" id="paso-1-con-k-2">
<a class="reference internal image-reference" href="_images/km1.png"><img alt="_images/km1.png" src="_images/km1.png" style="width: 348.0px; height: 198.5px;" /></a>
</figure>
<ol class="arabic simple" start="2">
<li><p><strong>Paso 2</strong>: Seleccionar al azar <span class="math notranslate nohighlight">\(K\)</span> puntos, los baricentros (no necesariamente de nuestrp dataset)</p></li>
</ol>
<figure class="align-center" id="paso-2-con-k-2">
<a class="reference internal image-reference" href="_images/km2.png"><img alt="_images/km2.png" src="_images/km2.png" style="width: 343.2px; height: 193.2px;" /></a>
</figure>
<ol class="arabic simple" start="3">
<li><p><strong>Paso 3</strong>: Asignar cada punto al baricentro más cercano. Entonces esto formará los <span class="math notranslate nohighlight">\(K\)</span> clusters</p></li>
</ol>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p><img alt="km5" src="_images/km4.png" /></p></th>
<th class="head"><p><img alt="km6" src="_images/km3.png" /></p></th>
</tr>
</thead>
</table>
<ol class="arabic simple" start="4">
<li><p><strong>Paso 4</strong> Calcular y asignar el nuevo baricentro de cada cluster</p></li>
</ol>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p><img alt="km5" src="_images/km5.png" /></p></th>
<th class="head"><p><img alt="km6" src="_images/km6.png" /></p></th>
</tr>
</thead>
</table>
<ol class="arabic simple" start="5">
<li><p><strong>Paso 5</strong>:  Reasignar cada punto de los datos a su baricentro más cercano. Si ha habido nuevas asignaciones, ir al <strong>Paso 4</strong>, si no ir <strong>fin</strong>.</p></li>
</ol>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p><img alt="km7" src="_images/km7.png" /></p></th>
<th class="head"><p><img alt="km8" src="_images/km8.png" /></p></th>
</tr>
</thead>
</table>
<p>Volvemos al <strong>paso 4</strong>:</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p><img alt="km9" src="_images/km9.png" /></p></th>
<th class="head"><p><img alt="km10" src="_images/km10.png" /></p></th>
</tr>
</thead>
</table>
<p>Y nuevamente al <strong>paso 5</strong></p>
<figure class="align-center" id="paso-5-con-k-2">
<a class="reference internal image-reference" href="_images/km11.png"><img alt="_images/km11.png" src="_images/km11.png" style="width: 319.2px; height: 183.6px;" /></a>
</figure>
<p>El modelo está listo para usar.</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p><img alt="km11" src="_images/km12.png" /></p></th>
<th class="head"><p><img alt="km12" src="_images/km13.png" /></p></th>
</tr>
</thead>
</table>
<section id="la-trampa-de-la-inicializacion-aleatoria">
<h5><strong>La trampa de la inicialización aleatoria</strong><a class="headerlink" href="#la-trampa-de-la-inicializacion-aleatoria" title="Permalink to this heading">#</a></h5>
<p>El K-Means es un algoritmo de clustering popular que tiene como objetivo particionar un conjunto de datos en K grupos (clusters) basándose en la similitud de los datos. Sin embargo, uno de los problemas más comunes de este algoritmo es la trampa de la inicialización aleatoria.</p>
<div class="tip dropdown admonition">
<p class="admonition-title">¿En qué consiste esta trampa?</p>
<p>En K-Means, los centroides iniciales (puntos representativos de cada cluster) se seleccionan al azar. Esta aleatoriedad puede provocar los siguientes problemas:</p>
<ol class="arabic simple">
<li><p><strong>Convergencia a un mínimo local</strong>: Dado que K-Means minimiza la distancia dentro de los clusters, es posible que, dependiendo de los centroides iniciales, el algoritmo converja en un agrupamiento subóptimo (mínimo local), en lugar de encontrar la mejor agrupación posible (mínimo global).</p></li>
<li><p><strong>Resultados inconsistentes</strong>: Cada vez que se ejecuta K-Means, el algoritmo puede producir resultados diferentes debido a la inicialización aleatoria, lo que puede generar clusters de baja calidad si los centroides iniciales no están bien elegidos.</p></li>
<li><p><strong>Sensibilidad a outliers</strong>: Si un punto atípico es elegido como centroide inicial, puede sesgar significativamente los resultados y afectar la calidad del agrupamiento.</p></li>
</ol>
</div>
<p>Si inicializamos ubicando los baricentros de la siguiente forma</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p><img alt="km14" src="_images/km14.png" /></p></th>
<th class="head"><p><img alt="km15" src="_images/km15.png" /></p></th>
</tr>
</thead>
</table>
<p>Pero si inicializamos los baricentros de otra forma</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p><img alt="km16" src="_images/km16.png" /></p></th>
<th class="head"><p><img alt="km17" src="_images/km17.png" /></p></th>
</tr>
</thead>
</table>
<p>Al inicializar de manera aleatoria, notamos que no llegamos al mismo cluster.</p>
<p>Para evitar la trampa de la inicialización aleatoria, se han desarrollado varias estrategias, entre las cuales se destacan:</p>
<ul class="simple">
<li><p><strong>K-Means++</strong>: Esta variante mejora el proceso de inicialización al seleccionar los centroides de manera más inteligente. Los primeros centroides se eligen aleatoriamente, pero los centroides subsecuentes se seleccionan con base en la distancia máxima a los centroides ya seleccionados. Esto reduce significativamente las posibilidades de quedar atrapado en mínimos locales.</p></li>
<li><p><strong>Múltiples inicializaciones</strong>: Ejecutar el algoritmo K-Means varias veces con diferentes inicializaciones aleatorias y quedarse con el mejor resultado (el que minimice más la suma de las distancias intra-cluster).</p></li>
<li><p><strong>Métodos heurísticos o deterministas</strong>: Existen enfoques que usan algoritmos más complejos para seleccionar los centroides iniciales de manera no aleatoria, basándose en la estructura de los datos.</p></li>
</ul>
</section>
<section id="evaluacion-de-un-agrupamiento">
<h5><strong>Evaluación de un agrupamiento</strong><a class="headerlink" href="#evaluacion-de-un-agrupamiento" title="Permalink to this heading">#</a></h5>
<p>La <strong>evaluación de un agrupamiento (clustering)</strong> es crucial para determinar la calidad de los grupos formados por un algoritmo como K-Means u otros métodos de clustering. A diferencia de los problemas supervisados, en los que se tiene una verdad conocida (etiquetas), en el clustering no hay etiquetas predeterminadas, lo que hace que la evaluación sea más compleja.</p>
<p>Existen varias métricas y enfoques que se pueden utilizar para evaluar la calidad de un agrupamiento. Estos se dividen en dos grandes categorías: métricas internas (basadas solo en los datos y la estructura del cluster) y métricas externas (si se cuenta con alguna referencia o etiquetas verdaderas).</p>
<ol class="arabic">
<li><p><strong>Métricas Internas.</strong>
Estas métricas se utilizan cuando no se tiene información de la verdad subyacente (etiquetas verdaderas) y se basan en propiedades del propio modelo y los datos.</p>
<ul class="simple">
<li><p><strong>Suma de errores al cuadrado (SSE) o Inertia</strong>: Es la métrica utilizada por el algoritmo de K-Means. Mide la suma de las distancias cuadráticas entre los puntos y sus centroides correspondientes. Cuanto más bajo es este valor, mejor ajustados están los puntos dentro de los clusters. Sin embargo, tiende a disminuir a medida que aumenta el número de clusters, lo que puede llevar a sobreajuste.</p></li>
<li><p><strong>Índice de Silueta</strong>: Esta métrica mide la compacidad de los clusters y la separación entre ellos. Toma valores entre -1 y 1:</p>
<ul>
<li><p>Valores cercanos a 1 indican que los puntos están bien agrupados dentro de su cluster y bien separados de otros clusters.</p></li>
<li><p>Valores cercanos a 0 sugieren que los puntos están en la frontera entre clusters.</p></li>
<li><p>Valores negativos indican que los puntos están mal agrupados.</p></li>
</ul>
</li>
</ul>
<p>El índice de silueta tiene en cuenta tanto la cohesión (qué tan cerca están los puntos dentro de un cluster) como la separación (qué tan alejados están los clusters entre sí).</p>
<ul class="simple">
<li><p><strong>Distancia entre clusters (Dunn Index)</strong>: Cuantifica la distancia mínima entre dos clusters en relación con el diámetro máximo de los clusters. Un índice Dunn alto indica clusters compactos y bien separados.</p></li>
<li><p><strong>Cohesión y Separación</strong>: La cohesión mide cuán cercanos están los puntos dentro de un mismo cluster, mientras que la separación mide cuán alejados están los diferentes clusters entre sí. Idealmente, queremos maximizar la cohesión y la separación.</p></li>
</ul>
</li>
<li><p><strong>Métricas Externas.</strong>
Si se cuenta con etiquetas de verdad, se pueden utilizar las siguientes métricas comparativas para evaluar qué tan bien el algoritmo agrupó los datos.</p>
<ul class="simple">
<li><p><strong>Índice de Rand Ajustado (ARI)</strong>: Mide la similitud entre el agrupamiento obtenido y el agrupamiento verdadero, ajustando por el azar. El ARI toma valores entre -1 y 1, donde 1 indica una coincidencia perfecta entre el clustering y las etiquetas verdaderas, y valores cercanos a 0 indican una agrupación aleatoria.</p></li>
<li><p><strong>V-Measure</strong>: Evalúa la homogeneidad y completitud del agrupamiento en comparación con las etiquetas verdaderas. La homogeneidad mide si los clusters contienen solo puntos de una misma clase, y la completitud evalúa si todos los puntos de una misma clase están en el mismo cluster. La V-Measure es la media armónica de estas dos medidas.</p></li>
</ul>
</li>
<li><p><strong>Elección del Número de Clusters.</strong>
Determinar el número óptimo de clusters es un desafío en clustering. Algunos métodos para elegir el número adecuado de clusters son:</p>
<ul class="simple">
<li><p><strong>Método del codo</strong>: Gráfica la SSE (inertia) frente al número de clusters y busca el “codo” de la gráfica, que es el punto donde la disminución en la SSE se ralentiza. Este punto es sugerido como el número óptimo de clusters.</p></li>
<li><p><strong>Criterio de la silueta</strong>: Calcula el índice de silueta para diferentes números de clusters y selecciona el número que maximice este índice.</p></li>
<li><p><strong>Método Gap Statistic</strong>: Compara la variación intra-cluster observada con la esperada en una distribución aleatoria de los datos. El número óptimo de clusters es aquel que maximiza la brecha entre la observación y la expectativa.</p></li>
</ul>
</li>
</ol>
<p>Para el desarrollo del siguiente ejemplo escogeremos las inercia para usar el método del codo. La fórmula de la <strong>inercia</strong> (también conocida como <strong>SSE</strong>, <strong>Sum of Squared Errors</strong>) en el contexto de K-Means se define como la suma de las distancias cuadradas de cada punto a su centroide más cercano. Matemáticamente</p>
<div class="math notranslate nohighlight">
\[
\text{Inercia} = \sum_{i=1}^{k} \sum_{x \in C_i} \| x - \mu_i \|^2,
\]</div>
<p>donde</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(k\)</span> es el número de clusters.</p></li>
<li><p><span class="math notranslate nohighlight">\(C_i\)</span> es el conjunto de puntos en el <span class="math notranslate nohighlight">\(i\)</span>-ésimo cluster.</p></li>
<li><p><span class="math notranslate nohighlight">\(\mu_i\)</span> es el centroide del <span class="math notranslate nohighlight">\(i\)</span>-ésimo cluster.</p></li>
<li><p><span class="math notranslate nohighlight">\(\| x - \mu_i \|^2\)</span> es la distancia euclidiana cuadrada entre el punto <span class="math notranslate nohighlight">\(x\)</span> y el centroide <span class="math notranslate nohighlight">\(\mu_i\)</span>.</p></li>
</ul>
<p>Hagamos un ejemplo.</p>
<p><strong>Contexto empresarial</strong>: El centro comercial tiene una base de datos de sus clientes, con información sobre el <strong>ingreso anual</strong>, <strong>la edad</strong>, <strong>el género</strong> y una <strong>puntuación de gasto</strong> que refleja cómo estos clientes consumen dentro del centro comercial. Sin embargo, sin un análisis detallado, el centro comercial no tiene claro cómo estos clientes se comportan y qué características podrían definir diferentes segmentos de mercado. Este es un problema común en empresas que buscan maximizar la efectividad de sus campañas de marketing.</p>
<p><strong>Problema empresarial</strong>:
<strong>¿Cómo puede el centro comercial segmentar a sus clientes en grupos significativos que permitan implementar estrategias de marketing más efectivas y personalizadas?</strong></p>
<p>Por la pregunta empresarial, debemos aplicar un cluster, cuyo objetivo es segmentar a los clientes en grupos homogéneos para que el equipo de marketing pueda:</p>
<ul class="simple">
<li><p>Personalizar las ofertas y promociones basadas en las características específicas de cada grupo.</p></li>
<li><p>Optimizar los recursos de marketing, enfocándose en los clientes con mayor potencial de gasto o fidelización.</p></li>
<li><p>Desarrollar estrategias de retención y atracción, especialmente en los grupos que podrían tener un comportamiento de gasto bajo o estar subatendidos.</p></li>
<li><p>Maximizar los ingresos al identificar los patrones de consumo y diseñar productos o servicios que resuenen mejor con cada segmento.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># importar pandas</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="c1"># carguemos la data</span>
<span class="n">file_path</span> <span class="o">=</span> <span class="s1">&#39;_data\datadescrip\Mall_Customers.csv&#39;</span>
<span class="n">df_mall</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>

<span class="c1"># Mostrar las 5 primeras filas</span>
<span class="n">df_mall</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>CustomerID</th>
      <th>Genre</th>
      <th>Age</th>
      <th>Annual Income (k$)</th>
      <th>Spending Score (1-100)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>Male</td>
      <td>19</td>
      <td>15</td>
      <td>39</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>Male</td>
      <td>21</td>
      <td>15</td>
      <td>81</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>Female</td>
      <td>20</td>
      <td>16</td>
      <td>6</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>Female</td>
      <td>23</td>
      <td>16</td>
      <td>77</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>Female</td>
      <td>31</td>
      <td>17</td>
      <td>40</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Los datos que has proporcionado corresponden a un conjunto de clientes de un centro comercial. Contienen 200 registros y 5 columnas:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CustomerID</span></code>: Identificador único de cada cliente.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Genre</span></code>: Género del cliente (masculino o femenino).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Age</span></code>: Edad del cliente.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Annual</span> <span class="pre">Income</span> <span class="pre">(k$)</span></code>: Ingreso anual en miles de dólares.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Spending</span> <span class="pre">Score</span> <span class="pre">(1-100)</span></code>: Puntuación de gasto, que indica el comportamiento de consumo del cliente en una escala de 1 a 100.</p></li>
</ul>
<p>Ahora, usamos la codificación <strong>One-Hot-Coding</strong> es más útil si tienes más de dos categorías y deseas evitar cualquier sesgo implícito en el valor numérico.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Aplicar la codificación One-Hot a la columna &#39;Genre&#39; (Género)</span>
<span class="c1"># Esto creará nuevas columnas para cada categoría y eliminará la primera para evitar multicolinealidad</span>
<span class="n">df_mall_ohc</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">df_mall</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Genre&#39;</span><span class="p">],</span> <span class="n">drop_first</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Convertir la columna &#39;Genre_1&#39; a entero</span>
<span class="n">df_mall_ohc</span><span class="p">[</span><span class="s1">&#39;Genre_Male&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_mall_ohc</span><span class="p">[</span><span class="s1">&#39;Genre_Male&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

<span class="c1"># Mostrar las primeras filas para verificar el resultado</span>
<span class="n">df_mall_ohc</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>CustomerID</th>
      <th>Age</th>
      <th>Annual Income (k$)</th>
      <th>Spending Score (1-100)</th>
      <th>Genre_Male</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>19</td>
      <td>15</td>
      <td>39</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>21</td>
      <td>15</td>
      <td>81</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>20</td>
      <td>16</td>
      <td>6</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>23</td>
      <td>16</td>
      <td>77</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>31</td>
      <td>17</td>
      <td>40</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Escojamos el número optimo de cluster</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># importar KMeans</span>
<span class="kn">from</span> <span class="nn">sklearn.cluster</span> <span class="kn">import</span> <span class="n">KMeans</span>
<span class="kn">from</span> <span class="nn">matplotlib.ticker</span> <span class="kn">import</span> <span class="n">FuncFormatter</span>

<span class="c1"># Aquí se asume que ya tienes el DataFrame `df_mall_ohc` con la codificación One-Hot aplicada</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">df_mall_ohc</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;CustomerID&#39;</span><span class="p">])</span>  <span class="c1"># Excluir CustomerID para el clustering</span>

<span class="c1"># Determinamos el número óptimo de clusters utilizando el Método del Codo</span>
<span class="n">inercia</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">):</span>
    <span class="n">kmeans</span> <span class="o">=</span> <span class="n">KMeans</span><span class="p">(</span><span class="n">n_clusters</span><span class="o">=</span><span class="n">n</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="s1">&#39;k-means++&#39;</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
    <span class="n">kmeans</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
    <span class="n">inercia</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">kmeans</span><span class="o">.</span><span class="n">inertia_</span><span class="p">)</span>

<span class="c1"># Graficamos el Método del Codo para visualizar el número óptimo de clusters</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span> <span class="n">inercia</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Método del Codo para Número Óptimo de Clusters (con codificación One-Hot)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Número de Clusters&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Inercia&#39;</span><span class="p">)</span>

<span class="c1"># Formatear los valores del eje Y para evitar notación científica</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">FuncFormatter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="si">:</span><span class="s1">,</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/f6eabdf12c88e5b8098ba82fa380441c9cefda406565568ef4821661f34ba1f4.png" src="_images/f6eabdf12c88e5b8098ba82fa380441c9cefda406565568ef4821661f34ba1f4.png" />
</div>
</div>
<p>Al buscar el <em>codo</em> o el <em>punto</em> donde el cambio en la inercia disminuye significativamente, podemos ver que el número óptimo de clusters podría estar alrededor de 4 o 5, ya que después de eso, la disminución de la inercia se vuelve más plana. Tomemos <span class="math notranslate nohighlight">\(k=4\)</span> para hacer los clusters.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Elegir el número óptimo de clusters basado en el método del codo (aquí seleccionaremos 5)</span>
<span class="n">kmeans</span> <span class="o">=</span> <span class="n">KMeans</span><span class="p">(</span><span class="n">n_clusters</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="s1">&#39;k-means++&#39;</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="n">clusters</span> <span class="o">=</span> <span class="n">kmeans</span><span class="o">.</span><span class="n">fit_predict</span><span class="p">(</span><span class="n">df_mall_ohc</span><span class="p">)</span>

<span class="c1"># Añadir los clusters al conjunto de datos original</span>
<span class="n">X</span><span class="p">[</span><span class="s1">&#39;Cluster&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">clusters</span>

<span class="c1"># Graficar en 2D usando dos de las variables más relevantes: Ingreso Anual y Puntuación de Gasto</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;Annual Income (k$)&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;Spending Score (1-100)&#39;</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;Cluster&#39;</span><span class="p">,</span> 
                <span class="n">data</span><span class="o">=</span><span class="n">X</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s1">&#39;Set1&#39;</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Clusters de Clientes (Ingreso Anual vs Puntuación de Gasto)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Ingreso Anual (k$)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Puntuación de Gasto (1-100)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Cluster&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/fe53af2975574f77730e92879d244ae429a6cf7401b089a3e553bf016380c7d9.png" src="_images/fe53af2975574f77730e92879d244ae429a6cf7401b089a3e553bf016380c7d9.png" />
</div>
</div>
<p>Veamos un gráfico interactivo en 2D</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Importar plotly</span>
<span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>

<span class="c1"># Crear el gráfico en 2D usando Plotly, agregando Edad y Género como detalles adicionales</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df_mall_ohc</span><span class="p">,</span> 
                 <span class="n">x</span><span class="o">=</span><span class="s1">&#39;Annual Income (k$)&#39;</span><span class="p">,</span> 
                 <span class="n">y</span><span class="o">=</span><span class="s1">&#39;Spending Score (1-100)&#39;</span><span class="p">,</span> 
                 <span class="n">color</span><span class="o">=</span><span class="s1">&#39;Cluster&#39;</span><span class="p">,</span>
                 <span class="n">size</span><span class="o">=</span><span class="s1">&#39;Age&#39;</span><span class="p">,</span>  <span class="c1"># Usar &#39;Age&#39; para ajustar el tamaño de los puntos</span>
                 <span class="n">symbol</span><span class="o">=</span><span class="s1">&#39;Genre_Male&#39;</span><span class="p">,</span>  <span class="c1"># Usar &#39;Genre_Male&#39; para diferenciar los géneros con símbolos</span>
                 <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Clusters de Clientes (Ingreso Anual vs Puntuación de Gasto)&#39;</span><span class="p">,</span>
                 <span class="n">labels</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Annual Income (k$)&#39;</span><span class="p">:</span> <span class="s1">&#39;Ingreso Anual (k$)&#39;</span><span class="p">,</span> 
                         <span class="s1">&#39;Spending Score (1-100)&#39;</span><span class="p">:</span> <span class="s1">&#39;Puntuación de Gasto (1-100)&#39;</span><span class="p">},</span>
                 <span class="n">opacity</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

<span class="c1"># Ajustar el tamaño de los puntos y mostrar el gráfico interactivo</span>
<span class="n">fig</span><span class="o">.</span><span class="n">update_traces</span><span class="p">(</span><span class="n">marker</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">sizemode</span><span class="o">=</span><span class="s1">&#39;area&#39;</span><span class="p">,</span> <span class="n">sizeref</span><span class="o">=</span><span class="mf">2.</span><span class="o">*</span><span class="nb">max</span><span class="p">(</span><span class="n">df_mall_ohc</span><span class="p">[</span><span class="s1">&#39;Age&#39;</span><span class="p">])</span><span class="o">/</span><span class="p">(</span><span class="mf">10.</span><span class="o">**</span><span class="mi">2</span><span class="p">),</span> <span class="n">sizemin</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<p>Algunas conclusiones de gráfico 2D, graficando <strong>ingreso anual</strong>`** vs <strong>puntuación de gasto</strong>:</p>
<ol class="arabic simple">
<li><p>Segmentación clara basada en ingresos y comportamiento de gasto:</p>
<ul class="simple">
<li><p>Se observa una clara separación de clusters en función de ingreso anual y puntuación de pasto. Los clusters en diferentes colores representan grupos de clientes con diferentes comportamientos.</p></li>
<li><p>Los clientes con ingresos más bajos (por debajo de 40k) y puntuaciones de gasto bajas parecen agruparse en un cluster específico (amarillo). Este grupo puede representar clientes con un potencial de gasto bajo.</p></li>
<li><p>Los clientes con ingresos altos y puntuaciones de gasto altas (como el cluster púrpura) son probablemente clientes clave de alto valor, y las empresas pueden enfocarse en retenerlos con estrategias de fidelización.</p></li>
</ul>
</li>
<li><p>Clientes con ingresos moderados y alta puntuación de gasto:</p>
<ul class="simple">
<li><p>Hay un grupo de clientes con ingresos moderados (alrededor de 60k) pero con alta puntuación de gasto (alrededor de 60-80). Estos clientes pueden representar un buen target para campañas de up-selling (venta de versión mejorada o más cara del producto o servicio) o cross-selling (productos o servicios complementarios al producto).</p></li>
</ul>
</li>
<li><p>Género:</p>
<ul class="simple">
<li><p>Usando <strong>Genre_Male</strong>, puedes ver que hay una combinación de géneros en varios clusters, lo que sugiere que las diferencias en género no son un factor principal de diferenciación en este caso, aunque se podrían estudiar estrategias específicas basadas en los clusters por género.</p></li>
</ul>
</li>
</ol>
<p>También se genera un gráfico 3D interactivo donde el “Género” (representado como la columna “Genre_Male”) se utiliza para cambiar el símbolo de los puntos en el gráfico.</p>
<p>Te dejo el código que puedes ejecutar en tu entorno local para obtener el gráfico interactivo:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>

<span class="c1"># Crear el gráfico 3D interactivo usando Plotly</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">scatter_3d</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> 
                    <span class="n">x</span><span class="o">=</span><span class="s1">&#39;Annual Income (k$)&#39;</span><span class="p">,</span> 
                    <span class="n">y</span><span class="o">=</span><span class="s1">&#39;Spending Score (1-100)&#39;</span><span class="p">,</span> 
                    <span class="n">z</span><span class="o">=</span><span class="s1">&#39;Age&#39;</span><span class="p">,</span> 
                    <span class="n">color</span><span class="o">=</span><span class="s1">&#39;Cluster&#39;</span><span class="p">,</span>
                    <span class="n">symbol</span><span class="o">=</span><span class="s1">&#39;Genre_Male&#39;</span><span class="p">,</span>  <span class="c1"># Usar &#39;Genre_Male&#39; como símbolo</span>
                    <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Clusters de Clientes en 3D (con Género)&#39;</span><span class="p">,</span>
                    <span class="n">labels</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Annual Income (k$)&#39;</span><span class="p">:</span> <span class="s1">&#39;Ingreso Anual (k$)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;Spending Score (1-100)&#39;</span><span class="p">:</span> <span class="s1">&#39;Puntuación de Gasto&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;Age&#39;</span><span class="p">:</span> <span class="s1">&#39;Edad&#39;</span><span class="p">},</span>
                    <span class="n">opacity</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

<span class="c1"># Mostrar el gráfico</span>
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<p>En conclusiones generales:</p>
<ul class="simple">
<li><p><strong>Clientes clave identificados</strong>: Los clusters identifican claramente a los clientes de alto valor con ingresos altos y puntuaciones de gasto altas. Estos clientes representan una gran oportunidad para estrategias de fidelización y personalización de productos premium.</p></li>
<li><p><strong>Clientes con potencial de crecimiento</strong>: Hay un segmento claro de clientes con ingresos moderados y puntuaciones de gasto altas. Este grupo tiene un buen comportamiento de compra y podría beneficiarse de estrategias de up-selling o cross-selling.</p></li>
<li><p><strong>Segmentación por edad</strong>: Los clientes jóvenes y con ingresos bajos podrían estar en la fase inicial de sus carreras y, con el tiempo, aumentar su capacidad de compra. Las estrategias a largo plazo dirigidas a este grupo podrían convertirlos en clientes valiosos a futuro.</p></li>
<li><p><strong>Género</strong>: Aunque se incluyó el género en la segmentación, no parece ser un diferenciador importante en este análisis inicial. Sin embargo, se podrían estudiar estrategias específicas de género si fuera relevante para la empresa.</p></li>
</ul>
</section>
</section>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="modulo_2.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><strong>Módulo 2: Estructuración y manipulación de datos con Python</strong></p>
      </div>
    </a>
    <a class="right-next"
       href="modulo_4.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><strong>Módulo 4: Visualización de datos con Python</strong></p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#estadistica-descriptiva"><strong>Estadística descriptiva</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#poblacion-y-muestra"><strong>Población y muestra</strong></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#tipos-de-datos"><strong>Tipos de datos</strong></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-univariado"><strong>Análisis univariado</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#medidas-de-conteo-y-proporciones"><strong>Medidas de conteo y proporciones</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#medidas-de-tendencia-central"><strong>Medidas de tendencia central</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#medidas-de-dispersion"><strong>Medidas de dispersión</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#medidas-de-posicion"><strong>Medidas de posición</strong></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#distribuciones"><strong>Distribuciones</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#distribucion-normal"><strong>Distribución normal</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#distribucion-gamma"><strong>Distribución Gamma</strong></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-bivariado"><strong>Análisis bivariado</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#correlacion"><strong>Correlación</strong></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#inferencia-estadistica"><strong>Inferencia estadística</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pruebas-de-hipotesis"><strong>Pruebas de hipótesis</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#comparacion-de-2-grupos-poblacionales-independientes-parametrica"><strong>Comparación de 2 grupos poblacionales independientes paramétrica</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#igualdad-de-varianzas"><strong>Igualdad de varianzas</strong></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#varianzas-distintas"><strong>Varianzas distintas</strong></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#comparacion-de-2-grupos-poblacionales-dependientes-parametrica-pareadas"><strong>Comparación de 2 grupos poblacionales dependientes paramétrica (pareadas)</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#comparacion-de-2-grupos-poblacionales-independientes-no-parametrica"><strong>Comparación de 2 grupos poblacionales independientes no paramétrica</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#comparacion-de-2-grupos-poblacionales-dependientes-no-parametrica-pareadas"><strong>Comparación de 2 grupos poblacionales dependientes no paramétrica (pareadas)</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#anova-para-mas-de-2-grupos-parametricas"><strong>ANOVA para mas de 2 grupos paramétricas</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#kw-para-mas-de-2-grupos-no-parametrica"><strong>KW para mas de 2 grupos no parametrica</strong></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#machine-learning-no-supervisado"><strong>Machine learning no supervisado</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#tipos-de-aprendizaje-no-supervisado"><strong>Tipos de aprendizaje no supervisado</strong></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#desafios-del-aprendizaje-no-supervisado"><strong>Desafíos del aprendizaje no supervisado</strong></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#preprocesamiento-y-escalado"><strong>Preprocesamiento y escalado</strong></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-de-componentes-principales-reduccion-de-dimensiones"><strong>Análisis de componentes principales (reducción de dimensiones)</strong></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-de-agrupamiento-cluster"><strong>Análisis de agrupamiento (cluster)</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#k-means"><strong>K-Means</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#la-trampa-de-la-inicializacion-aleatoria"><strong>La trampa de la inicialización aleatoria</strong></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#evaluacion-de-un-agrupamiento"><strong>Evaluación de un agrupamiento</strong></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Centro de Estudios e Investigación en Análisis y Ciencia de datos - Data Invest -
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>